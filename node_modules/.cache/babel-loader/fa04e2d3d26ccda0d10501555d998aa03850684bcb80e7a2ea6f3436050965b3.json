{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useRef, useCallback, useEffect } from 'react';\nexport const useTooltip = () => {\n  _s();\n  const [hoveredPerson, setHoveredPerson] = useState(null);\n  const [mousePosition, setMousePosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showTooltip, setShowTooltip] = useState(false);\n  const [hoveredAchievement, setHoveredAchievement] = useState(null);\n  const [achievementTooltipPosition, setAchievementTooltipPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [showAchievementTooltip, setShowAchievementTooltip] = useState(false);\n  const hoverTimerRef = useRef(null);\n\n  // Очищаем таймер при размонтировании компонента\n  useEffect(() => {\n    return () => {\n      const timer = hoverTimerRef.current;\n      if (timer) {\n        clearTimeout(timer);\n      }\n    };\n  }, []);\n  const handlePersonHover = useCallback((person, x, y) => {\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n    }\n    if (person) {\n      setHoveredPerson(person);\n      setMousePosition({\n        x,\n        y\n      });\n      setShowTooltip(true);\n    } else {\n      hoverTimerRef.current = setTimeout(() => {\n        setShowTooltip(false);\n        setHoveredPerson(null);\n      }, 200);\n    }\n  }, []);\n  const handleAchievementHover = useCallback((achievement, x, y) => {\n    if (achievement) {\n      setHoveredAchievement(achievement);\n      setAchievementTooltipPosition({\n        x,\n        y\n      });\n      setShowAchievementTooltip(true);\n    } else {\n      setShowAchievementTooltip(false);\n      setHoveredAchievement(null);\n    }\n  }, []);\n  return {\n    hoveredPerson,\n    mousePosition,\n    showTooltip,\n    hoveredAchievement,\n    achievementTooltipPosition,\n    setAchievementTooltipPosition,\n    showAchievementTooltip,\n    hoverTimerRef,\n    handlePersonHover,\n    handleAchievementHover\n  };\n};\n_s(useTooltip, \"L9ATqoFjZu3Nl+qCjdEnmTS9Mlw=\");","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","useTooltip","_s","hoveredPerson","setHoveredPerson","mousePosition","setMousePosition","x","y","showTooltip","setShowTooltip","hoveredAchievement","setHoveredAchievement","achievementTooltipPosition","setAchievementTooltipPosition","showAchievementTooltip","setShowAchievementTooltip","hoverTimerRef","timer","current","clearTimeout","handlePersonHover","person","setTimeout","handleAchievementHover","achievement"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/hooks/useTooltip.ts"],"sourcesContent":["import { useState, useRef, useCallback, useEffect } from 'react'\r\nimport { Person } from '../types'\r\n\r\nexport const useTooltip = () => {\r\n  const [hoveredPerson, setHoveredPerson] = useState<Person | null>(null)\r\n  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 })\r\n  const [showTooltip, setShowTooltip] = useState(false)\r\n  const [hoveredAchievement, setHoveredAchievement] = useState<{ person: Person; year: number; index: number } | null>(null)\r\n  const [achievementTooltipPosition, setAchievementTooltipPosition] = useState({ x: 0, y: 0 })\r\n  const [showAchievementTooltip, setShowAchievementTooltip] = useState(false)\r\n  const hoverTimerRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // Очищаем таймер при размонтировании компонента\r\n  useEffect(() => {\r\n    return () => {\r\n      const timer = hoverTimerRef.current;\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handlePersonHover = useCallback((person: Person | null, x: number, y: number) => {\r\n    if (hoverTimerRef.current) {\r\n      clearTimeout(hoverTimerRef.current);\r\n    }\r\n\r\n    if (person) {\r\n      setHoveredPerson(person);\r\n      setMousePosition({ x, y });\r\n      setShowTooltip(true);\r\n    } else {\r\n      hoverTimerRef.current = setTimeout(() => {\r\n        setShowTooltip(false);\r\n        setHoveredPerson(null);\r\n      }, 200);\r\n    }\r\n  }, [])\r\n\r\n  const handleAchievementHover = useCallback((achievement: { person: Person; year: number; index: number } | null, x: number, y: number) => {\r\n    if (achievement) {\r\n      setHoveredAchievement(achievement);\r\n      setAchievementTooltipPosition({ x, y });\r\n      setShowAchievementTooltip(true);\r\n    } else {\r\n      setShowAchievementTooltip(false);\r\n      setHoveredAchievement(null);\r\n    }\r\n  }, [])\r\n\r\n  return {\r\n    hoveredPerson,\r\n    mousePosition,\r\n    showTooltip,\r\n    hoveredAchievement,\r\n    achievementTooltipPosition,\r\n    setAchievementTooltipPosition,\r\n    showAchievementTooltip,\r\n    hoverTimerRef,\r\n    handlePersonHover,\r\n    handleAchievementHover\r\n  }\r\n} "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAGhE,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGP,QAAQ,CAAgB,IAAI,CAAC;EACvE,MAAM,CAACQ,aAAa,EAAEC,gBAAgB,CAAC,GAAGT,QAAQ,CAAC;IAAEU,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAClE,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACc,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGf,QAAQ,CAAyD,IAAI,CAAC;EAC1H,MAAM,CAACgB,0BAA0B,EAAEC,6BAA6B,CAAC,GAAGjB,QAAQ,CAAC;IAAEU,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAC5F,MAAM,CAACO,sBAAsB,EAAEC,yBAAyB,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC3E,MAAMoB,aAAa,GAAGnB,MAAM,CAAwB,IAAI,CAAC;;EAEzD;EACAE,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX,MAAMkB,KAAK,GAAGD,aAAa,CAACE,OAAO;MACnC,IAAID,KAAK,EAAE;QACTE,YAAY,CAACF,KAAK,CAAC;MACrB;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,iBAAiB,GAAGtB,WAAW,CAAC,CAACuB,MAAqB,EAAEf,CAAS,EAAEC,CAAS,KAAK;IACrF,IAAIS,aAAa,CAACE,OAAO,EAAE;MACzBC,YAAY,CAACH,aAAa,CAACE,OAAO,CAAC;IACrC;IAEA,IAAIG,MAAM,EAAE;MACVlB,gBAAgB,CAACkB,MAAM,CAAC;MACxBhB,gBAAgB,CAAC;QAAEC,CAAC;QAAEC;MAAE,CAAC,CAAC;MAC1BE,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,MAAM;MACLO,aAAa,CAACE,OAAO,GAAGI,UAAU,CAAC,MAAM;QACvCb,cAAc,CAAC,KAAK,CAAC;QACrBN,gBAAgB,CAAC,IAAI,CAAC;MACxB,CAAC,EAAE,GAAG,CAAC;IACT;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMoB,sBAAsB,GAAGzB,WAAW,CAAC,CAAC0B,WAAmE,EAAElB,CAAS,EAAEC,CAAS,KAAK;IACxI,IAAIiB,WAAW,EAAE;MACfb,qBAAqB,CAACa,WAAW,CAAC;MAClCX,6BAA6B,CAAC;QAAEP,CAAC;QAAEC;MAAE,CAAC,CAAC;MACvCQ,yBAAyB,CAAC,IAAI,CAAC;IACjC,CAAC,MAAM;MACLA,yBAAyB,CAAC,KAAK,CAAC;MAChCJ,qBAAqB,CAAC,IAAI,CAAC;IAC7B;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLT,aAAa;IACbE,aAAa;IACbI,WAAW;IACXE,kBAAkB;IAClBE,0BAA0B;IAC1BC,6BAA6B;IAC7BC,sBAAsB;IACtBE,aAAa;IACbI,iBAAiB;IACjBG;EACF,CAAC;AACH,CAAC;AAAAtB,EAAA,CA3DYD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}