{"ast":null,"code":"import React,{useRef,useEffect,useState,useCallback}from'react';import{createPortal}from'react-dom';import{useMobile}from'../hooks/useMobile';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const FilterDropdown=_ref=>{let{title,items,selectedItems,onSelectionChange,getItemColor,icon,textLabel}=_ref;const isActive=selectedItems.length>0;const dropdownRef=useRef(null);const contentRef=useRef(null);const[dropdownPosition,setDropdownPosition]=useState('bottom');const[horizontalPosition,setHorizontalPosition]=useState('left');const[isOpen,setIsOpen]=useState(false);const[portalContainer,setPortalContainer]=useState(null);const isMobile=useMobile();const closeTimeoutRef=useRef(null);const isMouseOverRef=useRef(false);// Create portal container for mobile popups\nuseEffect(()=>{if(isMobile&&isOpen){const container=document.createElement('div');container.style.position='fixed';container.style.top='0';container.style.left='0';container.style.width='100%';container.style.height='100%';container.style.zIndex='10003';container.style.pointerEvents='none';document.body.appendChild(container);setPortalContainer(container);return()=>{if(container.parentNode){container.parentNode.removeChild(container);}setPortalContainer(null);};}},[isMobile,isOpen]);// Функция для определения позиции dropdown\nconst updateDropdownPosition=useCallback(()=>{if(!dropdownRef.current||!contentRef.current)return;const dropdownRect=dropdownRef.current.getBoundingClientRect();const viewportHeight=window.innerHeight;const viewportWidth=window.innerWidth;// Оценка высоты контента (примерная)\nconst estimatedContentHeight=Math.min(items.length*30+80,300);// 30px на элемент + 80px для кнопок\n// Проверяем, помещается ли dropdown снизу\nconst spaceBelow=viewportHeight-dropdownRect.bottom;const spaceAbove=dropdownRect.top;if(spaceBelow<estimatedContentHeight&&spaceAbove>estimatedContentHeight){setDropdownPosition('top');}else{setDropdownPosition('bottom');}// Проверяем горизонтальное позиционирование для всех устройств\nconst dropdownWidth=isMobile?Math.min(250,viewportWidth-20):300;// Ограничиваем ширину на мобильных\nconst spaceRight=viewportWidth-dropdownRect.left;const spaceLeft=dropdownRect.right;// На мобильных устройствах приоритет отдаем центрированию\nif(isMobile){// Если dropdown шире, чем доступное пространство, центрируем его\nif(dropdownWidth>=viewportWidth-20){setHorizontalPosition('center');}else if(spaceRight<dropdownWidth&&spaceLeft>dropdownWidth){setHorizontalPosition('right');}else{setHorizontalPosition('left');}}else{// На десктопе используем старую логику\nif(spaceRight<dropdownWidth&&spaceLeft>dropdownWidth){setHorizontalPosition('right');}else{setHorizontalPosition('left');}}},[items.length,isMobile]);// Обновляем позицию dropdown при изменении размера окна\nuseEffect(()=>{const handleResize=()=>{if(isOpen){updateDropdownPosition();}};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[isOpen,updateDropdownPosition]);// Дополнительная проверка для мобильных устройств\nuseEffect(()=>{if(isMobile&&isOpen){const checkPosition=()=>{if(contentRef.current){const rect=contentRef.current.getBoundingClientRect();const viewportWidth=window.innerWidth;// Если dropdown выходит за пределы экрана, пересчитываем позицию\nif(rect.left<0||rect.right>viewportWidth){updateDropdownPosition();}// Если dropdown слишком высокий, пересчитываем вертикальную позицию\nif(rect.bottom>window.innerHeight){setDropdownPosition('top');}}};// Проверяем позицию после рендера\nsetTimeout(checkPosition,100);}},[isMobile,isOpen,updateDropdownPosition]);// Очистка таймера при размонтировании\nuseEffect(()=>{return()=>{if(closeTimeoutRef.current){clearTimeout(closeTimeoutRef.current);}};},[]);// Улучшенные обработчики для разных устройств\nconst handleMouseEnter=()=>{if(!isMobile){// Очищаем таймер закрытия\nif(closeTimeoutRef.current){clearTimeout(closeTimeoutRef.current);closeTimeoutRef.current=null;}isMouseOverRef.current=true;setIsOpen(true);// Небольшая задержка для корректного расчета позиции\nsetTimeout(updateDropdownPosition,0);}};const handleMouseLeave=()=>{if(!isMobile){isMouseOverRef.current=false;// Добавляем задержку перед закрытием, чтобы избежать преждевременного закрытия\n// при быстром движении курсора\ncloseTimeoutRef.current=setTimeout(()=>{if(!isMouseOverRef.current){setIsOpen(false);}},150);// Увеличиваем задержку до 150ms\n}};const handleClick=()=>{if(isMobile){setIsOpen(!isOpen);if(!isOpen){// На мобильных устройствах добавляем дополнительную задержку\nsetTimeout(updateDropdownPosition,50);}}};// Обработка клика вне dropdown для мобильных устройств\nuseEffect(()=>{const handleClickOutside=event=>{if(isMobile&&dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};if(isMobile&&isOpen){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[isMobile,isOpen]);// Обработчики для контента dropdown\nconst handleContentMouseEnter=()=>{if(!isMobile){isMouseOverRef.current=true;// Очищаем таймер закрытия при наведении на контент\nif(closeTimeoutRef.current){clearTimeout(closeTimeoutRef.current);closeTimeoutRef.current=null;}}};const handleContentMouseLeave=()=>{if(!isMobile){isMouseOverRef.current=false;// Добавляем задержку перед закрытием контента\ncloseTimeoutRef.current=setTimeout(()=>{if(!isMouseOverRef.current){setIsOpen(false);}},150);}};// Calculate popup position for mobile\nconst getMobilePopupPosition=()=>{if(!dropdownRef.current)return{top:'50%',left:'50%',transform:'translate(-50%, -50%)'};const rect=dropdownRef.current.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;// Center the popup on screen\nreturn{top:'50%',left:'50%',transform:'translate(-50%, -50%)'};};// Render dropdown content\nconst renderDropdownContent=()=>{const mobilePopupStyle=isMobile?getMobilePopupPosition():{};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-dropdown-content\",ref:contentRef,onMouseEnter:handleContentMouseEnter,onMouseLeave:handleContentMouseLeave,role:\"listbox\",\"aria-label\":`Список ${title}`,\"aria-multiselectable\":\"true\",style:{position:isMobile?'fixed':'absolute',top:isMobile?mobilePopupStyle.top:dropdownPosition==='bottom'?'100%':'auto',bottom:isMobile?'auto':dropdownPosition==='top'?'100%':'auto',left:isMobile?mobilePopupStyle.left:horizontalPosition==='left'?'0':horizontalPosition==='center'?'50%':'auto',right:isMobile?'auto':horizontalPosition==='right'?'0':'auto',transform:isMobile?mobilePopupStyle.transform:horizontalPosition==='center'?'translateX(-50%)':'none',zIndex:isMobile?10003:1000,maxHeight:isMobile?'60vh':'300px',overflowY:'auto',display:'block',minWidth:isMobile?'250px':'250px',maxWidth:isMobile?'90vw':'300px',width:isMobile?'auto':isMobile&&horizontalPosition==='center'?'calc(100vw - 40px)':'auto',background:'rgba(44, 24, 16, 0.98)',border:'2px solid rgba(244, 228, 193, 0.3)',borderRadius:isMobile?'12px':'6px',boxShadow:isMobile?'0 8px 32px rgba(0, 0, 0, 0.5)':'0 4px 12px rgba(0, 0, 0, 0.3)',backdropFilter:'blur(10px)',pointerEvents:isMobile?'auto':'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:isMobile?'0.8rem':'0.5rem',borderBottom:'1px solid rgba(139, 69, 19, 0.3)',display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onSelectionChange(items);},\"aria-label\":`Выбрать все ${title}`,style:{padding:isMobile?'0.5rem 0.8rem':'0.25rem 0.5rem',background:'#27ae60',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:isMobile?'0.8rem':'0.7rem',flex:isMobile?'1':'auto',minHeight:isMobile?'44px':'auto'},children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0432\\u0441\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onSelectionChange([]);},\"aria-label\":`Снять все ${title}`,style:{padding:isMobile?'0.5rem 0.8rem':'0.25rem 0.5rem',background:'#e74c3c',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:isMobile?'0.8rem':'0.7rem',flex:isMobile?'1':'auto',minHeight:isMobile?'44px':'auto'},children:\"\\u0421\\u043D\\u044F\\u0442\\u044C \\u0432\\u0441\\u0435\"})]}),items.map(item=>/*#__PURE__*/_jsxs(\"label\",{className:\"filter-checkbox\",onClick:e=>e.stopPropagation(),role:\"option\",\"aria-selected\":selectedItems.includes(item),style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:isMobile?'0.6rem 0.5rem':'0.4rem 0.5rem',cursor:'pointer',transition:'background-color 0.2s ease',borderRadius:'3px',margin:'0.1rem 0',minHeight:isMobile?'44px':'auto'// Минимальная высота для мобильных устройств\n},onMouseEnter:e=>{if(!isMobile){e.currentTarget.style.backgroundColor='rgba(139, 69, 19, 0.1)';}},onMouseLeave:e=>{if(!isMobile){e.currentTarget.style.backgroundColor='transparent';}},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.includes(item),onChange:e=>{e.stopPropagation();if(e.target.checked){onSelectionChange([...selectedItems,item]);}else{onSelectionChange(selectedItems.filter(i=>i!==item));}},\"aria-label\":`Выбрать ${item}`,style:{margin:0,cursor:'pointer'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:getItemColor?getItemColor(item):'#f4e4c1',fontWeight:getItemColor?'bold':'normal',fontSize:'0.8rem'},children:item})]},item))]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-dropdown\",ref:dropdownRef,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:[/*#__PURE__*/_jsxs(\"button\",{className:`filter-btn ${isActive?'active':''}`,style:{minWidth:'auto',padding:isMobile?'0.5rem 0.8rem':'0.3rem 0.6rem',display:'flex',alignItems:'center',gap:'0.3rem',background:isActive?'rgba(139, 69, 19, 0.15)':'rgba(139, 69, 19, 0.08)',border:`1px solid ${isActive?'rgba(139, 69, 19, 0.3)':'rgba(139, 69, 19, 0.2)'}`,borderRadius:'4px',color:'#f4e4c1',fontSize:isMobile?'0.9rem':'0.7rem',cursor:'pointer',transition:'all 0.2s ease',whiteSpace:'nowrap'},onClick:handleClick,\"aria-haspopup\":\"listbox\",\"aria-expanded\":isOpen,\"aria-label\":`${title} - ${selectedItems.length} выбрано из ${items.length}`,children:[icon&&/*#__PURE__*/_jsx(\"span\",{className:\"filter-icon\",children:icon}),/*#__PURE__*/_jsx(\"span\",{className:\"filter-text\",children:textLabel||title}),isActive&&/*#__PURE__*/_jsxs(\"span\",{className:\"filter-count\",children:[\"(\",selectedItems.length,\")\"]})]}),isOpen&&(isMobile&&portalContainer?(/*#__PURE__*/createPortal(renderDropdownContent(),portalContainer)):renderDropdownContent())]});};","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","createPortal","useMobile","jsx","_jsx","jsxs","_jsxs","FilterDropdown","_ref","title","items","selectedItems","onSelectionChange","getItemColor","icon","textLabel","isActive","length","dropdownRef","contentRef","dropdownPosition","setDropdownPosition","horizontalPosition","setHorizontalPosition","isOpen","setIsOpen","portalContainer","setPortalContainer","isMobile","closeTimeoutRef","isMouseOverRef","container","document","createElement","style","position","top","left","width","height","zIndex","pointerEvents","body","appendChild","parentNode","removeChild","updateDropdownPosition","current","dropdownRect","getBoundingClientRect","viewportHeight","window","innerHeight","viewportWidth","innerWidth","estimatedContentHeight","Math","min","spaceBelow","bottom","spaceAbove","dropdownWidth","spaceRight","spaceLeft","right","handleResize","addEventListener","removeEventListener","checkPosition","rect","setTimeout","clearTimeout","handleMouseEnter","handleMouseLeave","handleClick","handleClickOutside","event","contains","target","handleContentMouseEnter","handleContentMouseLeave","getMobilePopupPosition","transform","renderDropdownContent","mobilePopupStyle","className","ref","onMouseEnter","onMouseLeave","role","maxHeight","overflowY","display","minWidth","maxWidth","background","border","borderRadius","boxShadow","backdropFilter","children","padding","borderBottom","gap","flexWrap","onClick","e","stopPropagation","color","cursor","fontSize","flex","minHeight","map","item","includes","alignItems","transition","margin","currentTarget","backgroundColor","type","checked","onChange","filter","i","fontWeight","whiteSpace"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/FilterDropdown.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useMobile } from '../hooks/useMobile'\r\n\r\ninterface FilterDropdownProps {\r\n  title: string\r\n  items: string[]\r\n  selectedItems: string[]\r\n  onSelectionChange: (items: string[]) => void\r\n  getItemColor?: (item: string) => string\r\n  icon?: React.ReactNode\r\n  textLabel?: string\r\n}\r\n\r\nexport const FilterDropdown: React.FC<FilterDropdownProps> = ({ \r\n  title, \r\n  items, \r\n  selectedItems, \r\n  onSelectionChange, \r\n  getItemColor,\r\n  icon,\r\n  textLabel\r\n}) => {\r\n  const isActive = selectedItems.length > 0\r\n  const dropdownRef = useRef<HTMLDivElement>(null)\r\n  const contentRef = useRef<HTMLDivElement>(null)\r\n  const [dropdownPosition, setDropdownPosition] = useState<'bottom' | 'top'>('bottom')\r\n  const [horizontalPosition, setHorizontalPosition] = useState<'left' | 'right' | 'center'>('left')\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [portalContainer, setPortalContainer] = useState<HTMLElement | null>(null)\r\n  const isMobile = useMobile()\r\n  const closeTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const isMouseOverRef = useRef(false)\r\n  \r\n  // Create portal container for mobile popups\r\n  useEffect(() => {\r\n    if (isMobile && isOpen) {\r\n      const container = document.createElement('div')\r\n      container.style.position = 'fixed'\r\n      container.style.top = '0'\r\n      container.style.left = '0'\r\n      container.style.width = '100%'\r\n      container.style.height = '100%'\r\n      container.style.zIndex = '10003'\r\n      container.style.pointerEvents = 'none'\r\n      document.body.appendChild(container)\r\n      setPortalContainer(container)\r\n      \r\n      return () => {\r\n        if (container.parentNode) {\r\n          container.parentNode.removeChild(container)\r\n        }\r\n        setPortalContainer(null)\r\n      }\r\n    }\r\n  }, [isMobile, isOpen])\r\n  \r\n  // Функция для определения позиции dropdown\r\n  const updateDropdownPosition = useCallback(() => {\r\n    if (!dropdownRef.current || !contentRef.current) return\r\n    \r\n    const dropdownRect = dropdownRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    \r\n    // Оценка высоты контента (примерная)\r\n    const estimatedContentHeight = Math.min(items.length * 30 + 80, 300) // 30px на элемент + 80px для кнопок\r\n    \r\n    // Проверяем, помещается ли dropdown снизу\r\n    const spaceBelow = viewportHeight - dropdownRect.bottom\r\n    const spaceAbove = dropdownRect.top\r\n    \r\n    if (spaceBelow < estimatedContentHeight && spaceAbove > estimatedContentHeight) {\r\n      setDropdownPosition('top')\r\n    } else {\r\n      setDropdownPosition('bottom')\r\n    }\r\n    \r\n    // Проверяем горизонтальное позиционирование для всех устройств\r\n    const dropdownWidth = isMobile ? Math.min(250, viewportWidth - 20) : 300 // Ограничиваем ширину на мобильных\r\n    const spaceRight = viewportWidth - dropdownRect.left\r\n    const spaceLeft = dropdownRect.right\r\n    \r\n    // На мобильных устройствах приоритет отдаем центрированию\r\n    if (isMobile) {\r\n      // Если dropdown шире, чем доступное пространство, центрируем его\r\n      if (dropdownWidth >= viewportWidth - 20) {\r\n        setHorizontalPosition('center')\r\n      } else if (spaceRight < dropdownWidth && spaceLeft > dropdownWidth) {\r\n        setHorizontalPosition('right')\r\n      } else {\r\n        setHorizontalPosition('left')\r\n      }\r\n    } else {\r\n      // На десктопе используем старую логику\r\n      if (spaceRight < dropdownWidth && spaceLeft > dropdownWidth) {\r\n        setHorizontalPosition('right')\r\n      } else {\r\n        setHorizontalPosition('left')\r\n      }\r\n    }\r\n  }, [items.length, isMobile])\r\n\r\n  // Обновляем позицию dropdown при изменении размера окна\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      if (isOpen) {\r\n        updateDropdownPosition()\r\n      }\r\n    }\r\n    \r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [isOpen, updateDropdownPosition])\r\n  \r\n  // Дополнительная проверка для мобильных устройств\r\n  useEffect(() => {\r\n    if (isMobile && isOpen) {\r\n      const checkPosition = () => {\r\n        if (contentRef.current) {\r\n          const rect = contentRef.current.getBoundingClientRect()\r\n          const viewportWidth = window.innerWidth\r\n          \r\n          // Если dropdown выходит за пределы экрана, пересчитываем позицию\r\n          if (rect.left < 0 || rect.right > viewportWidth) {\r\n            updateDropdownPosition()\r\n          }\r\n          // Если dropdown слишком высокий, пересчитываем вертикальную позицию\r\n          if (rect.bottom > window.innerHeight) {\r\n            setDropdownPosition('top')\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Проверяем позицию после рендера\r\n      setTimeout(checkPosition, 100)\r\n    }\r\n  }, [isMobile, isOpen, updateDropdownPosition])\r\n  \r\n  // Очистка таймера при размонтировании\r\n  useEffect(() => {\r\n    return () => {\r\n      if (closeTimeoutRef.current) {\r\n        clearTimeout(closeTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n  \r\n  // Улучшенные обработчики для разных устройств\r\n  const handleMouseEnter = () => {\r\n    if (!isMobile) {\r\n      // Очищаем таймер закрытия\r\n      if (closeTimeoutRef.current) {\r\n        clearTimeout(closeTimeoutRef.current)\r\n        closeTimeoutRef.current = null\r\n      }\r\n      \r\n      isMouseOverRef.current = true\r\n      setIsOpen(true)\r\n      // Небольшая задержка для корректного расчета позиции\r\n      setTimeout(updateDropdownPosition, 0)\r\n    }\r\n  }\r\n  \r\n  const handleMouseLeave = () => {\r\n    if (!isMobile) {\r\n      isMouseOverRef.current = false\r\n      \r\n      // Добавляем задержку перед закрытием, чтобы избежать преждевременного закрытия\r\n      // при быстром движении курсора\r\n      closeTimeoutRef.current = setTimeout(() => {\r\n        if (!isMouseOverRef.current) {\r\n          setIsOpen(false)\r\n        }\r\n      }, 150) // Увеличиваем задержку до 150ms\r\n    }\r\n  }\r\n  \r\n  const handleClick = () => {\r\n    if (isMobile) {\r\n      setIsOpen(!isOpen)\r\n      if (!isOpen) {\r\n        // На мобильных устройствах добавляем дополнительную задержку\r\n        setTimeout(updateDropdownPosition, 50)\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Обработка клика вне dropdown для мобильных устройств\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (isMobile && dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n    \r\n    if (isMobile && isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n    }\r\n    \r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [isMobile, isOpen])\r\n  \r\n  // Обработчики для контента dropdown\r\n  const handleContentMouseEnter = () => {\r\n    if (!isMobile) {\r\n      isMouseOverRef.current = true\r\n      // Очищаем таймер закрытия при наведении на контент\r\n      if (closeTimeoutRef.current) {\r\n        clearTimeout(closeTimeoutRef.current)\r\n        closeTimeoutRef.current = null\r\n      }\r\n    }\r\n  }\r\n  \r\n  const handleContentMouseLeave = () => {\r\n    if (!isMobile) {\r\n      isMouseOverRef.current = false\r\n      \r\n      // Добавляем задержку перед закрытием контента\r\n      closeTimeoutRef.current = setTimeout(() => {\r\n        if (!isMouseOverRef.current) {\r\n          setIsOpen(false)\r\n        }\r\n      }, 150)\r\n    }\r\n  }\r\n\r\n  // Calculate popup position for mobile\r\n  const getMobilePopupPosition = () => {\r\n    if (!dropdownRef.current) return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }\r\n    \r\n    const rect = dropdownRef.current.getBoundingClientRect()\r\n    const viewportWidth = window.innerWidth\r\n    const viewportHeight = window.innerHeight\r\n    \r\n    // Center the popup on screen\r\n    return {\r\n      top: '50%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -50%)'\r\n    }\r\n  }\r\n\r\n  // Render dropdown content\r\n  const renderDropdownContent = () => {\r\n    const mobilePopupStyle = isMobile ? getMobilePopupPosition() : {}\r\n    \r\n    return (\r\n      <div \r\n        className=\"filter-dropdown-content\"\r\n        ref={contentRef}\r\n        onMouseEnter={handleContentMouseEnter}\r\n        onMouseLeave={handleContentMouseLeave}\r\n        role=\"listbox\"\r\n        aria-label={`Список ${title}`}\r\n        aria-multiselectable=\"true\"\r\n        style={{\r\n          position: isMobile ? 'fixed' : 'absolute',\r\n          top: isMobile ? mobilePopupStyle.top : (dropdownPosition === 'bottom' ? '100%' : 'auto'),\r\n          bottom: isMobile ? 'auto' : (dropdownPosition === 'top' ? '100%' : 'auto'),\r\n          left: isMobile ? mobilePopupStyle.left : (horizontalPosition === 'left' ? '0' : horizontalPosition === 'center' ? '50%' : 'auto'),\r\n          right: isMobile ? 'auto' : (horizontalPosition === 'right' ? '0' : 'auto'),\r\n          transform: isMobile ? mobilePopupStyle.transform : (horizontalPosition === 'center' ? 'translateX(-50%)' : 'none'),\r\n          zIndex: isMobile ? 10003 : 1000,\r\n          maxHeight: isMobile ? '60vh' : '300px',\r\n          overflowY: 'auto',\r\n          display: 'block',\r\n          minWidth: isMobile ? '250px' : '250px',\r\n          maxWidth: isMobile ? '90vw' : '300px',\r\n          width: isMobile ? 'auto' : (isMobile && horizontalPosition === 'center' ? 'calc(100vw - 40px)' : 'auto'),\r\n          background: 'rgba(44, 24, 16, 0.98)',\r\n          border: '2px solid rgba(244, 228, 193, 0.3)',\r\n          borderRadius: isMobile ? '12px' : '6px',\r\n          boxShadow: isMobile ? '0 8px 32px rgba(0, 0, 0, 0.5)' : '0 4px 12px rgba(0, 0, 0, 0.3)',\r\n          backdropFilter: 'blur(10px)',\r\n          pointerEvents: isMobile ? 'auto' : 'auto'\r\n        }}\r\n      >\r\n        <div style={{ \r\n          padding: isMobile ? '0.8rem' : '0.5rem', \r\n          borderBottom: '1px solid rgba(139, 69, 19, 0.3)',\r\n          display: 'flex',\r\n          gap: '0.5rem',\r\n          flexWrap: 'wrap'\r\n        }}>\r\n          <button\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              onSelectionChange(items)\r\n            }}\r\n            aria-label={`Выбрать все ${title}`}\r\n            style={{\r\n              padding: isMobile ? '0.5rem 0.8rem' : '0.25rem 0.5rem',\r\n              background: '#27ae60',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: isMobile ? '0.8rem' : '0.7rem',\r\n              flex: isMobile ? '1' : 'auto',\r\n              minHeight: isMobile ? '44px' : 'auto'\r\n            }}\r\n          >\r\n            Выбрать все\r\n          </button>\r\n          <button\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              onSelectionChange([])\r\n            }}\r\n            aria-label={`Снять все ${title}`}\r\n            style={{\r\n              padding: isMobile ? '0.5rem 0.8rem' : '0.25rem 0.5rem',\r\n              background: '#e74c3c',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: isMobile ? '0.8rem' : '0.7rem',\r\n              flex: isMobile ? '1' : 'auto',\r\n              minHeight: isMobile ? '44px' : 'auto'\r\n            }}\r\n          >\r\n            Снять все\r\n          </button>\r\n        </div>\r\n        {items.map(item => (\r\n          <label \r\n            key={item} \r\n            className=\"filter-checkbox\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            role=\"option\"\r\n            aria-selected={selectedItems.includes(item)}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: isMobile ? '0.6rem 0.5rem' : '0.4rem 0.5rem',\r\n              cursor: 'pointer',\r\n              transition: 'background-color 0.2s ease',\r\n              borderRadius: '3px',\r\n              margin: '0.1rem 0',\r\n              minHeight: isMobile ? '44px' : 'auto' // Минимальная высота для мобильных устройств\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              if (!isMobile) {\r\n                e.currentTarget.style.backgroundColor = 'rgba(139, 69, 19, 0.1)'\r\n              }\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              if (!isMobile) {\r\n                e.currentTarget.style.backgroundColor = 'transparent'\r\n              }\r\n            }}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectedItems.includes(item)}\r\n              onChange={(e) => {\r\n                e.stopPropagation()\r\n                if (e.target.checked) {\r\n                  onSelectionChange([...selectedItems, item])\r\n                } else {\r\n                  onSelectionChange(selectedItems.filter(i => i !== item))\r\n                }\r\n              }}\r\n              aria-label={`Выбрать ${item}`}\r\n              style={{\r\n                margin: 0,\r\n                cursor: 'pointer'\r\n              }}\r\n            />\r\n            <span style={{ \r\n              color: getItemColor ? getItemColor(item) : '#f4e4c1',\r\n              fontWeight: getItemColor ? 'bold' : 'normal',\r\n              fontSize: '0.8rem'\r\n            }}>\r\n              {item}\r\n            </span>\r\n          </label>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <div \r\n      className=\"filter-dropdown\" \r\n      ref={dropdownRef}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <button \r\n        className={`filter-btn ${isActive ? 'active' : ''}`}\r\n        style={{ \r\n          minWidth: 'auto',\r\n          padding: isMobile ? '0.5rem 0.8rem' : '0.3rem 0.6rem',\r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          gap: '0.3rem',\r\n          background: isActive ? 'rgba(139, 69, 19, 0.15)' : 'rgba(139, 69, 19, 0.08)',\r\n          border: `1px solid ${isActive ? 'rgba(139, 69, 19, 0.3)' : 'rgba(139, 69, 19, 0.2)'}`,\r\n          borderRadius: '4px',\r\n          color: '#f4e4c1',\r\n          fontSize: isMobile ? '0.9rem' : '0.7rem',\r\n          cursor: 'pointer',\r\n          transition: 'all 0.2s ease',\r\n          whiteSpace: 'nowrap'\r\n        }}\r\n        onClick={handleClick}\r\n        aria-haspopup=\"listbox\"\r\n        aria-expanded={isOpen}\r\n        aria-label={`${title} - ${selectedItems.length} выбрано из ${items.length}`}\r\n      >\r\n        {icon && <span className=\"filter-icon\">{icon}</span>}\r\n        <span className=\"filter-text\">{textLabel || title}</span>\r\n        {isActive && <span className=\"filter-count\">({selectedItems.length})</span>}\r\n      </button>\r\n      {isOpen && (\r\n        isMobile && portalContainer ? (\r\n          createPortal(renderDropdownContent(), portalContainer)\r\n        ) : (\r\n          renderDropdownContent()\r\n        )\r\n      )}\r\n    </div>\r\n  )\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}