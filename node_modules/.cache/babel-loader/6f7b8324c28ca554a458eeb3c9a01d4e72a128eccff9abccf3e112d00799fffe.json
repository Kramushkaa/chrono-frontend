{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getBackendInfo,testBackendConnection}from'../services/api';import'./BackendInfo.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const BackendInfo=_ref=>{let{className=''}=_ref;const backendInfo=getBackendInfo();const env=typeof process!=='undefined'&&process.env||{};const isDev=env.NODE_ENV==='development';const useLocal=env.REACT_APP_USE_LOCAL_BACKEND==='true';const showOverride=env.REACT_APP_SHOW_BACKEND_INFO==='true';const isLocalHost=typeof window!=='undefined'&&/^(localhost|127\\.0\\.0\\.1)$/i.test(window.location.hostname);// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤ –¥–µ–≤–µ/–ª–æ–∫–∞–ª–µ/override\nconst shouldHide=!showOverride&&!(isDev||useLocal||backendInfo.isLocal||isLocalHost);const[isConnected,setIsConnected]=useState(null);const[isTesting,setIsTesting]=useState(false);const[showDetails,setShowDetails]=useState(false);// –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\nuseEffect(()=>{if(!shouldHide){testConnection();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[backendInfo.baseUrl,shouldHide]);const testConnection=async()=>{setIsTesting(true);try{const connected=await testBackendConnection();setIsConnected(connected);}catch(error){console.error('Connection test failed:',error);setIsConnected(false);}finally{setIsTesting(false);}};if(shouldHide)return null;const getStatusIcon=()=>{if(isTesting)return'üîÑ';if(isConnected===null)return'‚ùì';return isConnected?'‚úÖ':'‚ùå';};const getStatusText=()=>{if(isTesting)return'–ü—Ä–æ–≤–µ—Ä–∫–∞...';if(isConnected===null)return'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';return isConnected?'–ü–æ–¥–∫–ª—é—á–µ–Ω':'–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω';};const getBackendType=()=>{return backendInfo.isLocal?'–õ–æ–∫–∞–ª—å–Ω—ã–π':'–£–¥–∞–ª–µ–Ω–Ω—ã–π';};const getBackendColor=()=>{return backendInfo.isLocal?'#4CAF50':'#2196F3';};return/*#__PURE__*/_jsxs(\"div\",{className:`backend-info ${className}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backend-header\",onClick:()=>setShowDetails(!showDetails),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backend-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:getStatusIcon()}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:getStatusText()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"backend-type\",style:{color:getBackendColor()},children:[getBackendType(),\" Backend\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"test-button\",onClick:e=>{e.stopPropagation();testConnection();},disabled:isTesting,children:isTesting?'üîÑ':'üîÑ'})]}),showDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"backend-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"URL:\"}),\" \",backendInfo.baseUrl]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0438\\u043F:\"}),\" \",getBackendType()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),\" \",getStatusText()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0430\\u0439\\u043C\\u0430\\u0443\\u0442:\"}),\" \",backendInfo.config.timeout,\"ms\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u044B:\"}),\" \",backendInfo.config.retries]}),/*#__PURE__*/_jsxs(\"div\",{className:\"backend-tips\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCA1 \\u041A\\u0430\\u043A \\u043F\\u0435\\u0440\\u0435\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C\\u0441\\u044F:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0444\\u0430\\u0439\\u043B \",/*#__PURE__*/_jsx(\"code\",{children:\".env.local\"}),\" \\u0432 \\u043A\\u043E\\u0440\\u043D\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435: \",/*#__PURE__*/_jsx(\"code\",{children:\"REACT_APP_USE_LOCAL_BACKEND=true\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u041F\\u0435\\u0440\\u0435\\u0437\\u0430\\u043F\\u0443\\u0441\\u0442\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044C, \\u0447\\u0442\\u043E \\u043B\\u043E\\u043A\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 backend \\u0437\\u0430\\u043F\\u0443\\u0449\\u0435\\u043D \\u043D\\u0430 \\u043F\\u043E\\u0440\\u0442\\u0443 3001\"})]})]})]})]});};","map":{"version":3,"names":["React","useState","useEffect","getBackendInfo","testBackendConnection","jsx","_jsx","jsxs","_jsxs","BackendInfo","_ref","className","backendInfo","env","process","isDev","NODE_ENV","useLocal","REACT_APP_USE_LOCAL_BACKEND","showOverride","REACT_APP_SHOW_BACKEND_INFO","isLocalHost","window","test","location","hostname","shouldHide","isLocal","isConnected","setIsConnected","isTesting","setIsTesting","showDetails","setShowDetails","testConnection","baseUrl","connected","error","console","getStatusIcon","getStatusText","getBackendType","getBackendColor","children","onClick","style","color","e","stopPropagation","disabled","config","timeout","retries"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/BackendInfo.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getBackendInfo, testBackendConnection } from '../services/api';\nimport './BackendInfo.css';\n\ninterface BackendInfoProps {\n  className?: string;\n}\n\nexport const BackendInfo: React.FC<BackendInfoProps> = ({ className = '' }) => {\n  const backendInfo = getBackendInfo();\n  const env = (typeof process !== 'undefined' && (process as any).env) || {};\n  const isDev = env.NODE_ENV === 'development';\n  const useLocal = env.REACT_APP_USE_LOCAL_BACKEND === 'true';\n  const showOverride = env.REACT_APP_SHOW_BACKEND_INFO === 'true';\n  const isLocalHost = typeof window !== 'undefined' && /^(localhost|127\\.0\\.0\\.1)$/i.test(window.location.hostname);\n  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤ –¥–µ–≤–µ/–ª–æ–∫–∞–ª–µ/override\n  const shouldHide = !showOverride && !(isDev || useLocal || backendInfo.isLocal || isLocalHost);\n  const [isConnected, setIsConnected] = useState<boolean | null>(null);\n  const [isTesting, setIsTesting] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n\n  // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n  useEffect(() => {\n    if (!shouldHide) {\n      testConnection();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [backendInfo.baseUrl, shouldHide]);\n\n  const testConnection = async () => {\n    setIsTesting(true);\n    try {\n      const connected = await testBackendConnection();\n      setIsConnected(connected);\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      setIsConnected(false);\n    } finally {\n      setIsTesting(false);\n    }\n  };\n\n  if (shouldHide) return null;\n\n  const getStatusIcon = () => {\n    if (isTesting) return 'üîÑ';\n    if (isConnected === null) return '‚ùì';\n    return isConnected ? '‚úÖ' : '‚ùå';\n  };\n\n  const getStatusText = () => {\n    if (isTesting) return '–ü—Ä–æ–≤–µ—Ä–∫–∞...';\n    if (isConnected === null) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\n    return isConnected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω' : '–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω';\n  };\n\n  const getBackendType = () => {\n    return backendInfo.isLocal ? '–õ–æ–∫–∞–ª—å–Ω—ã–π' : '–£–¥–∞–ª–µ–Ω–Ω—ã–π';\n  };\n\n  const getBackendColor = () => {\n    return backendInfo.isLocal ? '#4CAF50' : '#2196F3';\n  };\n\n  return (\n    <div className={`backend-info ${className}`}>\n      <div className=\"backend-header\" onClick={() => setShowDetails(!showDetails)}>\n        <div className=\"backend-status\">\n          <span className=\"status-icon\">{getStatusIcon()}</span>\n          <span className=\"status-text\">{getStatusText()}</span>\n        </div>\n        <div className=\"backend-type\" style={{ color: getBackendColor() }}>\n          {getBackendType()} Backend\n        </div>\n        <button \n          className=\"test-button\"\n          onClick={(e) => {\n            e.stopPropagation();\n            testConnection();\n          }}\n          disabled={isTesting}\n        >\n          {isTesting ? 'üîÑ' : 'üîÑ'}\n        </button>\n      </div>\n\n      {showDetails && (\n        <div className=\"backend-details\">\n          <div className=\"detail-item\">\n            <strong>URL:</strong> {backendInfo.baseUrl}\n          </div>\n          <div className=\"detail-item\">\n            <strong>–¢–∏–ø:</strong> {getBackendType()}\n          </div>\n          <div className=\"detail-item\">\n            <strong>–°—Ç–∞—Ç—É—Å:</strong> {getStatusText()}\n          </div>\n          <div className=\"detail-item\">\n            <strong>–¢–∞–π–º–∞—É—Ç:</strong> {backendInfo.config.timeout}ms\n          </div>\n          <div className=\"detail-item\">\n            <strong>–ü–æ–≤—Ç–æ—Ä—ã:</strong> {backendInfo.config.retries}\n          </div>\n          \n          <div className=\"backend-tips\">\n            <h4>üí° –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è:</h4>\n            <ul>\n              <li>–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª <code>.env.local</code> –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞</li>\n              <li>–î–æ–±–∞–≤—å—Ç–µ: <code>REACT_APP_USE_LOCAL_BACKEND=true</code></li>\n              <li>–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>\n              <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001</li>\n            </ul>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}