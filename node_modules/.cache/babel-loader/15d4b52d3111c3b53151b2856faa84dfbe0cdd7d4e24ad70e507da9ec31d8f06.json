{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Selecty\\\\Documents\\\\PetProjects\\\\chronoline-frontend\\\\src\\\\components\\\\Timeline.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useMobile } from '../hooks/useMobile';\nimport { getPosition, getWidth, getCenturyColor, getCenturyNumber, toRomanNumeral } from '../utils/timelineUtils';\n\n// Типы для элементов временной линии\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Timeline = ({\n  isLoading,\n  timelineWidth,\n  totalHeight,\n  centuryBoundaries,\n  minYear,\n  pixelsPerYear,\n  LEFT_PADDING_PX,\n  rowPlacement,\n  filters,\n  groupingType,\n  categoryDividers,\n  getGroupColor,\n  getGroupColorDark,\n  getGroupColorMuted,\n  getPersonGroup,\n  hoveredPerson,\n  setHoveredPerson,\n  mousePosition,\n  setMousePosition,\n  showTooltip,\n  setShowTooltip,\n  handlePersonHover,\n  activeAchievementMarker,\n  setActiveAchievementMarker,\n  hoveredAchievement,\n  setHoveredAchievement,\n  achievementTooltipPosition,\n  setAchievementTooltipPosition,\n  showAchievementTooltip,\n  setShowAchievementTooltip,\n  hoverTimerRef,\n  sortedData,\n  selectedPerson,\n  setSelectedPerson,\n  timelineRef,\n  isDragging,\n  isDraggingTimeline,\n  handleMouseDown,\n  handleMouseMove,\n  handleMouseUp,\n  handleTouchStart,\n  handleTouchMove,\n  handleTouchEnd\n}) => {\n  _s();\n  const isMobile = useMobile();\n\n  // Функция для определения пустых веков на основе отфильтрованных данных\n  const getEmptyCenturies = () => {\n    if (!sortedData || sortedData.length === 0) return new Set();\n\n    // Используем отфильтрованные данные для определения диапазона\n    const minYear = Math.min(...sortedData.map(p => p.birthYear));\n    const maxYear = Math.max(...sortedData.map(p => p.deathYear));\n    const startCentury = Math.floor(minYear / 100) * 100;\n    const endCentury = Math.ceil(maxYear / 100) * 100;\n    const emptyCenturies = new Set();\n    for (let centuryStart = startCentury; centuryStart <= endCentury; centuryStart += 100) {\n      const centuryEnd = centuryStart + 99;\n      const hasDataInCentury = sortedData.some(person => person.birthYear <= centuryEnd && person.deathYear >= centuryStart);\n      if (!hasDataInCentury) {\n        emptyCenturies.add(centuryStart);\n      }\n    }\n    return emptyCenturies;\n  };\n\n  // Создаем массив для отображения веков с промежутками\n  const getTimelineElements = () => {\n    if (!filters.hideEmptyCenturies) {\n      return centuryBoundaries.map(year => ({\n        type: 'century',\n        year\n      }));\n    }\n    const emptyCenturies = getEmptyCenturies();\n    const visibleCenturies = centuryBoundaries.filter(year => !emptyCenturies.has(year));\n    const elements = [];\n    for (let i = 0; i < visibleCenturies.length; i++) {\n      const currentYear = visibleCenturies[i];\n\n      // Добавляем промежуток перед веком (кроме первого)\n      if (i > 0) {\n        const prevYear = visibleCenturies[i - 1];\n        const gapStart = prevYear + 100;\n        const gapEnd = currentYear;\n\n        // Находим все скрытые века в промежутке\n        const hiddenCenturies = [];\n        for (let year = gapStart; year < gapEnd; year += 100) {\n          if (emptyCenturies.has(year)) {\n            hiddenCenturies.push(year);\n          }\n        }\n        if (hiddenCenturies.length > 0) {\n          elements.push({\n            type: 'gap',\n            startYear: gapStart,\n            endYear: gapEnd,\n            hiddenCenturies\n          });\n        }\n      }\n\n      // Добавляем сам век\n      elements.push({\n        type: 'century',\n        year: currentYear\n      });\n    }\n    return elements;\n  };\n  const timelineElements = getTimelineElements();\n\n  // Функция для вычисления позиции с учетом промежутков\n  const getAdjustedPosition = year => {\n    if (!filters.hideEmptyCenturies) {\n      return getPosition(year, minYear, pixelsPerYear, LEFT_PADDING_PX);\n    }\n\n    // Находим позицию года в оригинальной шкале\n    const originalPosition = getPosition(year, minYear, pixelsPerYear, LEFT_PADDING_PX);\n\n    // Вычисляем смещение, проходя по всем промежуткам до этого года\n    let totalOffset = 0;\n    for (const element of timelineElements) {\n      if (element.type === 'gap') {\n        const gapStart = getPosition(element.startYear, minYear, pixelsPerYear, LEFT_PADDING_PX);\n        const gapEnd = getPosition(element.endYear, minYear, pixelsPerYear, LEFT_PADDING_PX);\n        const originalGapWidth = gapEnd - gapStart;\n        const newGapWidth = pixelsPerYear * 10; // 10 лет\n\n        // Если год находится после этого промежутка, добавляем смещение\n        if (year >= element.endYear) {\n          totalOffset += originalGapWidth - newGapWidth;\n        }\n      }\n    }\n    return originalPosition - totalOffset;\n  };\n\n  // Функция для вычисления ширины с учетом промежутков\n  const getAdjustedWidth = (startYear, endYear) => {\n    if (!filters.hideEmptyCenturies) {\n      return getWidth(startYear, endYear, pixelsPerYear);\n    }\n    const startPos = getAdjustedPosition(startYear);\n    const endPos = getAdjustedPosition(endYear);\n    return endPos - startPos;\n  };\n\n  // Функция для вычисления скорректированной ширины таймлайна\n  const getAdjustedTimelineWidth = () => {\n    if (!filters.hideEmptyCenturies) {\n      return timelineWidth;\n    }\n\n    // Вычисляем общую ширину, проходя по всем элементам\n    let totalWidth = 0;\n    for (const element of timelineElements) {\n      if (element.type === 'century') {\n        // Век занимает 100 лет\n        totalWidth += pixelsPerYear * 100;\n      } else if (element.type === 'gap') {\n        // Промежуток занимает 10 лет\n        totalWidth += pixelsPerYear * 10;\n      }\n    }\n    return totalWidth + LEFT_PADDING_PX + 50; // Добавляем отступы\n  };\n\n  // Функция для создания повторяющихся меток веков через каждые 90vh\n  const createRepeatingCenturyLabels = () => {\n    const viewportHeight = window.innerHeight;\n    const labels = [];\n\n    // Создаем метки для каждого века\n    timelineElements.forEach(element => {\n      if (element.type === 'century') {\n        const year = element.year;\n        const centerYear = year + 50;\n        const centuryNumber = getCenturyNumber(centerYear);\n        const isNegativeCentury = year < 0;\n        const romanNumeral = isNegativeCentury ? `${toRomanNumeral(Math.abs(centuryNumber))} в. до н.э` : `${toRomanNumeral(centuryNumber)} в.`;\n        const startPos = getAdjustedPosition(year);\n        const nextYear = year + 100;\n        const endPos = getAdjustedPosition(nextYear);\n        const centerPos = startPos + (endPos - startPos) / 2; // Центр века\n\n        // Создаем метки через каждые 90vh\n        for (let top = 0; top < totalHeight; top += viewportHeight * 0.9) {\n          labels.push({\n            id: `century-label-${year}-${top}`,\n            year,\n            romanNumeral,\n            left: centerPos,\n            top: top + viewportHeight / 2,\n            // Центрируем по вертикали в каждом экране\n            type: 'century'\n          });\n        }\n      } else if (element.type === 'gap') {\n        var _element$hiddenCentur;\n        const startPos = getAdjustedPosition(element.startYear);\n        const gapWidth = pixelsPerYear * 10; // 10 лет = 1/10 века\n        const centerPos = startPos + gapWidth / 2; // Центр промежутка\n        const hiddenCenturiesText = ((_element$hiddenCentur = element.hiddenCenturies) === null || _element$hiddenCentur === void 0 ? void 0 : _element$hiddenCentur.map(year => {\n          const centuryNumber = getCenturyNumber(year + 50);\n          const isNegativeCentury = year < 0;\n          const romanNumeral = isNegativeCentury ? `${toRomanNumeral(Math.abs(centuryNumber))} в. до н.э` : `${toRomanNumeral(centuryNumber)} в.`;\n          return romanNumeral;\n        }).join(', ')) || '';\n\n        // Создаем метки для промежутков через каждые 90vh\n        for (let top = 0; top < totalHeight; top += viewportHeight * 0.9) {\n          labels.push({\n            id: `gap-label-${element.startYear}-${top}`,\n            year: element.startYear,\n            romanNumeral: hiddenCenturiesText,\n            left: centerPos,\n            top: top + viewportHeight / 2,\n            type: 'gap'\n          });\n        }\n      }\n    });\n    return labels;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-content\",\n      id: \"timeline-content\",\n      role: \"presentation\",\n      \"aria-hidden\": \"true\",\n      style: {\n        position: 'relative',\n        height: '100%',\n        overflow: 'visible',\n        padding: isMobile ? '0' : '1rem 0 2rem 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-background\",\n        id: \"timeline-background\",\n        role: \"presentation\",\n        \"aria-hidden\": \"true\",\n        style: {\n          position: 'absolute',\n          top: '0',\n          left: '0',\n          width: `${getAdjustedTimelineWidth()}px`,\n          height: `${totalHeight + 200}px`,\n          pointerEvents: 'none',\n          zIndex: 1\n        },\n        children: timelineElements.map((element, index) => {\n          if (element.type === 'century') {\n            const year = element.year;\n            // Каждый век занимает ровно 100 лет\n            const nextYear = year + 100;\n            const startPos = getAdjustedPosition(year);\n            const endPos = getAdjustedPosition(nextYear);\n            const width = endPos - startPos;\n\n            // Вычисляем век на основе центра года в столетии\n            const centerYear = year + 50;\n            const centuryNumber = getCenturyNumber(centerYear);\n            // Для отрицательных веков добавляем знак минус\n            const isNegativeCentury = year < 0;\n            const romanNumeral = isNegativeCentury ? `-${toRomanNumeral(Math.abs(centuryNumber))}` : toRomanNumeral(centuryNumber);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"century-background\",\n              id: `century-${year}`,\n              role: \"presentation\",\n              \"aria-label\": `Век ${romanNumeral}`,\n              style: {\n                position: 'absolute',\n                left: `${startPos}px`,\n                width: `${width}px`,\n                height: '100%',\n                background: getCenturyColor(year, minYear),\n                opacity: 0.3,\n                zIndex: 1\n              }\n            }, `century-bg-${year}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this);\n          } else if (element.type === 'gap') {\n            // Промежуток между веками - компактный размер (1/10 века)\n            const gapWidth = pixelsPerYear * 10; // 10 лет = 1/10 века\n            const startPos = getAdjustedPosition(element.startYear);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                left: `${startPos}px`,\n                width: `${gapWidth}px`,\n                height: '100%',\n                background: 'rgba(139, 69, 19, 0.1)',\n                border: '1px dashed rgba(139, 69, 19, 0.3)',\n                zIndex: 1\n              }\n            }, `gap-${element.startYear}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 18\n            }, this);\n          }\n          return null;\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '0',\n          left: '0',\n          width: `${getAdjustedTimelineWidth()}px`,\n          height: `${totalHeight + 200}px`,\n          pointerEvents: 'none',\n          zIndex: 5\n        },\n        children: timelineElements.map(element => {\n          if (element.type === 'century') {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                left: `${getAdjustedPosition(element.year)}px`,\n                width: '2px',\n                height: '100%',\n                background: 'linear-gradient(to bottom, #cd853f 0%, #cd853f 20%, rgba(205, 133, 63, 0.3) 100%)',\n                zIndex: 5\n              }\n            }, `century-line-${element.year}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 19\n            }, this);\n          } else if (element.type === 'gap') {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                left: `${getAdjustedPosition(element.startYear)}px`,\n                width: '2px',\n                height: '100%',\n                background: 'linear-gradient(to bottom, #cd853f 0%, #cd853f 20%, rgba(205, 133, 63, 0.3) 100%)',\n                zIndex: 5\n              }\n            }, `gap-line-${element.startYear}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 19\n            }, this);\n          }\n          return null;\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: '0',\n          left: '0',\n          width: `${getAdjustedTimelineWidth()}px`,\n          height: `${totalHeight + 200}px`,\n          pointerEvents: 'none',\n          zIndex: 6\n        },\n        children: createRepeatingCenturyLabels().map(label => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            left: `${label.left}px`,\n            top: `${label.top}px`,\n            transform: 'translate(-50%, -50%)',\n            fontSize: label.type === 'century' ? '1.5rem' : '0.8rem',\n            fontWeight: 'bold',\n            color: label.type === 'century' ? 'rgba(244, 228, 193, 0.4)' : 'rgba(139, 69, 19, 0.5)',\n            textShadow: '1px 1px 2px rgba(0, 0, 0, 0.6)',\n            pointerEvents: 'none',\n            fontFamily: label.type === 'century' ? 'serif' : 'sans-serif',\n            textAlign: 'center',\n            maxWidth: '200px',\n            wordWrap: 'break-word'\n          },\n          children: label.type === 'century' ? label.romanNumeral : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\u0421\\u043A\\u0440\\u044B\\u0442\\u043E:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.7rem',\n                marginTop: '2px'\n              },\n              children: label.romanNumeral\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 20\n            }, this)]\n          }, void 0, true)\n        }, label.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 14\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-dividers\",\n        id: \"category-dividers\",\n        role: \"presentation\",\n        \"aria-hidden\": \"true\",\n        style: {\n          position: 'absolute',\n          top: '0',\n          left: '0',\n          width: `${getAdjustedTimelineWidth()}px`,\n          height: `${totalHeight + 200}px`,\n          pointerEvents: 'none',\n          zIndex: 8\n        },\n        children: categoryDividers.map(divider => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-divider\",\n          id: `divider-${divider.category}`,\n          role: \"separator\",\n          \"aria-label\": `Разделитель группы: ${divider.category}`,\n          style: {\n            position: 'absolute',\n            top: `${divider.top}px`,\n            left: '0',\n            width: '100%',\n            height: '10px',\n            background: `linear-gradient(to right, transparent 0%, ${getGroupColor(divider.category)} 20%, ${getGroupColor(divider.category)} 80%, transparent 100%)`,\n            opacity: 0.6,\n            zIndex: 8\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"category-label\",\n            id: `category-label-${divider.category}`,\n            \"aria-label\": `Группа: ${divider.category}`,\n            style: {\n              position: 'absolute',\n              left: '20px',\n              top: '50%',\n              transform: 'translateY(-50%)',\n              background: getGroupColor(divider.category),\n              color: 'white',\n              padding: '2px 8px',\n              borderRadius: '4px',\n              fontSize: '0.7rem',\n              fontWeight: 'bold',\n              whiteSpace: 'nowrap',\n              zIndex: 9\n            },\n            children: divider.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 15\n          }, this)\n        }, `category-divider-${divider.category}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: timelineRef,\n        className: \"person-timeline\",\n        id: \"person-timeline\",\n        role: \"list\",\n        \"aria-label\": \"\\u0412\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u044B\\u0435 \\u043B\\u0438\\u043D\\u0438\\u0438 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0445 \\u043B\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u0435\\u0439\",\n        style: {\n          position: 'relative',\n          width: `${getAdjustedTimelineWidth()}px`,\n          height: `${totalHeight + 60}px`,\n          zIndex: 10\n        },\n        onMouseDown: handleMouseDown,\n        onMouseMove: handleMouseMove,\n        onMouseUp: handleMouseUp,\n        onMouseLeave: handleMouseUp,\n        onTouchStart: handleTouchStart,\n        onTouchMove: handleTouchMove,\n        onTouchEnd: handleTouchEnd,\n        children: rowPlacement.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline-row\",\n          id: `timeline-row-${rowIndex}`,\n          role: \"listitem\",\n          \"aria-label\": `Строка ${rowIndex + 1} временной линии`,\n          style: {\n            position: 'relative',\n            height: row.length === 0 ? '20px' : '60px',\n            marginBottom: row.length === 0 ? '0px' : '10px'\n          },\n          children: row.map(person => /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"birth-year-label\",\n              id: `birth-year-${person.id}`,\n              \"aria-label\": `Год рождения: ${person.birthYear}`,\n              style: {\n                position: 'absolute',\n                left: `${getAdjustedPosition(person.birthYear)}px`,\n                top: 0,\n                fontSize: '11px',\n                color: 'rgba(244, 228, 193, 0.6)',\n                fontStyle: 'italic',\n                fontWeight: 400,\n                transform: 'translateX(-100%) translateY(-10px)'\n              },\n              children: person.birthYear\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 19\n            }, this), person.reignStart && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"reign-label\",\n              id: `reign-start-${person.id}`,\n              \"aria-label\": `Начало правления: ${person.reignStart}`,\n              style: {\n                position: 'absolute',\n                left: `${getAdjustedPosition(person.reignStart)}px`,\n                top: 0,\n                fontSize: '11px',\n                color: '#E57373',\n                // Темно-красный\n                fontStyle: 'italic',\n                fontWeight: 'bold',\n                transform: 'translateX(-100%) translateY(-22px)'\n              },\n              children: [\"\\uD83D\\uDC51 \", person.reignStart]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 22\n            }, this), person.reignEnd && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"reign-label\",\n              id: `reign-end-${person.id}`,\n              \"aria-label\": `Конец правления: ${person.reignEnd}`,\n              style: {\n                position: 'absolute',\n                left: `${getAdjustedPosition(person.reignEnd)}px`,\n                top: 0,\n                fontSize: '11px',\n                color: '#E57373',\n                // Темно-красный\n                fontStyle: 'italic',\n                fontWeight: 'bold',\n                transform: 'translateY(-22px)'\n              },\n              children: person.reignEnd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 22\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"death-year-label\",\n              id: `death-year-${person.id}`,\n              \"aria-label\": `Год смерти: ${person.deathYear}`,\n              style: {\n                position: 'absolute',\n                left: `${getAdjustedPosition(person.deathYear)}px`,\n                top: 0,\n                fontSize: '11px',\n                color: 'rgba(244, 228, 193, 0.6)',\n                fontStyle: 'italic',\n                fontWeight: 400,\n                transform: 'translateY(-10px)'\n              },\n              children: person.deathYear\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 38\n            }, this), filters.showAchievements && [person.achievementYear1, person.achievementYear2, person.achievementYear3].filter(year => year !== undefined && year !== null).map((year, index) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"achievement-marker\",\n                id: `achievement-${person.id}-${index}`,\n                role: \"button\",\n                \"aria-label\": `Достижение ${index + 1} в ${year} году`,\n                tabIndex: 0,\n                style: {\n                  position: 'absolute',\n                  left: `${getAdjustedPosition(year)}px`,\n                  top: '-4px',\n                  width: '2px',\n                  // Возвращаем стандартную ширину\n                  height: '15px',\n                  // Возвращаем стандартную высоту\n                  backgroundColor: getGroupColorDark(getPersonGroup(person)),\n                  zIndex: (activeAchievementMarker === null || activeAchievementMarker === void 0 ? void 0 : activeAchievementMarker.personId) === person.id && (activeAchievementMarker === null || activeAchievementMarker === void 0 ? void 0 : activeAchievementMarker.index) === index ? 10 : 3,\n                  transform: 'translateX(-50%)',\n                  cursor: 'pointer',\n                  transition: 'all 0.2s ease'\n                  // Убираем псевдоэлементы, так как они не работают в inline стилях\n                },\n                onMouseEnter: e => {\n                  if (!isMobile) {\n                    e.currentTarget.style.backgroundColor = getGroupColor(getPersonGroup(person));\n                    e.currentTarget.style.boxShadow = `0 0 3px ${getGroupColor(getPersonGroup(person))}`;\n\n                    // Устанавливаем активный маркер\n                    setActiveAchievementMarker({\n                      personId: person.id,\n                      index\n                    });\n\n                    // Скрываем tooltip человека при наведении на маркер достижения\n                    if ((hoveredPerson === null || hoveredPerson === void 0 ? void 0 : hoveredPerson.id) === person.id) {\n                      handlePersonHover(null, 0, 0);\n                    }\n\n                    // Очищаем предыдущий таймер если он есть\n                    if (hoverTimerRef.current) {\n                      clearTimeout(hoverTimerRef.current);\n                    }\n\n                    // Запускаем таймер для показа tooltip\n                    hoverTimerRef.current = setTimeout(() => {\n                      setAchievementTooltipPosition({\n                        x: e.clientX,\n                        y: e.clientY\n                      });\n                      setHoveredAchievement({\n                        person,\n                        year: year,\n                        index\n                      });\n                      setShowAchievementTooltip(true);\n                    }, 500);\n                  }\n                },\n                onMouseLeave: e => {\n                  if (!isMobile) {\n                    e.currentTarget.style.backgroundColor = getGroupColorDark(getPersonGroup(person));\n                    e.currentTarget.style.boxShadow = 'none';\n\n                    // Сбрасываем активный маркер\n                    setActiveAchievementMarker(null);\n\n                    // Очищаем таймер и скрываем tooltip достижения\n                    if (hoverTimerRef.current) {\n                      clearTimeout(hoverTimerRef.current);\n                      hoverTimerRef.current = null;\n                    }\n                    setShowAchievementTooltip(false);\n                    setHoveredAchievement(null);\n\n                    // Также скрываем tooltip человека, если он был показан\n                    if ((hoveredPerson === null || hoveredPerson === void 0 ? void 0 : hoveredPerson.id) === person.id) {\n                      handlePersonHover(null, 0, 0);\n                    }\n                  }\n                },\n                onMouseMove: e => {\n                  if (!isMobile && hoveredAchievement && hoveredAchievement.person.id === person.id && hoveredAchievement.index === index) {\n                    setAchievementTooltipPosition({\n                      x: e.clientX,\n                      y: e.clientY\n                    });\n                  }\n                },\n                onTouchStart: e => {\n                  if (isMobile) {\n                    e.preventDefault();\n                    e.currentTarget.style.backgroundColor = getGroupColor(getPersonGroup(person));\n                    e.currentTarget.style.boxShadow = `0 0 3px ${getGroupColor(getPersonGroup(person))}`;\n\n                    // Устанавливаем активный маркер\n                    setActiveAchievementMarker({\n                      personId: person.id,\n                      index\n                    });\n\n                    // Скрываем tooltip человека при касании маркера достижения\n                    if ((hoveredPerson === null || hoveredPerson === void 0 ? void 0 : hoveredPerson.id) === person.id) {\n                      handlePersonHover(null, 0, 0);\n                    }\n\n                    // Показываем tooltip сразу на мобильных\n                    const touch = e.touches[0];\n                    setAchievementTooltipPosition({\n                      x: touch.clientX,\n                      y: touch.clientY\n                    });\n                    setHoveredAchievement({\n                      person,\n                      year: year,\n                      index\n                    });\n                    setShowAchievementTooltip(true);\n                  }\n                },\n                onTouchEnd: e => {\n                  if (isMobile) {\n                    // Убираем визуальные эффекты при отпускании, но НЕ скрываем tooltip\n                    e.currentTarget.style.backgroundColor = getGroupColorDark(getPersonGroup(person));\n                    e.currentTarget.style.boxShadow = 'none';\n\n                    // Сбрасываем активный маркер\n                    setActiveAchievementMarker(null);\n\n                    // НЕ скрываем tooltip достижения - он будет скрыт только по клику вне или по кнопке закрытия\n                    // Но скрываем tooltip человека, если он был показан\n                    if ((hoveredPerson === null || hoveredPerson === void 0 ? void 0 : hoveredPerson.id) === person.id) {\n                      handlePersonHover(null, 0, 0);\n                    }\n                  }\n                },\n                onKeyDown: e => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    // Показываем tooltip при нажатии Enter или Space\n                    setHoveredAchievement({\n                      person,\n                      year: year,\n                      index\n                    });\n                    // Используем позицию элемента для tooltip при нажатии клавиши\n                    const rect = e.currentTarget.getBoundingClientRect();\n                    setAchievementTooltipPosition({\n                      x: rect.left + rect.width / 2,\n                      y: rect.top - 10\n                    });\n                    setShowAchievementTooltip(true);\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    position: 'absolute',\n                    top: '-12px',\n                    left: '50%',\n                    transform: 'translateX(-50%)',\n                    fontSize: '8px',\n                    color: getGroupColorDark(getPersonGroup(person)),\n                    fontWeight: 'bold',\n                    whiteSpace: 'nowrap',\n                    backgroundColor: 'rgba(44, 24, 16, 0.9)',\n                    padding: '1px 3px',\n                    borderRadius: '2px',\n                    border: `1px solid ${getGroupColorDark(getPersonGroup(person))}`,\n                    transition: 'all 0.2s ease'\n                  },\n                  children: year\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 788,\n                  columnNumber: 27\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 25\n              }, this);\n            }), person.reignStart && person.reignEnd && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reign-bar\",\n              id: `reign-bar-${person.id}`,\n              role: \"presentation\",\n              \"aria-label\": `Период правления: ${person.reignStart} - ${person.reignEnd}`,\n              style: {\n                position: 'absolute',\n                top: '-15px',\n                left: `${getAdjustedPosition(person.reignStart)}px`,\n                width: `${getAdjustedWidth(person.reignStart, person.reignEnd)}px`,\n                height: '65px',\n                backgroundColor: 'rgba(211, 47, 47, 0.25)',\n                pointerEvents: 'none',\n                borderLeft: '2px solid #D32F2F',\n                borderRight: '2px solid #D32F2F',\n                borderRadius: '3px',\n                zIndex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 22\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"life-bar\",\n              id: `life-bar-${person.id}`,\n              role: \"button\",\n              \"aria-label\": `${person.name}, ${person.birthYear} - ${person.deathYear}, ${person.category}`,\n              tabIndex: 0,\n              style: {\n                position: 'absolute',\n                top: '10px',\n                left: `${getAdjustedPosition(person.birthYear)}px`,\n                width: `${getAdjustedWidth(person.birthYear, person.deathYear)}px`,\n                height: '40px',\n                background: `linear-gradient(135deg, ${getGroupColorMuted(getPersonGroup(person))} 0%, #6a5a3a 100%)`,\n                borderRadius: '6px',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                padding: '0 12px',\n                color: 'white',\n                fontSize: '14px',\n                fontWeight: 'bold',\n                minWidth: '60px',\n                boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n                border: '1.5px solid #a8926a',\n                opacity: (selectedPerson === null || selectedPerson === void 0 ? void 0 : selectedPerson.id) === person.id ? 0.8 : 1,\n                zIndex: 5,\n                transform: (selectedPerson === null || selectedPerson === void 0 ? void 0 : selectedPerson.id) === person.id ? 'scale(1.05)' : 'scale(1)',\n                transition: 'all 0.2s ease'\n              },\n              onMouseEnter: e => {\n                if (!isMobile) {\n                  e.currentTarget.style.transform = 'translateY(-3px) scale(1.02)';\n                  e.currentTarget.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.4)';\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.4)';\n\n                  // Скрываем tooltip достижения при наведении на lifebar\n                  if ((hoveredAchievement === null || hoveredAchievement === void 0 ? void 0 : hoveredAchievement.person.id) === person.id) {\n                    setShowAchievementTooltip(false);\n                    setHoveredAchievement(null);\n                    setActiveAchievementMarker(null);\n                  }\n\n                  // Используем handlePersonHover для правильной обработки\n                  handlePersonHover(person, e.clientX, e.clientY);\n                }\n              },\n              onMouseLeave: e => {\n                if (!isMobile) {\n                  e.currentTarget.style.transform = (selectedPerson === null || selectedPerson === void 0 ? void 0 : selectedPerson.id) === person.id ? 'scale(1.05)' : 'translateY(0) scale(1)';\n                  e.currentTarget.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.3)';\n                  e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)';\n                  // Используем handlePersonHover для правильной обработки с задержкой\n                  handlePersonHover(null, 0, 0);\n                }\n              },\n              onMouseMove: e => {\n                if (!isMobile && (hoveredPerson === null || hoveredPerson === void 0 ? void 0 : hoveredPerson.id) === person.id) {\n                  setMousePosition({\n                    x: e.clientX,\n                    y: e.clientY\n                  });\n                }\n              },\n              onKeyDown: e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  if (isMobile) {\n                    setSelectedPerson(person);\n                  } else {\n                    setHoveredPerson(person);\n                    setShowTooltip(true);\n                  }\n                }\n              },\n              onTouchStart: e => {\n                if (isMobile) {\n                  // Скрываем tooltip достижения при касании lifebar\n                  if ((hoveredAchievement === null || hoveredAchievement === void 0 ? void 0 : hoveredAchievement.person.id) === person.id) {\n                    setShowAchievementTooltip(false);\n                    setHoveredAchievement(null);\n                    setActiveAchievementMarker(null);\n                  }\n                }\n              },\n              onClick: () => {\n                if (isMobile) {\n                  setSelectedPerson(person);\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  flexDirection: 'column',\n                  lineHeight: '1.2'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: person.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 920,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 919,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 832,\n              columnNumber: 38\n            }, this)]\n          }, person.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 17\n          }, this))\n        }, rowIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Timeline, \"mDTz/1/3lw+8ALGZO2u07zUf7H8=\", false, function () {\n  return [useMobile];\n});\n_c = Timeline;\nvar _c;\n$RefreshReg$(_c, \"Timeline\");","map":{"version":3,"names":["React","useMobile","getPosition","getWidth","getCenturyColor","getCenturyNumber","toRomanNumeral","jsxDEV","_jsxDEV","Fragment","_Fragment","Timeline","isLoading","timelineWidth","totalHeight","centuryBoundaries","minYear","pixelsPerYear","LEFT_PADDING_PX","rowPlacement","filters","groupingType","categoryDividers","getGroupColor","getGroupColorDark","getGroupColorMuted","getPersonGroup","hoveredPerson","setHoveredPerson","mousePosition","setMousePosition","showTooltip","setShowTooltip","handlePersonHover","activeAchievementMarker","setActiveAchievementMarker","hoveredAchievement","setHoveredAchievement","achievementTooltipPosition","setAchievementTooltipPosition","showAchievementTooltip","setShowAchievementTooltip","hoverTimerRef","sortedData","selectedPerson","setSelectedPerson","timelineRef","isDragging","isDraggingTimeline","handleMouseDown","handleMouseMove","handleMouseUp","handleTouchStart","handleTouchMove","handleTouchEnd","_s","isMobile","getEmptyCenturies","length","Set","Math","min","map","p","birthYear","maxYear","max","deathYear","startCentury","floor","endCentury","ceil","emptyCenturies","centuryStart","centuryEnd","hasDataInCentury","some","person","add","getTimelineElements","hideEmptyCenturies","year","type","visibleCenturies","filter","has","elements","i","currentYear","prevYear","gapStart","gapEnd","hiddenCenturies","push","startYear","endYear","timelineElements","getAdjustedPosition","originalPosition","totalOffset","element","originalGapWidth","newGapWidth","getAdjustedWidth","startPos","endPos","getAdjustedTimelineWidth","totalWidth","createRepeatingCenturyLabels","viewportHeight","window","innerHeight","labels","forEach","centerYear","centuryNumber","isNegativeCentury","romanNumeral","abs","nextYear","centerPos","top","id","left","_element$hiddenCentur","gapWidth","hiddenCenturiesText","join","children","className","role","style","position","height","overflow","padding","width","pointerEvents","zIndex","index","background","opacity","fileName","_jsxFileName","lineNumber","columnNumber","border","label","transform","fontSize","fontWeight","color","textShadow","fontFamily","textAlign","maxWidth","wordWrap","marginTop","divider","category","borderRadius","whiteSpace","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","row","rowIndex","marginBottom","fontStyle","reignStart","reignEnd","showAchievements","achievementYear1","achievementYear2","achievementYear3","undefined","tabIndex","backgroundColor","personId","cursor","transition","onMouseEnter","e","currentTarget","boxShadow","current","clearTimeout","setTimeout","x","clientX","y","clientY","preventDefault","touch","touches","onKeyDown","key","rect","getBoundingClientRect","borderLeft","borderRight","name","display","alignItems","minWidth","borderColor","onClick","flexDirection","lineHeight","_c","$RefreshReg$"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/Timeline.tsx"],"sourcesContent":["import React from 'react'\r\nimport { useMobile } from '../hooks/useMobile'\r\nimport { Person } from '../types'\r\nimport { \r\n  getPosition, \r\n  getWidth, \r\n  getCenturyColor, \r\n  getCenturyNumber, \r\n  toRomanNumeral\r\n} from '../utils/timelineUtils'\r\n\r\ninterface TimelineProps {\r\n  isLoading: boolean\r\n  timelineWidth: number\r\n  totalHeight: number\r\n  centuryBoundaries: number[]\r\n  minYear: number\r\n  pixelsPerYear: number\r\n  LEFT_PADDING_PX: number\r\n  rowPlacement: Person[][]\r\n  filters: {\r\n    showAchievements: boolean\r\n    hideEmptyCenturies: boolean\r\n  }\r\n  groupingType: 'category' | 'country' | 'none'\r\n  categoryDividers: { category: string; top: number }[]\r\n  getGroupColor: (groupName: string) => string\r\n  getGroupColorDark: (groupName: string) => string\r\n  getGroupColorMuted: (groupName: string) => string\r\n  getPersonGroup: (person: Person) => string\r\n  hoveredPerson: Person | null\r\n  setHoveredPerson: (person: Person | null) => void\r\n  mousePosition: { x: number; y: number }\r\n  setMousePosition: (position: { x: number; y: number }) => void\r\n  showTooltip: boolean\r\n  setShowTooltip: (show: boolean) => void\r\n  handlePersonHover: (person: Person | null, x: number, y: number) => void\r\n  activeAchievementMarker: { personId: string; index: number } | null\r\n  setActiveAchievementMarker: (marker: { personId: string; index: number } | null) => void\r\n  hoveredAchievement: { person: Person; year: number; index: number } | null\r\n  setHoveredAchievement: (achievement: { person: Person; year: number; index: number } | null) => void\r\n  achievementTooltipPosition: { x: number; y: number }\r\n  setAchievementTooltipPosition: (position: { x: number; y: number }) => void\r\n  showAchievementTooltip: boolean\r\n  setShowAchievementTooltip: (show: boolean) => void\r\n  hoverTimerRef: React.MutableRefObject<NodeJS.Timeout | null>\r\n  sortedData: Person[]\r\n  selectedPerson: Person | null\r\n  setSelectedPerson: (person: Person | null) => void\r\n  timelineRef: React.RefObject<HTMLDivElement>\r\n  isDragging: boolean\r\n  isDraggingTimeline: boolean\r\n  handleMouseDown: (e: React.MouseEvent) => void\r\n  handleMouseMove: (e: React.MouseEvent) => void\r\n  handleMouseUp: (e: React.MouseEvent) => void\r\n  handleTouchStart: (e: React.TouchEvent) => void\r\n  handleTouchMove: (e: React.TouchEvent) => void\r\n  handleTouchEnd: (e: React.TouchEvent) => void\r\n}\r\n\r\n// Типы для элементов временной линии\r\ntype TimelineElement = \r\n  | { type: 'century'; year: number }\r\n  | { type: 'gap'; startYear: number; endYear: number; hiddenCenturies: number[] }\r\n\r\nexport const Timeline: React.FC<TimelineProps> = ({\r\n  isLoading,\r\n  timelineWidth,\r\n  totalHeight,\r\n  centuryBoundaries,\r\n  minYear,\r\n  pixelsPerYear,\r\n  LEFT_PADDING_PX,\r\n  rowPlacement,\r\n  filters,\r\n  groupingType,\r\n  categoryDividers,\r\n  getGroupColor,\r\n  getGroupColorDark,\r\n  getGroupColorMuted,\r\n  getPersonGroup,\r\n  hoveredPerson,\r\n  setHoveredPerson,\r\n  mousePosition,\r\n  setMousePosition,\r\n  showTooltip,\r\n  setShowTooltip,\r\n  handlePersonHover,\r\n  activeAchievementMarker,\r\n  setActiveAchievementMarker,\r\n  hoveredAchievement,\r\n  setHoveredAchievement,\r\n  achievementTooltipPosition,\r\n  setAchievementTooltipPosition,\r\n  showAchievementTooltip,\r\n  setShowAchievementTooltip,\r\n  hoverTimerRef,\r\n  sortedData,\r\n  selectedPerson,\r\n  setSelectedPerson,\r\n  timelineRef,\r\n  isDragging,\r\n  isDraggingTimeline,\r\n  handleMouseDown,\r\n  handleMouseMove,\r\n  handleMouseUp,\r\n  handleTouchStart,\r\n  handleTouchMove,\r\n  handleTouchEnd\r\n}) => {\r\n  const isMobile = useMobile()\r\n\r\n\r\n\r\n  // Функция для определения пустых веков на основе отфильтрованных данных\r\n  const getEmptyCenturies = () => {\r\n    if (!sortedData || sortedData.length === 0) return new Set();\r\n    \r\n    // Используем отфильтрованные данные для определения диапазона\r\n    const minYear = Math.min(...sortedData.map(p => p.birthYear));\r\n    const maxYear = Math.max(...sortedData.map(p => p.deathYear));\r\n    \r\n    const startCentury = Math.floor(minYear / 100) * 100;\r\n    const endCentury = Math.ceil(maxYear / 100) * 100;\r\n    \r\n    const emptyCenturies = new Set<number>();\r\n    \r\n    for (let centuryStart = startCentury; centuryStart <= endCentury; centuryStart += 100) {\r\n      const centuryEnd = centuryStart + 99;\r\n      const hasDataInCentury = sortedData.some(person => \r\n        (person.birthYear <= centuryEnd && person.deathYear >= centuryStart)\r\n      );\r\n      \r\n      if (!hasDataInCentury) {\r\n        emptyCenturies.add(centuryStart);\r\n      }\r\n    }\r\n    \r\n    return emptyCenturies;\r\n  };\r\n\r\n  // Создаем массив для отображения веков с промежутками\r\n  const getTimelineElements = (): TimelineElement[] => {\r\n    if (!filters.hideEmptyCenturies) {\r\n      return centuryBoundaries.map(year => ({ type: 'century', year }));\r\n    }\r\n\r\n    const emptyCenturies = getEmptyCenturies();\r\n    const visibleCenturies = centuryBoundaries.filter(year => !emptyCenturies.has(year));\r\n    \r\n    const elements: TimelineElement[] = [];\r\n    \r\n    for (let i = 0; i < visibleCenturies.length; i++) {\r\n      const currentYear = visibleCenturies[i];\r\n      \r\n      // Добавляем промежуток перед веком (кроме первого)\r\n      if (i > 0) {\r\n        const prevYear = visibleCenturies[i - 1];\r\n        const gapStart = prevYear + 100;\r\n        const gapEnd = currentYear;\r\n        \r\n        // Находим все скрытые века в промежутке\r\n        const hiddenCenturies: number[] = [];\r\n        for (let year = gapStart; year < gapEnd; year += 100) {\r\n          if (emptyCenturies.has(year)) {\r\n            hiddenCenturies.push(year);\r\n          }\r\n        }\r\n        \r\n        if (hiddenCenturies.length > 0) {\r\n          elements.push({\r\n            type: 'gap',\r\n            startYear: gapStart,\r\n            endYear: gapEnd,\r\n            hiddenCenturies\r\n          });\r\n        }\r\n      }\r\n      \r\n      // Добавляем сам век\r\n      elements.push({ type: 'century', year: currentYear });\r\n    }\r\n    \r\n    return elements;\r\n  };\r\n\r\n  const timelineElements = getTimelineElements();\r\n\r\n  // Функция для вычисления позиции с учетом промежутков\r\n  const getAdjustedPosition = (year: number) => {\r\n    if (!filters.hideEmptyCenturies) {\r\n      return getPosition(year, minYear, pixelsPerYear, LEFT_PADDING_PX);\r\n    }\r\n\r\n    // Находим позицию года в оригинальной шкале\r\n    const originalPosition = getPosition(year, minYear, pixelsPerYear, LEFT_PADDING_PX);\r\n    \r\n    // Вычисляем смещение, проходя по всем промежуткам до этого года\r\n    let totalOffset = 0;\r\n    \r\n    for (const element of timelineElements) {\r\n      if (element.type === 'gap') {\r\n        const gapStart = getPosition(element.startYear, minYear, pixelsPerYear, LEFT_PADDING_PX);\r\n        const gapEnd = getPosition(element.endYear, minYear, pixelsPerYear, LEFT_PADDING_PX);\r\n        const originalGapWidth = gapEnd - gapStart;\r\n        const newGapWidth = pixelsPerYear * 10; // 10 лет\r\n        \r\n        // Если год находится после этого промежутка, добавляем смещение\r\n        if (year >= element.endYear) {\r\n          totalOffset += (originalGapWidth - newGapWidth);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return originalPosition - totalOffset;\r\n  };\r\n\r\n  // Функция для вычисления ширины с учетом промежутков\r\n  const getAdjustedWidth = (startYear: number, endYear: number) => {\r\n    if (!filters.hideEmptyCenturies) {\r\n      return getWidth(startYear, endYear, pixelsPerYear);\r\n    }\r\n\r\n    const startPos = getAdjustedPosition(startYear);\r\n    const endPos = getAdjustedPosition(endYear);\r\n    return endPos - startPos;\r\n  };\r\n\r\n  // Функция для вычисления скорректированной ширины таймлайна\r\n  const getAdjustedTimelineWidth = () => {\r\n    if (!filters.hideEmptyCenturies) {\r\n      return timelineWidth;\r\n    }\r\n\r\n    // Вычисляем общую ширину, проходя по всем элементам\r\n    let totalWidth = 0;\r\n    \r\n    for (const element of timelineElements) {\r\n      if (element.type === 'century') {\r\n        // Век занимает 100 лет\r\n        totalWidth += pixelsPerYear * 100;\r\n      } else if (element.type === 'gap') {\r\n        // Промежуток занимает 10 лет\r\n        totalWidth += pixelsPerYear * 10;\r\n      }\r\n    }\r\n\r\n    return totalWidth + LEFT_PADDING_PX + 50; // Добавляем отступы\r\n  };\r\n\r\n  // Функция для создания повторяющихся меток веков через каждые 90vh\r\n  const createRepeatingCenturyLabels = () => {\r\n    const viewportHeight = window.innerHeight;\r\n    const labels: Array<{\r\n      id: string;\r\n      year: number;\r\n      romanNumeral: string;\r\n      left: number;\r\n      top: number;\r\n      type: 'century' | 'gap';\r\n    }> = [];\r\n    \r\n    // Создаем метки для каждого века\r\n    timelineElements.forEach((element) => {\r\n      if (element.type === 'century') {\r\n        const year = element.year;\r\n        const centerYear = year + 50;\r\n        const centuryNumber = getCenturyNumber(centerYear);\r\n        const isNegativeCentury = year < 0;\r\n        const romanNumeral = isNegativeCentury ? `${toRomanNumeral(Math.abs(centuryNumber))} в. до н.э` : `${toRomanNumeral(centuryNumber)} в.`;\r\n        const startPos = getAdjustedPosition(year);\r\n        const nextYear = year + 100;\r\n        const endPos = getAdjustedPosition(nextYear);\r\n        const centerPos = startPos + (endPos - startPos) / 2; // Центр века\r\n        \r\n        // Создаем метки через каждые 90vh\r\n        for (let top = 0; top < totalHeight; top += viewportHeight * 0.9) {\r\n          labels.push({\r\n            id: `century-label-${year}-${top}`,\r\n            year,\r\n            romanNumeral,\r\n            left: centerPos,\r\n            top: top + viewportHeight / 2, // Центрируем по вертикали в каждом экране\r\n            type: 'century'\r\n          });\r\n        }\r\n      } else if (element.type === 'gap') {\r\n        const startPos = getAdjustedPosition(element.startYear);\r\n        const gapWidth = pixelsPerYear * 10; // 10 лет = 1/10 века\r\n        const centerPos = startPos + gapWidth / 2; // Центр промежутка\r\n        const hiddenCenturiesText = element.hiddenCenturies?.map(year => {\r\n          const centuryNumber = getCenturyNumber(year + 50);\r\n          const isNegativeCentury = year < 0;\r\n          const romanNumeral = isNegativeCentury ? `${toRomanNumeral(Math.abs(centuryNumber))} в. до н.э` : `${toRomanNumeral(centuryNumber)} в.`;\r\n          return romanNumeral;\r\n        }).join(', ') || '';\r\n        \r\n        // Создаем метки для промежутков через каждые 90vh\r\n        for (let top = 0; top < totalHeight; top += viewportHeight * 0.9) {\r\n          labels.push({\r\n            id: `gap-label-${element.startYear}-${top}`,\r\n            year: element.startYear,\r\n            romanNumeral: hiddenCenturiesText,\r\n            left: centerPos,\r\n            top: top + viewportHeight / 2,\r\n            type: 'gap'\r\n          });\r\n        }\r\n      }\r\n    });\r\n    \r\n    return labels;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Временная линия на весь экран */}\r\n      <div \r\n        className=\"timeline-content\" \r\n        id=\"timeline-content\"\r\n        role=\"presentation\" \r\n        aria-hidden=\"true\"\r\n        style={{ \r\n          position: 'relative', \r\n          height: '100%',\r\n          overflow: 'visible',\r\n          padding: isMobile ? '0' : '1rem 0 2rem 0'\r\n        }}\r\n      >\r\n        {/* Разноцветная заливка веков */}\r\n        <div \r\n          className=\"timeline-background\"\r\n          id=\"timeline-background\"\r\n          role=\"presentation\"\r\n          aria-hidden=\"true\"\r\n          style={{\r\n            position: 'absolute',\r\n            top: '0',\r\n            left: '0',\r\n            width: `${getAdjustedTimelineWidth()}px`,\r\n            height: `${totalHeight + 200}px`,\r\n            pointerEvents: 'none',\r\n            zIndex: 1\r\n          }}\r\n        >\r\n          {timelineElements.map((element, index) => {\r\n                         if (element.type === 'century') {\r\n               const year = element.year;\r\n               // Каждый век занимает ровно 100 лет\r\n               const nextYear = year + 100\r\n               const startPos = getAdjustedPosition(year)\r\n               const endPos = getAdjustedPosition(nextYear)\r\n               const width = endPos - startPos\r\n\r\n              // Вычисляем век на основе центра года в столетии\r\n              const centerYear = year + 50\r\n              const centuryNumber = getCenturyNumber(centerYear)\r\n              // Для отрицательных веков добавляем знак минус\r\n              const isNegativeCentury = year < 0\r\n              const romanNumeral = isNegativeCentury ? `-${toRomanNumeral(Math.abs(centuryNumber))}` : toRomanNumeral(centuryNumber)\r\n              \r\n              return (\r\n                <div \r\n                  key={`century-bg-${year}`} \r\n                  className=\"century-background\"\r\n                  id={`century-${year}`}\r\n                  role=\"presentation\"\r\n                  aria-label={`Век ${romanNumeral}`}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    left: `${startPos}px`,\r\n                    width: `${width}px`,\r\n                    height: '100%',\r\n                    background: getCenturyColor(year, minYear),\r\n                    opacity: 0.3,\r\n                    zIndex: 1\r\n                  }}\r\n                >\r\n                </div>\r\n              )\r\n                                                   } else if (element.type === 'gap') {\r\n                // Промежуток между веками - компактный размер (1/10 века)\r\n                const gapWidth = pixelsPerYear * 10; // 10 лет = 1/10 века\r\n                const startPos = getAdjustedPosition(element.startYear)\r\n               \r\n               return (\r\n                 <div key={`gap-${element.startYear}`} style={{\r\n                   position: 'absolute',\r\n                   left: `${startPos}px`,\r\n                   width: `${gapWidth}px`,\r\n                   height: '100%',\r\n                   background: 'rgba(139, 69, 19, 0.1)',\r\n                   border: '1px dashed rgba(139, 69, 19, 0.3)',\r\n                   zIndex: 1\r\n                 }}>\r\n                </div>\r\n              )\r\n            }\r\n            return null;\r\n          })}\r\n        </div>\r\n\r\n                 {/* Границы веков и промежутков на всю высоту */}\r\n         <div style={{\r\n           position: 'absolute',\r\n           top: '0',\r\n           left: '0',\r\n           width: `${getAdjustedTimelineWidth()}px`,\r\n           height: `${totalHeight + 200}px`,\r\n           pointerEvents: 'none',\r\n           zIndex: 5\r\n         }}>\r\n                      {timelineElements.map((element) => {\r\n              if (element.type === 'century') {\r\n                return (\r\n                  <div key={`century-line-${element.year}`} style={{\r\n                    position: 'absolute',\r\n                    left: `${getAdjustedPosition(element.year)}px`,\r\n                    width: '2px',\r\n                    height: '100%',\r\n                    background: 'linear-gradient(to bottom, #cd853f 0%, #cd853f 20%, rgba(205, 133, 63, 0.3) 100%)',\r\n                    zIndex: 5\r\n                  }} />\r\n                );\r\n              } else if (element.type === 'gap') {\r\n                return (\r\n                  <div key={`gap-line-${element.startYear}`} style={{\r\n                    position: 'absolute',\r\n                    left: `${getAdjustedPosition(element.startYear)}px`,\r\n                    width: '2px',\r\n                    height: '100%',\r\n                    background: 'linear-gradient(to bottom, #cd853f 0%, #cd853f 20%, rgba(205, 133, 63, 0.3) 100%)',\r\n                    zIndex: 5\r\n                  }} />\r\n                );\r\n              }\r\n              return null;\r\n            })}\r\n         </div>\r\n\r\n         {/* Повторяющиеся метки веков через каждые 90vh */}\r\n         <div style={{\r\n           position: 'absolute',\r\n           top: '0',\r\n           left: '0',\r\n           width: `${getAdjustedTimelineWidth()}px`,\r\n           height: `${totalHeight + 200}px`,\r\n           pointerEvents: 'none',\r\n           zIndex: 6\r\n         }}>\r\n           {createRepeatingCenturyLabels().map((label) => (\r\n             <div\r\n               key={label.id}\r\n               style={{\r\n                 position: 'absolute',\r\n                 left: `${label.left}px`,\r\n                 top: `${label.top}px`,\r\n                 transform: 'translate(-50%, -50%)',\r\n                 fontSize: label.type === 'century' ? '1.5rem' : '0.8rem',\r\n                 fontWeight: 'bold',\r\n                 color: label.type === 'century' \r\n                   ? 'rgba(244, 228, 193, 0.4)' \r\n                   : 'rgba(139, 69, 19, 0.5)',\r\n                 textShadow: '1px 1px 2px rgba(0, 0, 0, 0.6)',\r\n                 pointerEvents: 'none',\r\n                 fontFamily: label.type === 'century' ? 'serif' : 'sans-serif',\r\n                 textAlign: 'center',\r\n                 maxWidth: '200px',\r\n                 wordWrap: 'break-word'\r\n               }}\r\n             >\r\n               {label.type === 'century' ? (\r\n                 label.romanNumeral\r\n               ) : (\r\n                 <>\r\n                   <div>Скрыто:</div>\r\n                   <div style={{ fontSize: '0.7rem', marginTop: '2px' }}>\r\n                     {label.romanNumeral}\r\n                   </div>\r\n                 </>\r\n               )}\r\n             </div>\r\n           ))}\r\n         </div>\r\n\r\n         {/* Разделители групп */}\r\n         <div \r\n           className=\"category-dividers\"\r\n           id=\"category-dividers\"\r\n           role=\"presentation\"\r\n           aria-hidden=\"true\"\r\n           style={{\r\n             position: 'absolute',\r\n             top: '0',\r\n             left: '0',\r\n             width: `${getAdjustedTimelineWidth()}px`,\r\n             height: `${totalHeight + 200}px`,\r\n             pointerEvents: 'none',\r\n             zIndex: 8\r\n           }}\r\n         >\r\n          {categoryDividers.map((divider) => (\r\n            <div \r\n              key={`category-divider-${divider.category}`} \r\n              className=\"category-divider\"\r\n              id={`divider-${divider.category}`}\r\n              role=\"separator\"\r\n              aria-label={`Разделитель группы: ${divider.category}`}\r\n              style={{\r\n                position: 'absolute',\r\n                top: `${divider.top}px`,\r\n                left: '0',\r\n                width: '100%',\r\n                height: '10px',\r\n                background: `linear-gradient(to right, transparent 0%, ${getGroupColor(divider.category)} 20%, ${getGroupColor(divider.category)} 80%, transparent 100%)`,\r\n                opacity: 0.6,\r\n                zIndex: 8\r\n              }}\r\n            >\r\n              <div \r\n                className=\"category-label\" \r\n                id={`category-label-${divider.category}`}\r\n                aria-label={`Группа: ${divider.category}`}\r\n                style={{\r\n                  position: 'absolute',\r\n                  left: '20px',\r\n                  top: '50%',\r\n                  transform: 'translateY(-50%)',\r\n                  background: getGroupColor(divider.category),\r\n                  color: 'white',\r\n                  padding: '2px 8px',\r\n                  borderRadius: '4px',\r\n                  fontSize: '0.7rem',\r\n                  fontWeight: 'bold',\r\n                  whiteSpace: 'nowrap',\r\n                  zIndex: 9\r\n                }}\r\n              >\r\n                {divider.category}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n                 {/* Полоски жизни */}\r\n         <div \r\n           ref={timelineRef}\r\n           className=\"person-timeline\"\r\n           id=\"person-timeline\"\r\n           role=\"list\"\r\n           aria-label=\"Временные линии исторических личностей\"\r\n           style={{ \r\n             position: 'relative',\r\n             width: `${getAdjustedTimelineWidth()}px`,\r\n             height: `${totalHeight + 60}px`,\r\n             zIndex: 10\r\n           }}\r\n           onMouseDown={handleMouseDown}\r\n           onMouseMove={handleMouseMove}\r\n           onMouseUp={handleMouseUp}\r\n           onMouseLeave={handleMouseUp}\r\n           onTouchStart={handleTouchStart}\r\n           onTouchMove={handleTouchMove}\r\n           onTouchEnd={handleTouchEnd}\r\n         >\r\n          {rowPlacement.map((row, rowIndex) => (\r\n            <div \r\n              key={rowIndex} \r\n              className=\"timeline-row\"\r\n              id={`timeline-row-${rowIndex}`}\r\n              role=\"listitem\"\r\n              aria-label={`Строка ${rowIndex + 1} временной линии`}\r\n              style={{\r\n                position: 'relative',\r\n                height: row.length === 0 ? '20px' : '60px',\r\n                marginBottom: row.length === 0 ? '0px' : '10px'\r\n              }}\r\n            >\r\n              {row.map((person) => (\r\n                <React.Fragment key={person.id}>\r\n                  {/* Годы жизни и правления над полоской */}\r\n                  <span \r\n                    className=\"birth-year-label\"\r\n                    id={`birth-year-${person.id}`}\r\n                    aria-label={`Год рождения: ${person.birthYear}`}\r\n                    style={{\r\n                      position: 'absolute',\r\n                      left: `${getAdjustedPosition(person.birthYear)}px`,\r\n                      top: 0,\r\n                      fontSize: '11px',\r\n                      color: 'rgba(244, 228, 193, 0.6)',\r\n                      fontStyle: 'italic',\r\n                      fontWeight: 400,\r\n                      transform: 'translateX(-100%) translateY(-10px)'\r\n                    }}\r\n                  >\r\n                    {person.birthYear}\r\n                  </span>\r\n\r\n                                     {person.reignStart && (\r\n                     <span \r\n                       className=\"reign-label\" \r\n                       id={`reign-start-${person.id}`}\r\n                       aria-label={`Начало правления: ${person.reignStart}`}\r\n                       style={{\r\n                         position: 'absolute',\r\n                         left: `${getAdjustedPosition(person.reignStart)}px`,\r\n                         top: 0,\r\n                         fontSize: '11px',\r\n                         color: '#E57373', // Темно-красный\r\n                         fontStyle: 'italic',\r\n                         fontWeight: 'bold',\r\n                         transform: 'translateX(-100%) translateY(-22px)'\r\n                       }}\r\n                     >\r\n                       👑 {person.reignStart}\r\n                     </span>\r\n                   )}\r\n\r\n                                     {person.reignEnd && (\r\n                     <span \r\n                       className=\"reign-label\" \r\n                       id={`reign-end-${person.id}`}\r\n                       aria-label={`Конец правления: ${person.reignEnd}`}\r\n                       style={{\r\n                         position: 'absolute',\r\n                         left: `${getAdjustedPosition(person.reignEnd)}px`,\r\n                         top: 0,\r\n                         fontSize: '11px',\r\n                         color: '#E57373', // Темно-красный\r\n                         fontStyle: 'italic',\r\n                         fontWeight: 'bold',\r\n                         transform: 'translateY(-22px)'\r\n                       }}\r\n                     >\r\n                       {person.reignEnd}\r\n                     </span>\r\n                   )}\r\n                  \r\n                                     <span \r\n                                       className=\"death-year-label\"\r\n                                       id={`death-year-${person.id}`}\r\n                                       aria-label={`Год смерти: ${person.deathYear}`}\r\n                                       style={{\r\n                                         position: 'absolute',\r\n                                         left: `${getAdjustedPosition(person.deathYear)}px`,\r\n                                         top: 0,\r\n                                         fontSize: '11px',\r\n                                         color: 'rgba(244, 228, 193, 0.6)',\r\n                                         fontStyle: 'italic',\r\n                                         fontWeight: 400,\r\n                                         transform: 'translateY(-10px)'\r\n                                       }}\r\n                                     >\r\n                                       {person.deathYear}\r\n                                     </span>\r\n\r\n                  {/* Маркеры ключевых достижений */}\r\n                  {filters.showAchievements && [person.achievementYear1, person.achievementYear2, person.achievementYear3]\r\n                    .filter(year => year !== undefined && year !== null)\r\n                    .map((year, index) => {\r\n                      return (\r\n                        <div \r\n                          key={index} \r\n                          className=\"achievement-marker\"\r\n                          id={`achievement-${person.id}-${index}`}\r\n                          role=\"button\"\r\n                          aria-label={`Достижение ${index + 1} в ${year} году`}\r\n                          tabIndex={0}\r\n                          style={{\r\n                            position: 'absolute',\r\n                            left: `${getAdjustedPosition(year as number)}px`,\r\n                            top: '-4px',\r\n                            width: '2px', // Возвращаем стандартную ширину\r\n                            height: '15px', // Возвращаем стандартную высоту\r\n                            backgroundColor: getGroupColorDark(getPersonGroup(person)),\r\n                            zIndex: activeAchievementMarker?.personId === person.id && activeAchievementMarker?.index === index ? 10 : 3,\r\n                            transform: 'translateX(-50%)',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s ease',\r\n                            // Убираем псевдоэлементы, так как они не работают в inline стилях\r\n                          }}\r\n                        onMouseEnter={(e) => {\r\n                          if (!isMobile) {\r\n                            e.currentTarget.style.backgroundColor = getGroupColor(getPersonGroup(person));\r\n                            e.currentTarget.style.boxShadow = `0 0 3px ${getGroupColor(getPersonGroup(person))}`;\r\n                            \r\n                            // Устанавливаем активный маркер\r\n                            setActiveAchievementMarker({ personId: person.id, index });\r\n                            \r\n                            // Скрываем tooltip человека при наведении на маркер достижения\r\n                            if (hoveredPerson?.id === person.id) {\r\n                              handlePersonHover(null, 0, 0);\r\n                            }\r\n                            \r\n                            // Очищаем предыдущий таймер если он есть\r\n                            if (hoverTimerRef.current) {\r\n                              clearTimeout(hoverTimerRef.current);\r\n                            }\r\n                            \r\n                            // Запускаем таймер для показа tooltip\r\n                            hoverTimerRef.current = setTimeout(() => {\r\n                              setAchievementTooltipPosition({ x: e.clientX, y: e.clientY });\r\n                              setHoveredAchievement({ person, year: year as number, index });\r\n                              setShowAchievementTooltip(true);\r\n                            }, 500);\r\n                          }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          if (!isMobile) {\r\n                            e.currentTarget.style.backgroundColor = getGroupColorDark(getPersonGroup(person));\r\n                            e.currentTarget.style.boxShadow = 'none';\r\n                            \r\n                            // Сбрасываем активный маркер\r\n                            setActiveAchievementMarker(null);\r\n                            \r\n                            // Очищаем таймер и скрываем tooltip достижения\r\n                            if (hoverTimerRef.current) {\r\n                              clearTimeout(hoverTimerRef.current);\r\n                              hoverTimerRef.current = null;\r\n                            }\r\n                            setShowAchievementTooltip(false);\r\n                            setHoveredAchievement(null);\r\n                            \r\n                            // Также скрываем tooltip человека, если он был показан\r\n                            if (hoveredPerson?.id === person.id) {\r\n                              handlePersonHover(null, 0, 0);\r\n                            }\r\n                          }\r\n                        }}\r\n                        onMouseMove={(e) => {\r\n                          if (!isMobile && hoveredAchievement && hoveredAchievement.person.id === person.id && hoveredAchievement.index === index) {\r\n                            setAchievementTooltipPosition({ x: e.clientX, y: e.clientY });\r\n                          }\r\n                        }}\r\n                        onTouchStart={(e) => {\r\n                          if (isMobile) {\r\n                            e.preventDefault();\r\n                            e.currentTarget.style.backgroundColor = getGroupColor(getPersonGroup(person));\r\n                            e.currentTarget.style.boxShadow = `0 0 3px ${getGroupColor(getPersonGroup(person))}`;\r\n                            \r\n                            // Устанавливаем активный маркер\r\n                            setActiveAchievementMarker({ personId: person.id, index });\r\n                            \r\n                            // Скрываем tooltip человека при касании маркера достижения\r\n                            if (hoveredPerson?.id === person.id) {\r\n                              handlePersonHover(null, 0, 0);\r\n                            }\r\n                            \r\n                            // Показываем tooltip сразу на мобильных\r\n                            const touch = e.touches[0];\r\n                            setAchievementTooltipPosition({ x: touch.clientX, y: touch.clientY });\r\n                            setHoveredAchievement({ person, year: year as number, index });\r\n                            setShowAchievementTooltip(true);\r\n                          }\r\n                        }}\r\n                        onTouchEnd={(e) => {\r\n                          if (isMobile) {\r\n                            // Убираем визуальные эффекты при отпускании, но НЕ скрываем tooltip\r\n                            e.currentTarget.style.backgroundColor = getGroupColorDark(getPersonGroup(person));\r\n                            e.currentTarget.style.boxShadow = 'none';\r\n                            \r\n                            // Сбрасываем активный маркер\r\n                            setActiveAchievementMarker(null);\r\n                            \r\n                            // НЕ скрываем tooltip достижения - он будет скрыт только по клику вне или по кнопке закрытия\r\n                            // Но скрываем tooltip человека, если он был показан\r\n                            if (hoveredPerson?.id === person.id) {\r\n                              handlePersonHover(null, 0, 0);\r\n                            }\r\n                          }\r\n                        }}\r\n                        onKeyDown={(e) => {\r\n                          if (e.key === 'Enter' || e.key === ' ') {\r\n                            e.preventDefault();\r\n                            // Показываем tooltip при нажатии Enter или Space\r\n                            setHoveredAchievement({ person, year: year as number, index });\r\n                            // Используем позицию элемента для tooltip при нажатии клавиши\r\n                            const rect = e.currentTarget.getBoundingClientRect();\r\n                            setAchievementTooltipPosition({ \r\n                              x: rect.left + rect.width / 2, \r\n                              y: rect.top - 10 \r\n                            });\r\n                            setShowAchievementTooltip(true);\r\n                          }\r\n                        }}\r\n                        >\r\n                          <span style={{\r\n                            position: 'absolute',\r\n                            top: '-12px',\r\n                            left: '50%',\r\n                            transform: 'translateX(-50%)',\r\n                            fontSize: '8px',\r\n                            color: getGroupColorDark(getPersonGroup(person)),\r\n                            fontWeight: 'bold',\r\n                            whiteSpace: 'nowrap',\r\n                            backgroundColor: 'rgba(44, 24, 16, 0.9)',\r\n                            padding: '1px 3px',\r\n                            borderRadius: '2px',\r\n                            border: `1px solid ${getGroupColorDark(getPersonGroup(person))}`,\r\n                            transition: 'all 0.2s ease'\r\n                          }}>\r\n                            {year}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    })}\r\n\r\n                                     {/* полоса правления */}\r\n                   {person.reignStart && person.reignEnd && (\r\n                     <div \r\n                       className=\"reign-bar\"\r\n                       id={`reign-bar-${person.id}`}\r\n                       role=\"presentation\"\r\n                       aria-label={`Период правления: ${person.reignStart} - ${person.reignEnd}`}\r\n                       style={{\r\n                         position: 'absolute',\r\n                         top: '-15px',\r\n                         left: `${getAdjustedPosition(person.reignStart)}px`,\r\n                         width: `${getAdjustedWidth(person.reignStart, person.reignEnd)}px`,\r\n                         height: '65px',\r\n                         backgroundColor: 'rgba(211, 47, 47, 0.25)',\r\n                         pointerEvents: 'none',\r\n                         borderLeft: '2px solid #D32F2F',\r\n                         borderRight: '2px solid #D32F2F',\r\n                         borderRadius: '3px',\r\n                         zIndex: 1\r\n                       }} \r\n                     />\r\n                   )}\r\n\r\n                                     <div\r\n                     className=\"life-bar\"\r\n                     id={`life-bar-${person.id}`}\r\n                     role=\"button\"\r\n                     aria-label={`${person.name}, ${person.birthYear} - ${person.deathYear}, ${person.category}`}\r\n                     tabIndex={0}\r\n                     style={{\r\n                       position: 'absolute',\r\n                       top: '10px',\r\n                       left: `${getAdjustedPosition(person.birthYear)}px`,\r\n                       width: `${getAdjustedWidth(person.birthYear, person.deathYear)}px`,\r\n                       height: '40px',\r\n                       background: `linear-gradient(135deg, ${getGroupColorMuted(getPersonGroup(person))} 0%, #6a5a3a 100%)`,\r\n                       borderRadius: '6px',\r\n                       cursor: 'pointer',\r\n                       display: 'flex',\r\n                       alignItems: 'center',\r\n                       padding: '0 12px',\r\n                       color: 'white',\r\n                       fontSize: '14px',\r\n                       fontWeight: 'bold',\r\n                       minWidth: '60px',\r\n                       boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n                       border: '1.5px solid #a8926a',\r\n                       opacity: selectedPerson?.id === person.id ? 0.8 : 1,\r\n                       zIndex: 5,\r\n                       transform: selectedPerson?.id === person.id ? 'scale(1.05)' : 'scale(1)',\r\n                       transition: 'all 0.2s ease'\r\n                     }}\r\n                    onMouseEnter={(e) => {\r\n                      if (!isMobile) {\r\n                        e.currentTarget.style.transform = 'translateY(-3px) scale(1.02)'\r\n                        e.currentTarget.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.4)'\r\n                        e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.4)'\r\n                        \r\n                        // Скрываем tooltip достижения при наведении на lifebar\r\n                        if (hoveredAchievement?.person.id === person.id) {\r\n                          setShowAchievementTooltip(false);\r\n                          setHoveredAchievement(null);\r\n                          setActiveAchievementMarker(null);\r\n                        }\r\n                        \r\n                        // Используем handlePersonHover для правильной обработки\r\n                        handlePersonHover(person, e.clientX, e.clientY)\r\n                      }\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      if (!isMobile) {\r\n                        e.currentTarget.style.transform = selectedPerson?.id === person.id ? 'scale(1.05)' : 'translateY(0) scale(1)'\r\n                        e.currentTarget.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.3)'\r\n                        e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)'\r\n                        // Используем handlePersonHover для правильной обработки с задержкой\r\n                        handlePersonHover(null, 0, 0)\r\n                      }\r\n                    }}\r\n                    onMouseMove={(e) => {\r\n                      if (!isMobile && hoveredPerson?.id === person.id) {\r\n                        setMousePosition({ x: e.clientX, y: e.clientY })\r\n                      }\r\n                    }}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter' || e.key === ' ') {\r\n                        e.preventDefault();\r\n                        if (isMobile) {\r\n                          setSelectedPerson(person);\r\n                        } else {\r\n                          setHoveredPerson(person);\r\n                          setShowTooltip(true);\r\n                        }\r\n                      }\r\n                    }}\r\n                    onTouchStart={(e) => {\r\n                      if (isMobile) {\r\n                        // Скрываем tooltip достижения при касании lifebar\r\n                        if (hoveredAchievement?.person.id === person.id) {\r\n                          setShowAchievementTooltip(false);\r\n                          setHoveredAchievement(null);\r\n                          setActiveAchievementMarker(null);\r\n                        }\r\n                      }\r\n                    }}\r\n                    onClick={() => {\r\n                      if (isMobile) {\r\n                        setSelectedPerson(person)\r\n                      }\r\n                    }}\r\n                  >\r\n                    <div style={{ display: 'flex', flexDirection: 'column', lineHeight: '1.2' }}>\r\n                      <span>{person.name}</span>\r\n                    </div>\r\n                  </div>\r\n                </React.Fragment>\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}