{"ast":null,"code":"import React,{useRef,useEffect,useState,useCallback}from'react';import{createPortal}from'react-dom';import{useMobile}from'../hooks/useMobile';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const FilterDropdown=/*#__PURE__*/React.memo(_ref=>{let{title,items,selectedItems,onSelectionChange,getItemColor,icon,textLabel}=_ref;const isActive=selectedItems.length>0;const dropdownRef=useRef(null);const contentRef=useRef(null);const[dropdownPosition,setDropdownPosition]=useState('bottom');const[horizontalPosition,setHorizontalPosition]=useState('left');const[portalContainer,setPortalContainer]=useState(null);const isMobile=useMobile();const closeTimeoutRef=useRef(null);const[isOpen,setIsOpen]=useState(false);// Функция для определения позиции dropdown\nconst updateDropdownPosition=useCallback(()=>{if(!dropdownRef.current||!contentRef.current)return;const dropdownRect=dropdownRef.current.getBoundingClientRect();const viewportHeight=window.innerHeight;const viewportWidth=window.innerWidth;// Оценка высоты контента (примерная)\nconst estimatedContentHeight=Math.min(items.length*30+80,300);// 30px на элемент + 80px для кнопок\n// Проверяем, помещается ли dropdown снизу\nconst spaceBelow=viewportHeight-dropdownRect.bottom;const spaceAbove=dropdownRect.top;if(spaceBelow<estimatedContentHeight&&spaceAbove>estimatedContentHeight){setDropdownPosition('top');}else{setDropdownPosition('bottom');}// Проверяем горизонтальное позиционирование для всех устройств\nconst dropdownWidth=isMobile?Math.min(250,viewportWidth-20):300;// Ограничиваем ширину на мобильных\nconst spaceRight=viewportWidth-dropdownRect.left;const spaceLeft=dropdownRect.right;// На мобильных устройствах приоритет отдаем центрированию\nif(isMobile){// Если dropdown шире, чем доступное пространство, центрируем его\nif(dropdownWidth>=viewportWidth-20){setHorizontalPosition('center');}else if(spaceRight<dropdownWidth&&spaceLeft>dropdownWidth){setHorizontalPosition('right');}else{setHorizontalPosition('left');}}else{// На десктопе используем старую логику\nif(spaceRight<dropdownWidth&&spaceLeft>dropdownWidth){setHorizontalPosition('right');}else{setHorizontalPosition('left');}}},[items.length,isMobile]);// Create portal container for mobile popups\nuseEffect(()=>{if(isMobile&&isOpen){const container=document.createElement('div');container.style.position='fixed';container.style.top='0';container.style.left='0';container.style.width='100%';container.style.height='100%';container.style.zIndex='10003';container.style.pointerEvents='auto';container.style.backgroundColor='rgba(0, 0, 0, 0.3)';// Semi-transparent overlay\n// Add click handler to close dropdown when clicking overlay\ncontainer.addEventListener('click',e=>{if(e.target===container){setIsOpen(false);}});document.body.appendChild(container);setPortalContainer(container);return()=>{if(container.parentNode){container.parentNode.removeChild(container);}setPortalContainer(null);};}},[isMobile,isOpen]);// Обновляем позицию dropdown при изменении размера окна или открытии\nuseEffect(()=>{if(!isOpen)return;const handleResize=()=>{updateDropdownPosition();};// Обновляем позицию при открытии\nsetTimeout(updateDropdownPosition,0);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[isOpen,updateDropdownPosition]);// Очистка таймера при размонтировании\nuseEffect(()=>{return()=>{if(closeTimeoutRef.current){clearTimeout(closeTimeoutRef.current);}};},[]);// Улучшенные обработчики для разных устройств\nconst handleMouseEnter=()=>{if(!isMobile&&!isOpen){// Очищаем таймер закрытия\nif(closeTimeoutRef.current){clearTimeout(closeTimeoutRef.current);closeTimeoutRef.current=null;}setIsOpen(true);}};const handleMouseLeave=()=>{if(!isMobile){// Добавляем задержку перед закрытием, чтобы избежать преждевременного закрытия\n// при быстром движении курсора\ncloseTimeoutRef.current=setTimeout(()=>{setIsOpen(false);},150);// Увеличиваем задержку до 150ms\n}};const handleClick=()=>{if(isMobile){setIsOpen(!isOpen);}};// Обработка клика вне dropdown для мобильных устройств\nuseEffect(()=>{const handleClickOutside=event=>{if(isMobile&&isOpen){var _dropdownRef$current,_contentRef$current;const target=event.target;const isClickInsideDropdown=(_dropdownRef$current=dropdownRef.current)===null||_dropdownRef$current===void 0?void 0:_dropdownRef$current.contains(target);const isClickInsideContent=(_contentRef$current=contentRef.current)===null||_contentRef$current===void 0?void 0:_contentRef$current.contains(target);if(!isClickInsideDropdown&&!isClickInsideContent){setIsOpen(false);}}};if(isMobile&&isOpen){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[isMobile,isOpen]);// Обработчики для контента dropdown\nconst handleContentMouseEnter=()=>{if(!isMobile){// Очищаем таймер закрытия при наведении на контент\nif(closeTimeoutRef.current){clearTimeout(closeTimeoutRef.current);closeTimeoutRef.current=null;}}};const handleContentMouseLeave=()=>{if(!isMobile){// Добавляем задержку перед закрытием контента\ncloseTimeoutRef.current=setTimeout(()=>{setIsOpen(false);},150);}};// Calculate popup position for mobile\nconst getMobilePopupPosition=()=>{if(!dropdownRef.current)return{top:'50%',left:'50%',transform:'translate(-50%, -50%)'};const buttonRect=dropdownRef.current.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;// Position dropdown below the button\nlet top=buttonRect.bottom+8;// 8px gap below button\nlet left=buttonRect.left;// Ensure dropdown doesn't go off-screen\nconst estimatedDropdownWidth=Math.min(250,viewportWidth-20);const estimatedDropdownHeight=Math.min(300,viewportHeight*0.6);// Adjust horizontal position if dropdown would go off-screen\nif(left+estimatedDropdownWidth>viewportWidth-10){left=viewportWidth-estimatedDropdownWidth-10;}if(left<10){left=10;}// If dropdown would go off-screen at the bottom, position it above the button\nif(top+estimatedDropdownHeight>viewportHeight-10){top=buttonRect.top-estimatedDropdownHeight-8;}// Ensure dropdown doesn't go off-screen at the top\nif(top<10){top=10;}return{top:`${top}px`,left:`${left}px`,transform:'none'};};// Render dropdown content\nconst renderDropdownContent=()=>{const mobilePopupStyle=isMobile?getMobilePopupPosition():{top:'',left:'',transform:''};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-dropdown-content\",ref:contentRef,onMouseEnter:handleContentMouseEnter,onMouseLeave:handleContentMouseLeave,role:\"listbox\",\"aria-label\":`Список ${title}`,\"aria-multiselectable\":\"true\",style:{position:isMobile?'fixed':'absolute',top:isMobile?mobilePopupStyle.top:dropdownPosition==='bottom'?'100%':'auto',bottom:isMobile?'auto':dropdownPosition==='top'?'100%':'auto',left:isMobile?mobilePopupStyle.left:horizontalPosition==='left'?'0':horizontalPosition==='center'?'50%':'auto',right:isMobile?'auto':horizontalPosition==='right'?'0':'auto',transform:isMobile?mobilePopupStyle.transform:horizontalPosition==='center'?'translateX(-50%)':'none',zIndex:isMobile?10003:1000,maxHeight:isMobile?'50vh':'300px',overflowY:'auto',display:'block',minWidth:isMobile?'200px':'250px',maxWidth:isMobile?'280px':'300px',width:isMobile?'auto':isMobile&&horizontalPosition==='center'?'calc(100vw - 40px)':'auto',background:'rgba(44, 24, 16, 0.98)',border:'2px solid rgba(244, 228, 193, 0.3)',borderRadius:isMobile?'12px':'6px',boxShadow:isMobile?'0 8px 32px rgba(0, 0, 0, 0.5)':'0 4px 12px rgba(0, 0, 0, 0.3)',backdropFilter:'blur(10px)',pointerEvents:isMobile?'auto':'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:isMobile?'0.8rem':'0.5rem',borderBottom:'1px solid rgba(139, 69, 19, 0.3)',display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onSelectionChange(items);},\"aria-label\":`Выбрать все ${title}`,style:{padding:isMobile?'0.5rem 0.8rem':'0.25rem 0.5rem',background:'#27ae60',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:isMobile?'0.8rem':'0.7rem',flex:isMobile?'1':'auto',minHeight:isMobile?'44px':'auto'},children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0432\\u0441\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onSelectionChange([]);},\"aria-label\":`Снять все ${title}`,style:{padding:isMobile?'0.5rem 0.8rem':'0.25rem 0.5rem',background:'#e74c3c',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:isMobile?'0.8rem':'0.7rem',flex:isMobile?'1':'auto',minHeight:isMobile?'44px':'auto'},children:\"\\u0421\\u043D\\u044F\\u0442\\u044C \\u0432\\u0441\\u0435\"})]}),items.map(item=>/*#__PURE__*/_jsxs(\"label\",{className:\"filter-checkbox\",onClick:e=>e.stopPropagation(),role:\"option\",\"aria-selected\":selectedItems.includes(item),style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:isMobile?'0.6rem 0.5rem':'0.4rem 0.5rem',cursor:'pointer',transition:'background-color 0.2s ease',borderRadius:'3px',margin:'0.1rem 0',minHeight:isMobile?'44px':'auto'// Минимальная высота для мобильных устройств\n},onMouseEnter:e=>{if(!isMobile){e.currentTarget.style.backgroundColor='rgba(139, 69, 19, 0.1)';}},onMouseLeave:e=>{if(!isMobile){e.currentTarget.style.backgroundColor='transparent';}},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.includes(item),onChange:e=>{e.stopPropagation();if(e.target.checked){onSelectionChange([...selectedItems,item]);}else{onSelectionChange(selectedItems.filter(i=>i!==item));}},\"aria-label\":`Выбрать ${item}`,style:{margin:0,cursor:'pointer'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:getItemColor?getItemColor(item):'#f4e4c1',fontWeight:getItemColor?'bold':'normal',fontSize:'0.8rem'},children:item})]},item))]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-dropdown\",ref:dropdownRef,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:[/*#__PURE__*/_jsxs(\"button\",{className:`filter-btn ${isActive?'active':''}`,style:{minWidth:isMobile?'140px':'120px',width:isMobile?'140px':'120px',padding:isMobile?'0.5rem 0.8rem':'0.3rem 0.6rem',display:'flex',alignItems:'center',gap:'0.3rem',background:isActive?'rgba(139, 69, 19, 0.15)':'rgba(139, 69, 19, 0.08)',border:`1px solid ${isActive?'rgba(139, 69, 19, 0.3)':'rgba(139, 69, 19, 0.2)'}`,borderRadius:'4px',color:'#f4e4c1',fontSize:isMobile?'0.9rem':'0.7rem',cursor:'pointer',transition:'all 0.2s ease',whiteSpace:'nowrap',justifyContent:'center'},onClick:handleClick,\"aria-haspopup\":\"listbox\",\"aria-expanded\":isOpen,\"aria-label\":`${title} - ${selectedItems.length} выбрано из ${items.length}`,children:[icon&&/*#__PURE__*/_jsx(\"span\",{className:\"filter-icon\",children:icon}),/*#__PURE__*/_jsx(\"span\",{className:\"filter-text\",style:{fontSize:isMobile?'0.8rem':'0.7rem',textAlign:'center',flex:1,overflow:'hidden',textOverflow:'ellipsis'},children:textLabel||title}),isActive&&/*#__PURE__*/_jsxs(\"span\",{className:\"filter-count\",style:{fontSize:isMobile?'0.7rem':'0.6rem',marginLeft:'auto'},children:[\"(\",selectedItems.length,\")\"]})]}),isOpen&&(isMobile&&portalContainer?(/*#__PURE__*/createPortal(renderDropdownContent(),portalContainer)):renderDropdownContent())]});});","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","createPortal","useMobile","jsx","_jsx","jsxs","_jsxs","FilterDropdown","memo","_ref","title","items","selectedItems","onSelectionChange","getItemColor","icon","textLabel","isActive","length","dropdownRef","contentRef","dropdownPosition","setDropdownPosition","horizontalPosition","setHorizontalPosition","portalContainer","setPortalContainer","isMobile","closeTimeoutRef","isOpen","setIsOpen","updateDropdownPosition","current","dropdownRect","getBoundingClientRect","viewportHeight","window","innerHeight","viewportWidth","innerWidth","estimatedContentHeight","Math","min","spaceBelow","bottom","spaceAbove","top","dropdownWidth","spaceRight","left","spaceLeft","right","container","document","createElement","style","position","width","height","zIndex","pointerEvents","backgroundColor","addEventListener","e","target","body","appendChild","parentNode","removeChild","handleResize","setTimeout","removeEventListener","clearTimeout","handleMouseEnter","handleMouseLeave","handleClick","handleClickOutside","event","_dropdownRef$current","_contentRef$current","isClickInsideDropdown","contains","isClickInsideContent","handleContentMouseEnter","handleContentMouseLeave","getMobilePopupPosition","transform","buttonRect","estimatedDropdownWidth","estimatedDropdownHeight","renderDropdownContent","mobilePopupStyle","className","ref","onMouseEnter","onMouseLeave","role","maxHeight","overflowY","display","minWidth","maxWidth","background","border","borderRadius","boxShadow","backdropFilter","children","padding","borderBottom","gap","flexWrap","onClick","stopPropagation","color","cursor","fontSize","flex","minHeight","map","item","includes","alignItems","transition","margin","currentTarget","type","checked","onChange","filter","i","fontWeight","whiteSpace","justifyContent","textAlign","overflow","textOverflow","marginLeft"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/FilterDropdown.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useMobile } from '../hooks/useMobile'\r\n\r\ninterface FilterDropdownProps {\r\n  title: string\r\n  items: string[]\r\n  selectedItems: string[]\r\n  onSelectionChange: (items: string[]) => void\r\n  getItemColor?: (item: string) => string\r\n  icon?: React.ReactNode\r\n  textLabel?: string\r\n}\r\n\r\nexport const FilterDropdown: React.FC<FilterDropdownProps> = React.memo(({ \r\n  title, \r\n  items, \r\n  selectedItems, \r\n  onSelectionChange, \r\n  getItemColor,\r\n  icon,\r\n  textLabel\r\n}) => {\r\n  const isActive = selectedItems.length > 0\r\n  const dropdownRef = useRef<HTMLDivElement>(null)\r\n  const contentRef = useRef<HTMLDivElement>(null)\r\n  const [dropdownPosition, setDropdownPosition] = useState<'bottom' | 'top'>('bottom')\r\n  const [horizontalPosition, setHorizontalPosition] = useState<'left' | 'right' | 'center'>('left')\r\n  const [portalContainer, setPortalContainer] = useState<HTMLElement | null>(null)\r\n  const isMobile = useMobile()\r\n  const closeTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  \r\n  // Функция для определения позиции dropdown\r\n  const updateDropdownPosition = useCallback(() => {\r\n    if (!dropdownRef.current || !contentRef.current) return\r\n    \r\n    const dropdownRect = dropdownRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    \r\n    // Оценка высоты контента (примерная)\r\n    const estimatedContentHeight = Math.min(items.length * 30 + 80, 300) // 30px на элемент + 80px для кнопок\r\n    \r\n    // Проверяем, помещается ли dropdown снизу\r\n    const spaceBelow = viewportHeight - dropdownRect.bottom\r\n    const spaceAbove = dropdownRect.top\r\n    \r\n    if (spaceBelow < estimatedContentHeight && spaceAbove > estimatedContentHeight) {\r\n      setDropdownPosition('top')\r\n    } else {\r\n      setDropdownPosition('bottom')\r\n    }\r\n    \r\n    // Проверяем горизонтальное позиционирование для всех устройств\r\n    const dropdownWidth = isMobile ? Math.min(250, viewportWidth - 20) : 300 // Ограничиваем ширину на мобильных\r\n    const spaceRight = viewportWidth - dropdownRect.left\r\n    const spaceLeft = dropdownRect.right\r\n    \r\n    // На мобильных устройствах приоритет отдаем центрированию\r\n    if (isMobile) {\r\n      // Если dropdown шире, чем доступное пространство, центрируем его\r\n      if (dropdownWidth >= viewportWidth - 20) {\r\n        setHorizontalPosition('center')\r\n      } else if (spaceRight < dropdownWidth && spaceLeft > dropdownWidth) {\r\n        setHorizontalPosition('right')\r\n      } else {\r\n        setHorizontalPosition('left')\r\n      }\r\n    } else {\r\n      // На десктопе используем старую логику\r\n      if (spaceRight < dropdownWidth && spaceLeft > dropdownWidth) {\r\n        setHorizontalPosition('right')\r\n      } else {\r\n        setHorizontalPosition('left')\r\n      }\r\n    }\r\n  }, [items.length, isMobile])\r\n  \r\n\r\n  \r\n  // Create portal container for mobile popups\r\n  useEffect(() => {\r\n    if (isMobile && isOpen) {\r\n      const container = document.createElement('div')\r\n      container.style.position = 'fixed'\r\n      container.style.top = '0'\r\n      container.style.left = '0'\r\n      container.style.width = '100%'\r\n      container.style.height = '100%'\r\n      container.style.zIndex = '10003'\r\n      container.style.pointerEvents = 'auto'\r\n      container.style.backgroundColor = 'rgba(0, 0, 0, 0.3)' // Semi-transparent overlay\r\n      \r\n      // Add click handler to close dropdown when clicking overlay\r\n      container.addEventListener('click', (e) => {\r\n        if (e.target === container) {\r\n          setIsOpen(false)\r\n        }\r\n      })\r\n      \r\n      document.body.appendChild(container)\r\n      setPortalContainer(container)\r\n      \r\n      return () => {\r\n        if (container.parentNode) {\r\n          container.parentNode.removeChild(container)\r\n        }\r\n        setPortalContainer(null)\r\n      }\r\n    }\r\n  }, [isMobile, isOpen])\r\n\r\n  // Обновляем позицию dropdown при изменении размера окна или открытии\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n    \r\n    const handleResize = () => {\r\n      updateDropdownPosition()\r\n    }\r\n    \r\n    // Обновляем позицию при открытии\r\n    setTimeout(updateDropdownPosition, 0)\r\n    \r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [isOpen, updateDropdownPosition])\r\n  \r\n  // Очистка таймера при размонтировании\r\n  useEffect(() => {\r\n    return () => {\r\n      if (closeTimeoutRef.current) {\r\n        clearTimeout(closeTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n  \r\n  // Улучшенные обработчики для разных устройств\r\n  const handleMouseEnter = () => {\r\n    if (!isMobile && !isOpen) {\r\n      // Очищаем таймер закрытия\r\n      if (closeTimeoutRef.current) {\r\n        clearTimeout(closeTimeoutRef.current)\r\n        closeTimeoutRef.current = null\r\n      }\r\n      \r\n      setIsOpen(true)\r\n    }\r\n  }\r\n  \r\n  const handleMouseLeave = () => {\r\n    if (!isMobile) {\r\n      // Добавляем задержку перед закрытием, чтобы избежать преждевременного закрытия\r\n      // при быстром движении курсора\r\n      closeTimeoutRef.current = setTimeout(() => {\r\n        setIsOpen(false)\r\n      }, 150) // Увеличиваем задержку до 150ms\r\n    }\r\n  }\r\n  \r\n  const handleClick = () => {\r\n    if (isMobile) {\r\n      setIsOpen(!isOpen)\r\n    }\r\n  }\r\n  \r\n  // Обработка клика вне dropdown для мобильных устройств\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (isMobile && isOpen) {\r\n        const target = event.target as Node\r\n        const isClickInsideDropdown = dropdownRef.current?.contains(target)\r\n        const isClickInsideContent = contentRef.current?.contains(target)\r\n        \r\n        if (!isClickInsideDropdown && !isClickInsideContent) {\r\n          setIsOpen(false)\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (isMobile && isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n    }\r\n    \r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [isMobile, isOpen])\r\n  \r\n\r\n  \r\n  // Обработчики для контента dropdown\r\n  const handleContentMouseEnter = () => {\r\n    if (!isMobile) {\r\n      // Очищаем таймер закрытия при наведении на контент\r\n      if (closeTimeoutRef.current) {\r\n        clearTimeout(closeTimeoutRef.current)\r\n        closeTimeoutRef.current = null\r\n      }\r\n    }\r\n  }\r\n  \r\n  const handleContentMouseLeave = () => {\r\n    if (!isMobile) {\r\n      // Добавляем задержку перед закрытием контента\r\n      closeTimeoutRef.current = setTimeout(() => {\r\n        setIsOpen(false)\r\n      }, 150)\r\n    }\r\n  }\r\n\r\n  // Calculate popup position for mobile\r\n  const getMobilePopupPosition = () => {\r\n    if (!dropdownRef.current) return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' }\r\n    \r\n    const buttonRect = dropdownRef.current.getBoundingClientRect()\r\n    const viewportWidth = window.innerWidth\r\n    const viewportHeight = window.innerHeight\r\n    \r\n    // Position dropdown below the button\r\n    let top = buttonRect.bottom + 8 // 8px gap below button\r\n    let left = buttonRect.left\r\n    \r\n    // Ensure dropdown doesn't go off-screen\r\n    const estimatedDropdownWidth = Math.min(250, viewportWidth - 20)\r\n    const estimatedDropdownHeight = Math.min(300, viewportHeight * 0.6)\r\n    \r\n    // Adjust horizontal position if dropdown would go off-screen\r\n    if (left + estimatedDropdownWidth > viewportWidth - 10) {\r\n      left = viewportWidth - estimatedDropdownWidth - 10\r\n    }\r\n    if (left < 10) {\r\n      left = 10\r\n    }\r\n    \r\n    // If dropdown would go off-screen at the bottom, position it above the button\r\n    if (top + estimatedDropdownHeight > viewportHeight - 10) {\r\n      top = buttonRect.top - estimatedDropdownHeight - 8\r\n    }\r\n    \r\n    // Ensure dropdown doesn't go off-screen at the top\r\n    if (top < 10) {\r\n      top = 10\r\n    }\r\n    \r\n    return {\r\n      top: `${top}px`,\r\n      left: `${left}px`,\r\n      transform: 'none'\r\n    }\r\n  }\r\n\r\n  // Render dropdown content\r\n  const renderDropdownContent = () => {\r\n    const mobilePopupStyle = isMobile ? getMobilePopupPosition() : { top: '', left: '', transform: '' }\r\n    \r\n    return (\r\n      <div \r\n        className=\"filter-dropdown-content\"\r\n        ref={contentRef}\r\n        onMouseEnter={handleContentMouseEnter}\r\n        onMouseLeave={handleContentMouseLeave}\r\n        role=\"listbox\"\r\n        aria-label={`Список ${title}`}\r\n        aria-multiselectable=\"true\"\r\n        style={{\r\n          position: isMobile ? 'fixed' : 'absolute',\r\n          top: isMobile ? mobilePopupStyle.top : (dropdownPosition === 'bottom' ? '100%' : 'auto'),\r\n          bottom: isMobile ? 'auto' : (dropdownPosition === 'top' ? '100%' : 'auto'),\r\n          left: isMobile ? mobilePopupStyle.left : (horizontalPosition === 'left' ? '0' : horizontalPosition === 'center' ? '50%' : 'auto'),\r\n          right: isMobile ? 'auto' : (horizontalPosition === 'right' ? '0' : 'auto'),\r\n          transform: isMobile ? mobilePopupStyle.transform : (horizontalPosition === 'center' ? 'translateX(-50%)' : 'none'),\r\n          zIndex: isMobile ? 10003 : 1000,\r\n          maxHeight: isMobile ? '50vh' : '300px',\r\n          overflowY: 'auto',\r\n          display: 'block',\r\n          minWidth: isMobile ? '200px' : '250px',\r\n          maxWidth: isMobile ? '280px' : '300px',\r\n          width: isMobile ? 'auto' : (isMobile && horizontalPosition === 'center' ? 'calc(100vw - 40px)' : 'auto'),\r\n          background: 'rgba(44, 24, 16, 0.98)',\r\n          border: '2px solid rgba(244, 228, 193, 0.3)',\r\n          borderRadius: isMobile ? '12px' : '6px',\r\n          boxShadow: isMobile ? '0 8px 32px rgba(0, 0, 0, 0.5)' : '0 4px 12px rgba(0, 0, 0, 0.3)',\r\n          backdropFilter: 'blur(10px)',\r\n          pointerEvents: isMobile ? 'auto' : 'auto'\r\n        }}\r\n      >\r\n        <div style={{ \r\n          padding: isMobile ? '0.8rem' : '0.5rem', \r\n          borderBottom: '1px solid rgba(139, 69, 19, 0.3)',\r\n          display: 'flex',\r\n          gap: '0.5rem',\r\n          flexWrap: 'wrap'\r\n        }}>\r\n          <button\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              onSelectionChange(items)\r\n            }}\r\n            aria-label={`Выбрать все ${title}`}\r\n            style={{\r\n              padding: isMobile ? '0.5rem 0.8rem' : '0.25rem 0.5rem',\r\n              background: '#27ae60',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: isMobile ? '0.8rem' : '0.7rem',\r\n              flex: isMobile ? '1' : 'auto',\r\n              minHeight: isMobile ? '44px' : 'auto'\r\n            }}\r\n          >\r\n            Выбрать все\r\n          </button>\r\n          <button\r\n            onClick={(e) => {\r\n              e.stopPropagation()\r\n              onSelectionChange([])\r\n            }}\r\n            aria-label={`Снять все ${title}`}\r\n            style={{\r\n              padding: isMobile ? '0.5rem 0.8rem' : '0.25rem 0.5rem',\r\n              background: '#e74c3c',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: isMobile ? '0.8rem' : '0.7rem',\r\n              flex: isMobile ? '1' : 'auto',\r\n              minHeight: isMobile ? '44px' : 'auto'\r\n            }}\r\n          >\r\n            Снять все\r\n          </button>\r\n        </div>\r\n        {items.map(item => (\r\n          <label \r\n            key={item} \r\n            className=\"filter-checkbox\" \r\n            onClick={(e) => e.stopPropagation()}\r\n            role=\"option\"\r\n            aria-selected={selectedItems.includes(item)}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: isMobile ? '0.6rem 0.5rem' : '0.4rem 0.5rem',\r\n              cursor: 'pointer',\r\n              transition: 'background-color 0.2s ease',\r\n              borderRadius: '3px',\r\n              margin: '0.1rem 0',\r\n              minHeight: isMobile ? '44px' : 'auto' // Минимальная высота для мобильных устройств\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              if (!isMobile) {\r\n                e.currentTarget.style.backgroundColor = 'rgba(139, 69, 19, 0.1)'\r\n              }\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              if (!isMobile) {\r\n                e.currentTarget.style.backgroundColor = 'transparent'\r\n              }\r\n            }}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectedItems.includes(item)}\r\n              onChange={(e) => {\r\n                e.stopPropagation()\r\n                if (e.target.checked) {\r\n                  onSelectionChange([...selectedItems, item])\r\n                } else {\r\n                  onSelectionChange(selectedItems.filter(i => i !== item))\r\n                }\r\n              }}\r\n              aria-label={`Выбрать ${item}`}\r\n              style={{\r\n                margin: 0,\r\n                cursor: 'pointer'\r\n              }}\r\n            />\r\n            <span style={{ \r\n              color: getItemColor ? getItemColor(item) : '#f4e4c1',\r\n              fontWeight: getItemColor ? 'bold' : 'normal',\r\n              fontSize: '0.8rem'\r\n            }}>\r\n              {item}\r\n            </span>\r\n          </label>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <div \r\n      className=\"filter-dropdown\" \r\n      ref={dropdownRef}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <button \r\n        className={`filter-btn ${isActive ? 'active' : ''}`}\r\n                 style={{ \r\n           minWidth: isMobile ? '140px' : '120px',\r\n           width: isMobile ? '140px' : '120px',\r\n           padding: isMobile ? '0.5rem 0.8rem' : '0.3rem 0.6rem',\r\n           display: 'flex', \r\n           alignItems: 'center', \r\n           gap: '0.3rem',\r\n           background: isActive ? 'rgba(139, 69, 19, 0.15)' : 'rgba(139, 69, 19, 0.08)',\r\n           border: `1px solid ${isActive ? 'rgba(139, 69, 19, 0.3)' : 'rgba(139, 69, 19, 0.2)'}`,\r\n           borderRadius: '4px',\r\n           color: '#f4e4c1',\r\n           fontSize: isMobile ? '0.9rem' : '0.7rem',\r\n           cursor: 'pointer',\r\n           transition: 'all 0.2s ease',\r\n           whiteSpace: 'nowrap',\r\n           justifyContent: 'center'\r\n         }}\r\n        onClick={handleClick}\r\n        aria-haspopup=\"listbox\"\r\n        aria-expanded={isOpen}\r\n        aria-label={`${title} - ${selectedItems.length} выбрано из ${items.length}`}\r\n      >\r\n                 {icon && <span className=\"filter-icon\">{icon}</span>}\r\n         <span className=\"filter-text\" style={{ \r\n           fontSize: isMobile ? '0.8rem' : '0.7rem',\r\n           textAlign: 'center',\r\n           flex: 1,\r\n           overflow: 'hidden',\r\n           textOverflow: 'ellipsis'\r\n         }}>\r\n           {textLabel || title}\r\n         </span>\r\n         {isActive && (\r\n           <span className=\"filter-count\" style={{ \r\n             fontSize: isMobile ? '0.7rem' : '0.6rem',\r\n             marginLeft: 'auto'\r\n           }}>\r\n             ({selectedItems.length})\r\n           </span>\r\n         )}\r\n      </button>\r\n             {isOpen && (\r\n         isMobile && portalContainer ? (\r\n           createPortal(renderDropdownContent(), portalContainer)\r\n         ) : (\r\n           renderDropdownContent()\r\n         )\r\n       )}\r\n    </div>\r\n  )\r\n})"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}