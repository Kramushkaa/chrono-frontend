{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Selecty\\\\Documents\\\\PetProjects\\\\chronoline-frontend\\\\src\\\\components\\\\UserMenu.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useAuth } from '../context';\nimport { useNavigate } from 'react-router-dom';\nimport { LoginForm } from './Auth/LoginForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function UserMenu({\n  style,\n  className\n}) {\n  _s();\n  const {\n    isAuthenticated,\n    user,\n    logout\n  } = useAuth();\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const ref = useRef(null);\n  useEffect(() => {\n    const onDoc = e => {\n      if (!ref.current) return;\n      if (!ref.current.contains(e.target)) setOpen(false);\n    };\n    document.addEventListener('mousedown', onDoc);\n    return () => document.removeEventListener('mousedown', onDoc);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    className: className,\n    style: {\n      position: 'relative',\n      ...style\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(v => !v),\n      \"aria-haspopup\": \"menu\",\n      \"aria-expanded\": open,\n      title: isAuthenticated ? (user === null || user === void 0 ? void 0 : user.username) || (user === null || user === void 0 ? void 0 : user.email) || 'Профиль' : 'Войти',\n      style: {\n        padding: '6px 10px',\n        background: 'rgba(244, 228, 193, 0.12)',\n        border: '1px solid rgba(244, 228, 193, 0.3)',\n        color: '#f4e4c1',\n        borderRadius: 6,\n        cursor: 'pointer'\n      },\n      children: isAuthenticated ? (user === null || user === void 0 ? void 0 : user.username) || 'Профиль' : 'Войти'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n      role: \"menu\",\n      style: {\n        position: 'absolute',\n        right: 0,\n        marginTop: 6,\n        minWidth: 260,\n        background: 'rgba(29, 29, 27, 0.98)',\n        border: '1px solid rgba(244, 228, 193, 0.15)',\n        borderRadius: 8,\n        padding: 12,\n        boxShadow: '0 6px 24px rgba(0,0,0,0.4)',\n        zIndex: 1000\n      },\n      children: isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 600,\n            color: '#f4e4c1'\n          },\n          children: (user === null || user === void 0 ? void 0 : user.username) || (user === null || user === void 0 ? void 0 : user.email)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setOpen(false);\n            navigate('/profile');\n          },\n          style: {\n            padding: '6px 8px',\n            borderRadius: 6,\n            cursor: 'pointer'\n          },\n          children: \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: async () => {\n            setOpen(false);\n            await logout();\n          },\n          style: {\n            padding: '6px 8px',\n            borderRadius: 6,\n            cursor: 'pointer'\n          },\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gap: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(LoginForm, {\n          onSuccess: () => setOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setOpen(false);\n            navigate('/register');\n          },\n          style: {\n            padding: '6px 8px',\n            borderRadius: 6,\n            cursor: 'pointer'\n          },\n          children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n_s(UserMenu, \"SFhhVQIiRYMt04MiUM2d4WCCw48=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = UserMenu;\nvar _c;\n$RefreshReg$(_c, \"UserMenu\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useAuth","useNavigate","LoginForm","jsxDEV","_jsxDEV","UserMenu","style","className","_s","isAuthenticated","user","logout","open","setOpen","navigate","ref","onDoc","e","current","contains","target","document","addEventListener","removeEventListener","position","children","onClick","v","title","username","email","padding","background","border","color","borderRadius","cursor","fileName","_jsxFileName","lineNumber","columnNumber","role","right","marginTop","minWidth","boxShadow","zIndex","display","gap","fontWeight","onSuccess","_c","$RefreshReg$"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/UserMenu.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useAuth } from '../context';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LoginForm } from './Auth/LoginForm';\r\n\r\ntype UserMenuProps = {\r\n  style?: React.CSSProperties;\r\n  className?: string;\r\n};\r\n\r\nexport function UserMenu({ style, className }: UserMenuProps) {\r\n  const { isAuthenticated, user, logout } = useAuth();\r\n  const [open, setOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const onDoc = (e: MouseEvent) => {\r\n      if (!ref.current) return;\r\n      if (!ref.current.contains(e.target as Node)) setOpen(false);\r\n    };\r\n    document.addEventListener('mousedown', onDoc);\r\n    return () => document.removeEventListener('mousedown', onDoc);\r\n  }, []);\r\n\r\n  return (\r\n    <div ref={ref} className={className} style={{ position: 'relative', ...style }}>\r\n      <button\r\n        onClick={() => setOpen((v) => !v)}\r\n        aria-haspopup=\"menu\"\r\n        aria-expanded={open}\r\n        title={isAuthenticated ? (user?.username || user?.email || 'Профиль') : 'Войти'}\r\n        style={{\r\n          padding: '6px 10px',\r\n          background: 'rgba(244, 228, 193, 0.12)',\r\n          border: '1px solid rgba(244, 228, 193, 0.3)',\r\n          color: '#f4e4c1',\r\n          borderRadius: 6,\r\n          cursor: 'pointer',\r\n        }}\r\n      >\r\n        {isAuthenticated ? (user?.username || 'Профиль') : 'Войти'}\r\n      </button>\r\n\r\n      {open && (\r\n        <div\r\n          role=\"menu\"\r\n          style={{\r\n            position: 'absolute',\r\n            right: 0,\r\n            marginTop: 6,\r\n            minWidth: 260,\r\n            background: 'rgba(29, 29, 27, 0.98)',\r\n            border: '1px solid rgba(244, 228, 193, 0.15)',\r\n            borderRadius: 8,\r\n            padding: 12,\r\n            boxShadow: '0 6px 24px rgba(0,0,0,0.4)',\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          {isAuthenticated ? (\r\n            <div style={{ display: 'grid', gap: 8 }}>\r\n              <div style={{ fontWeight: 600, color: '#f4e4c1' }}>\r\n                {user?.username || user?.email}\r\n              </div>\r\n              <button\r\n                onClick={() => {\r\n                  setOpen(false);\r\n                  navigate('/profile');\r\n                }}\r\n                style={{ padding: '6px 8px', borderRadius: 6, cursor: 'pointer' }}\r\n              >\r\n                Профиль\r\n              </button>\r\n              <button\r\n                onClick={async () => {\r\n                  setOpen(false);\r\n                  await logout();\r\n                }}\r\n                style={{ padding: '6px 8px', borderRadius: 6, cursor: 'pointer' }}\r\n              >\r\n                Выйти\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div style={{ display: 'grid', gap: 10 }}>\r\n              <LoginForm onSuccess={() => setOpen(false)} />\r\n              <button\r\n                onClick={() => {\r\n                  setOpen(false);\r\n                  navigate('/register');\r\n                }}\r\n                style={{ padding: '6px 8px', borderRadius: 6, cursor: 'pointer' }}\r\n              >\r\n                Зарегистрироваться\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}