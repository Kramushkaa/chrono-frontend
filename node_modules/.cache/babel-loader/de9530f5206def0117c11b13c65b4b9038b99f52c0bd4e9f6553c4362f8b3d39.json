{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useAuth}from'../context/AuthContext';import{getProfile}from'../services/auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Profile(){const{state,logout}=useAuth();const[loading,setLoading]=useState(false);const[profile,setProfile]=useState(null);const[error,setError]=useState(null);useEffect(()=>{(async()=>{setLoading(true);setError(null);try{var _data$data;const token=state.accessToken;if(!token)throw new Error('Нет токена доступа');const data=await getProfile(token);setProfile((data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.user)||null);}catch(e){setError('Не удалось загрузить профиль');}finally{setLoading(false);}})();},[state.accessToken]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error});return/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:16},children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:8},children:\"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"}),profile?/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:6},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profile.email]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F:\"}),\" \",profile.username||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0420\\u043E\\u043B\\u044C:\"}),\" \",profile.role]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D:\"}),\" \",profile.email_verified?'да':'нет']})]}):/*#__PURE__*/_jsx(\"div\",{children:\"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"})]}),/*#__PURE__*/_jsxs(\"section\",{style:{display:'grid',gap:8},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:8,maxWidth:420},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",defaultValue:(profile===null||profile===void 0?void 0:profile.username)||''}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\",defaultValue:(profile===null||profile===void 0?void 0:profile.full_name)||''}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"URL \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430\",defaultValue:(profile===null||profile===void 0?void 0:profile.avatar_url)||''}),/*#__PURE__*/_jsx(\"button\",{disabled:true,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C (\\u0441\\u043A\\u043E\\u0440\\u043E)\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{style:{display:'grid',gap:8},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0421\\u043C\\u0435\\u043D\\u0430 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:8,maxWidth:420},children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{disabled:true,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C (\\u0441\\u043A\\u043E\\u0440\\u043E)\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","useAuth","getProfile","jsx","_jsx","jsxs","_jsxs","Profile","state","logout","loading","setLoading","profile","setProfile","error","setError","_data$data","token","accessToken","Error","data","user","e","children","style","color","display","gap","marginBottom","email","username","role","email_verified","maxWidth","placeholder","defaultValue","full_name","avatar_url","disabled","type","onClick"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/Profile.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { getProfile } from '../services/auth';\r\n\r\nexport function Profile() {\r\n  const { state, logout } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [profile, setProfile] = useState<any>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const token = state.accessToken;\r\n        if (!token) throw new Error('Нет токена доступа');\r\n        const data = await getProfile(token);\r\n        setProfile(data?.data?.user || null);\r\n      } catch (e) {\r\n        setError('Не удалось загрузить профиль');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [state.accessToken]);\r\n\r\n  if (loading) return <div>Загрузка профиля...</div>;\r\n  if (error) return <div style={{ color: 'red' }}>{error}</div>;\r\n\r\n  return (\r\n    <div style={{ display: 'grid', gap: 16 }}>\r\n      <section>\r\n        <h3 style={{ marginBottom: 8 }}>Личный кабинет</h3>\r\n        {profile ? (\r\n          <div style={{ display: 'grid', gap: 6 }}>\r\n            <div><strong>Email:</strong> {profile.email}</div>\r\n            <div><strong>Имя пользователя:</strong> {profile.username || '—'}</div>\r\n            <div><strong>Роль:</strong> {profile.role}</div>\r\n            <div><strong>Email подтвержден:</strong> {profile.email_verified ? 'да' : 'нет'}</div>\r\n          </div>\r\n        ) : (\r\n          <div>Нет данных профиля</div>\r\n        )}\r\n      </section>\r\n\r\n      <section style={{ display: 'grid', gap: 8 }}>\r\n        <h4>Редактирование профиля</h4>\r\n        <div style={{ display: 'grid', gap: 8, maxWidth: 420 }}>\r\n          <input placeholder=\"Имя пользователя\" defaultValue={profile?.username || ''} />\r\n          <input placeholder=\"Полное имя\" defaultValue={profile?.full_name || ''} />\r\n          <input placeholder=\"URL аватара\" defaultValue={profile?.avatar_url || ''} />\r\n          <button disabled>Сохранить (скоро)</button>\r\n        </div>\r\n      </section>\r\n\r\n      <section style={{ display: 'grid', gap: 8 }}>\r\n        <h4>Смена пароля</h4>\r\n        <div style={{ display: 'grid', gap: 8, maxWidth: 420 }}>\r\n          <input type=\"password\" placeholder=\"Текущий пароль\" />\r\n          <input type=\"password\" placeholder=\"Новый пароль\" />\r\n          <input type=\"password\" placeholder=\"Повтор нового пароля\" />\r\n          <button disabled>Изменить пароль (скоро)</button>\r\n        </div>\r\n      </section>\r\n\r\n      <div>\r\n        <button onClick={logout}>Выйти</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}