{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getBackendInfo,testBackendConnection}from'../services/api';import'./BackendInfo.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const BackendInfo=_ref=>{let{className=''}=_ref;const backendInfo=getBackendInfo();const[isConnected,setIsConnected]=useState(null);const[isTesting,setIsTesting]=useState(false);const[showDetails,setShowDetails]=useState(false);// –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\nuseEffect(()=>{testConnection();},[backendInfo.baseUrl]);const testConnection=async()=>{setIsTesting(true);try{const connected=await testBackendConnection();setIsConnected(connected);}catch(error){console.error('Connection test failed:',error);setIsConnected(false);}finally{setIsTesting(false);}};const getStatusIcon=()=>{if(isTesting)return'üîÑ';if(isConnected===null)return'‚ùì';return isConnected?'‚úÖ':'‚ùå';};const getStatusText=()=>{if(isTesting)return'–ü—Ä–æ–≤–µ—Ä–∫–∞...';if(isConnected===null)return'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';return isConnected?'–ü–æ–¥–∫–ª—é—á–µ–Ω':'–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω';};const getBackendType=()=>{return backendInfo.isLocal?'–õ–æ–∫–∞–ª—å–Ω—ã–π':'–£–¥–∞–ª–µ–Ω–Ω—ã–π';};const getBackendColor=()=>{return backendInfo.isLocal?'#4CAF50':'#2196F3';};return/*#__PURE__*/_jsxs(\"div\",{className:`backend-info ${className}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backend-header\",onClick:()=>setShowDetails(!showDetails),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backend-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:getStatusIcon()}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:getStatusText()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"backend-type\",style:{color:getBackendColor()},children:[getBackendType(),\" Backend\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"test-button\",onClick:e=>{e.stopPropagation();testConnection();},disabled:isTesting,children:isTesting?'üîÑ':'üîÑ'})]}),showDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"backend-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"URL:\"}),\" \",backendInfo.baseUrl]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0438\\u043F:\"}),\" \",getBackendType()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),\" \",getStatusText()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0430\\u0439\\u043C\\u0430\\u0443\\u0442:\"}),\" \",backendInfo.config.timeout,\"ms\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u044B:\"}),\" \",backendInfo.config.retries]}),/*#__PURE__*/_jsxs(\"div\",{className:\"backend-tips\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCA1 \\u041A\\u0430\\u043A \\u043F\\u0435\\u0440\\u0435\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C\\u0441\\u044F:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0444\\u0430\\u0439\\u043B \",/*#__PURE__*/_jsx(\"code\",{children:\".env.local\"}),\" \\u0432 \\u043A\\u043E\\u0440\\u043D\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435: \",/*#__PURE__*/_jsx(\"code\",{children:\"REACT_APP_USE_LOCAL_BACKEND=true\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u041F\\u0435\\u0440\\u0435\\u0437\\u0430\\u043F\\u0443\\u0441\\u0442\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u0423\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u0441\\u044C, \\u0447\\u0442\\u043E \\u043B\\u043E\\u043A\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 backend \\u0437\\u0430\\u043F\\u0443\\u0449\\u0435\\u043D \\u043D\\u0430 \\u043F\\u043E\\u0440\\u0442\\u0443 3001\"})]})]})]})]});};","map":{"version":3,"names":["React","useState","useEffect","getBackendInfo","testBackendConnection","jsx","_jsx","jsxs","_jsxs","BackendInfo","_ref","className","backendInfo","isConnected","setIsConnected","isTesting","setIsTesting","showDetails","setShowDetails","testConnection","baseUrl","connected","error","console","getStatusIcon","getStatusText","getBackendType","isLocal","getBackendColor","children","onClick","style","color","e","stopPropagation","disabled","config","timeout","retries"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/components/BackendInfo.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getBackendInfo, testBackendConnection } from '../services/api';\nimport './BackendInfo.css';\n\ninterface BackendInfoProps {\n  className?: string;\n}\n\nexport const BackendInfo: React.FC<BackendInfoProps> = ({ className = '' }) => {\n  const backendInfo = getBackendInfo();\n  const [isConnected, setIsConnected] = useState<boolean | null>(null);\n  const [isTesting, setIsTesting] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n\n  // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n  useEffect(() => {\n    testConnection();\n  }, [backendInfo.baseUrl]);\n\n  const testConnection = async () => {\n    setIsTesting(true);\n    try {\n      const connected = await testBackendConnection();\n      setIsConnected(connected);\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      setIsConnected(false);\n    } finally {\n      setIsTesting(false);\n    }\n  };\n\n  const getStatusIcon = () => {\n    if (isTesting) return 'üîÑ';\n    if (isConnected === null) return '‚ùì';\n    return isConnected ? '‚úÖ' : '‚ùå';\n  };\n\n  const getStatusText = () => {\n    if (isTesting) return '–ü—Ä–æ–≤–µ—Ä–∫–∞...';\n    if (isConnected === null) return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';\n    return isConnected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω' : '–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω';\n  };\n\n  const getBackendType = () => {\n    return backendInfo.isLocal ? '–õ–æ–∫–∞–ª—å–Ω—ã–π' : '–£–¥–∞–ª–µ–Ω–Ω—ã–π';\n  };\n\n  const getBackendColor = () => {\n    return backendInfo.isLocal ? '#4CAF50' : '#2196F3';\n  };\n\n  return (\n    <div className={`backend-info ${className}`}>\n      <div className=\"backend-header\" onClick={() => setShowDetails(!showDetails)}>\n        <div className=\"backend-status\">\n          <span className=\"status-icon\">{getStatusIcon()}</span>\n          <span className=\"status-text\">{getStatusText()}</span>\n        </div>\n        <div className=\"backend-type\" style={{ color: getBackendColor() }}>\n          {getBackendType()} Backend\n        </div>\n        <button \n          className=\"test-button\"\n          onClick={(e) => {\n            e.stopPropagation();\n            testConnection();\n          }}\n          disabled={isTesting}\n        >\n          {isTesting ? 'üîÑ' : 'üîÑ'}\n        </button>\n      </div>\n\n      {showDetails && (\n        <div className=\"backend-details\">\n          <div className=\"detail-item\">\n            <strong>URL:</strong> {backendInfo.baseUrl}\n          </div>\n          <div className=\"detail-item\">\n            <strong>–¢–∏–ø:</strong> {getBackendType()}\n          </div>\n          <div className=\"detail-item\">\n            <strong>–°—Ç–∞—Ç—É—Å:</strong> {getStatusText()}\n          </div>\n          <div className=\"detail-item\">\n            <strong>–¢–∞–π–º–∞—É—Ç:</strong> {backendInfo.config.timeout}ms\n          </div>\n          <div className=\"detail-item\">\n            <strong>–ü–æ–≤—Ç–æ—Ä—ã:</strong> {backendInfo.config.retries}\n          </div>\n          \n          <div className=\"backend-tips\">\n            <h4>üí° –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è:</h4>\n            <ul>\n              <li>–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª <code>.env.local</code> –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞</li>\n              <li>–î–æ–±–∞–≤—å—Ç–µ: <code>REACT_APP_USE_LOCAL_BACKEND=true</code></li>\n              <li>–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>\n              <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001</li>\n            </ul>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}