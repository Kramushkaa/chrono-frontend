{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Selecty\\\\Documents\\\\PetProjects\\\\chronoline-frontend\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom';\nimport ProfilePage from './pages/ProfilePage';\nimport { AppHeader } from './components/AppHeader';\nimport { Timeline } from './components/Timeline';\nimport { Tooltips } from './components/Tooltips';\nimport { MobilePersonPanel } from './components/MobilePersonPanel';\nimport { MainMenu } from './components/MainMenu';\nimport { AuthProvider, useAuth } from './context';\nimport { LoginForm } from './components/Auth/LoginForm';\nimport { RegisterForm } from './components/Auth/RegisterForm';\nimport { Profile } from './components/Profile';\nimport { DevAdminLogin } from './components/Auth/DevAdminLogin';\nimport { BackendInfo } from './components/BackendInfo';\nimport { useTimelineData } from './hooks/useTimelineData';\nimport { useFilters } from './hooks/useFilters';\nimport { useSlider } from './hooks/useSlider';\nimport { useTooltip } from './hooks/useTooltip';\nimport { useTimelineDrag } from './hooks/useTimelineDrag';\nimport { generateCenturyBoundaries, getFirstCountry } from './utils/timelineUtils';\nimport { getGroupColor, getGroupColorDark, getGroupColorMuted, getPersonGroup, sortGroupedData } from './utils/groupingUtils';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppInner() {\n  _s();\n  const {\n    isAuthenticated\n  } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const isMenu = location.pathname === '/' || location.pathname === '/menu';\n  const isTimeline = location.pathname === '/timeline';\n  const [isScrolled, setIsScrolled] = useState(false);\n  const [activeAchievementMarker, setActiveAchievementMarker] = useState(null);\n  const [selectedPerson, setSelectedPerson] = useState(null);\n  const [showControls, setShowControls] = useState(true);\n  const {\n    filters,\n    setFilters,\n    groupingType,\n    setGroupingType,\n    yearInputs,\n    setYearInputs,\n    applyYearFilter,\n    handleYearKeyPress,\n    resetAllFilters\n  } = useFilters();\n  const {\n    persons,\n    allCategories,\n    allCountries,\n    isLoading\n  } = useTimelineData(filters, isTimeline);\n  const {\n    isDraggingSlider,\n    handleSliderMouseDown,\n    handleSliderMouseMove,\n    handleSliderMouseUp\n  } = useSlider();\n  const {\n    hoveredPerson,\n    mousePosition,\n    showTooltip,\n    hoveredAchievement,\n    achievementTooltipPosition,\n    showAchievementTooltip,\n    hoverTimerRef,\n    handlePersonHover,\n    handleAchievementHover\n  } = useTooltip();\n\n  // Добавляем обработчики событий мыши и touch\n  useEffect(() => {\n    if (!isDraggingSlider) return;\n    const handleMouseMove = e => handleSliderMouseMove(e, yearInputs, applyYearFilter, setYearInputs);\n    const handleMouseUp = () => handleSliderMouseUp();\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    document.addEventListener('touchmove', handleMouseMove);\n    document.addEventListener('touchend', handleMouseUp);\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.removeEventListener('touchmove', handleMouseMove);\n      document.removeEventListener('touchend', handleMouseUp);\n    };\n  }, [isDraggingSlider, handleSliderMouseMove, handleSliderMouseUp, yearInputs, applyYearFilter, setYearInputs]);\n  const sortedData = sortGroupedData(persons, groupingType);\n  useEffect(() => {\n    if (filters.hideEmptyCenturies && sortedData.length > 0) {\n      const effectiveMinYear = Math.min(...sortedData.map(p => p.birthYear));\n      const effectiveMaxYear = Math.max(...sortedData.map(p => p.deathYear));\n      const hasActiveFilters = filters.categories.length > 0 || filters.countries.length > 0;\n      let newTimeRange = {\n        ...filters.timeRange\n      };\n      if (hasActiveFilters) {\n        newTimeRange = {\n          start: Math.max(filters.timeRange.start, effectiveMinYear),\n          end: Math.min(filters.timeRange.end, effectiveMaxYear)\n        };\n      } else {\n        newTimeRange = filters.timeRange;\n      }\n      if (newTimeRange.start !== filters.timeRange.start || newTimeRange.end !== filters.timeRange.end) {\n        setFilters(prev => ({\n          ...prev,\n          timeRange: newTimeRange\n        }));\n        setYearInputs({\n          start: newTimeRange.start.toString(),\n          end: newTimeRange.end.toString()\n        });\n      }\n    }\n  }, [filters.hideEmptyCenturies, sortedData, filters.categories, filters.countries, filters.timeRange, setFilters, setYearInputs]);\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      setIsScrolled(scrollTop > 50);\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n  useEffect(() => {\n    const handleCloseAchievementTooltip = () => {\n      handleAchievementHover(null, 0, 0);\n    };\n    const handleClickOutside = event => {\n      const target = event.target;\n      const tooltip = document.getElementById('achievement-tooltip');\n      const isClickInsideTooltip = tooltip === null || tooltip === void 0 ? void 0 : tooltip.contains(target);\n      const isClickOnMarker = target.closest('.achievement-marker');\n      if (!isClickInsideTooltip && !isClickOnMarker && showAchievementTooltip) {\n        if (event.type === 'touchstart') {\n          setTimeout(() => {\n            handleAchievementHover(null, 0, 0);\n          }, 100);\n        } else {\n          handleAchievementHover(null, 0, 0);\n        }\n      }\n    };\n    window.addEventListener('closeAchievementTooltip', handleCloseAchievementTooltip);\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('touchstart', handleClickOutside);\n    return () => {\n      window.removeEventListener('closeAchievementTooltip', handleCloseAchievementTooltip);\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [handleAchievementHover, showAchievementTooltip]);\n  const {\n    minYear,\n    totalYears,\n    effectiveMinYear,\n    effectiveMaxYear\n  } = useMemo(() => {\n    const minYear = Math.min(...sortedData.map(p => p.birthYear), filters.timeRange.start);\n    const maxYear = Math.max(...sortedData.map(p => p.deathYear), filters.timeRange.end);\n    const totalYears = maxYear - minYear;\n    const effectiveMinYear = filters.hideEmptyCenturies ? Math.min(...sortedData.map(p => p.birthYear)) : minYear;\n    const effectiveMaxYear = filters.hideEmptyCenturies ? Math.max(...sortedData.map(p => p.deathYear)) : maxYear;\n    return {\n      minYear,\n      totalYears,\n      effectiveMinYear,\n      effectiveMaxYear\n    };\n  }, [sortedData, filters.timeRange.start, filters.timeRange.end, filters.hideEmptyCenturies]);\n  const pixelsPerYear = 3;\n  const LEFT_PADDING_PX = 30;\n  const timelineWidth = totalYears * pixelsPerYear + LEFT_PADDING_PX;\n  const {\n    timelineRef,\n    isDragging,\n    isDraggingTimeline,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd\n  } = useTimelineDrag({\n    timelineWidth,\n    containerWidth: window.innerWidth\n  });\n  const centuryBoundaries = useMemo(() => generateCenturyBoundaries(effectiveMinYear, effectiveMaxYear), [effectiveMinYear, effectiveMaxYear]);\n  const calculateRowPlacement = useCallback(people => {\n    const rows = [];\n    if (groupingType === 'none') {\n      const allRows = [];\n      people.forEach(person => {\n        let placed = false;\n        for (let rowIndex = 0; rowIndex < allRows.length; rowIndex++) {\n          const row = allRows[rowIndex];\n          let canPlaceInRow = true;\n          for (const existingPerson of row) {\n            const BUFFER = 20;\n            if (person.birthYear - BUFFER <= existingPerson.deathYear && person.deathYear + BUFFER >= existingPerson.birthYear) {\n              canPlaceInRow = false;\n              break;\n            }\n          }\n          if (canPlaceInRow) {\n            allRows[rowIndex].push(person);\n            placed = true;\n            break;\n          }\n        }\n        if (!placed) {\n          allRows.push([person]);\n        }\n      });\n      return allRows;\n    }\n    const groupField = groupingType === 'category' ? 'category' : 'country';\n    const allGroups = groupingType === 'category' ? allCategories : allCountries;\n    const groups = {};\n    people.forEach(person => {\n      let groupValue;\n      if (groupField === 'country') {\n        groupValue = getFirstCountry(person.country);\n      } else {\n        groupValue = person[groupField];\n      }\n      if (!groups[groupValue]) {\n        groups[groupValue] = [];\n      }\n      groups[groupValue].push(person);\n    });\n    allGroups.forEach(groupValue => {\n      if (groups[groupValue]) {\n        const groupPeople = groups[groupValue];\n        const groupRows = [];\n        groupPeople.forEach(person => {\n          let placed = false;\n          for (let rowIndex = 0; rowIndex < groupRows.length; rowIndex++) {\n            const row = groupRows[rowIndex];\n            let canPlaceInRow = true;\n            for (const existingPerson of row) {\n              const BUFFER = 20;\n              if (person.birthYear - BUFFER <= existingPerson.deathYear && person.deathYear + BUFFER >= existingPerson.birthYear) {\n                canPlaceInRow = false;\n                break;\n              }\n            }\n            if (canPlaceInRow) {\n              groupRows[rowIndex].push(person);\n              placed = true;\n              break;\n            }\n          }\n          if (!placed) {\n            groupRows.push([person]);\n          }\n        });\n        rows.push(...groupRows);\n        if (groupValue !== allGroups[allGroups.length - 1]) {\n          rows.push([]);\n        }\n      }\n    });\n    return rows;\n  }, [groupingType, allCategories, allCountries]);\n  const rowPlacement = useMemo(() => calculateRowPlacement(sortedData), [calculateRowPlacement, sortedData]);\n  const totalHeight = useMemo(() => rowPlacement.reduce((height, row) => {\n    return height + (row.length === 0 ? 20 : 70);\n  }, 0), [rowPlacement]);\n  const ROW_HEIGHT = 60;\n  const ROW_MARGIN = 10;\n  const EMPTY_ROW_HEIGHT = 20;\n  const rowTops = useMemo(() => {\n    const tops = [];\n    let acc = 0;\n    rowPlacement.forEach(row => {\n      tops.push(acc);\n      if (row.length === 0) {\n        acc += EMPTY_ROW_HEIGHT;\n      } else {\n        acc += ROW_HEIGHT + ROW_MARGIN;\n      }\n    });\n    return tops;\n  }, [rowPlacement]);\n  const createCategoryDividers = useCallback(() => {\n    if (groupingType === 'none') {\n      return [];\n    }\n    const dividers = [];\n    let currentGroup = '';\n    rowPlacement.forEach((row, rowIndex) => {\n      if (row.length > 0) {\n        const firstPersonInRow = row[0];\n        let currentGroupValue;\n        if (groupingType === 'category') {\n          currentGroupValue = firstPersonInRow.category;\n        } else if (groupingType === 'country') {\n          currentGroupValue = getFirstCountry(firstPersonInRow.country);\n        } else {\n          currentGroupValue = firstPersonInRow.category;\n        }\n        if (currentGroupValue !== currentGroup) {\n          if (currentGroup !== '') {\n            dividers.push({\n              category: currentGroup,\n              top: rowTops[rowIndex] - 5\n            });\n          }\n          currentGroup = currentGroupValue;\n        }\n      }\n    });\n    if (currentGroup !== '') {\n      dividers.push({\n        category: currentGroup,\n        top: rowTops[rowPlacement.length - 1] - 5\n      });\n    }\n    return dividers;\n  }, [groupingType, rowPlacement, rowTops]);\n  const categoryDividers = useMemo(() => createCategoryDividers(), [createCategoryDividers]);\n\n  // Обработчик для открытия таймлайна\n  const handleOpenTimeline = () => navigate('/timeline');\n\n  // Обработчик для возврата в меню\n  const handleBackToMenu = () => navigate('/menu');\n\n  // Рендерим главное меню\n  if (isMenu) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      id: \"chrononinja-app\",\n      role: \"main\",\n      \"aria-label\": \"\\u0425\\u0440\\u043E\\u043D\\u043E \\u043D\\u0438\\u043D\\u0434\\u0437\\u044F - \\u0413\\u043B\\u0430\\u0432\\u043D\\u043E\\u0435 \\u043C\\u0435\\u043D\\u044E\",\n      children: [/*#__PURE__*/_jsxDEV(MainMenu, {\n        onOpenTimeline: handleOpenTimeline\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 20,\n          left: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 20,\n          left: 20,\n          display: 'flex',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(LoginForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(RegisterForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DevAdminLogin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Рендерим таймлайн\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    id: \"chrononinja-app\",\n    role: \"main\",\n    \"aria-label\": \"\\u0425\\u0440\\u043E\\u043D\\u043E \\u043D\\u0438\\u043D\\u0434\\u0437\\u044F - \\u0418\\u043D\\u0442\\u0435\\u0440\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u0430\\u044F \\u043B\\u0438\\u043D\\u0438\\u044F \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0445 \\u043B\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u0435\\u0439\",\n    children: [/*#__PURE__*/_jsxDEV(BackendInfo, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AppHeader, {\n      isScrolled: isScrolled,\n      showControls: showControls,\n      setShowControls: setShowControls,\n      filters: filters,\n      setFilters: setFilters,\n      groupingType: groupingType,\n      setGroupingType: setGroupingType,\n      allCategories: allCategories,\n      allCountries: allCountries,\n      yearInputs: yearInputs,\n      setYearInputs: setYearInputs,\n      applyYearFilter: applyYearFilter,\n      handleYearKeyPress: handleYearKeyPress,\n      resetAllFilters: resetAllFilters,\n      getCategoryColor: getGroupColor,\n      sortedData: sortedData,\n      handleSliderMouseDown: handleSliderMouseDown,\n      handleSliderMouseMove: handleSliderMouseMove,\n      handleSliderMouseUp: handleSliderMouseUp,\n      isDraggingSlider: isDraggingSlider,\n      onBackToMenu: handleBackToMenu\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        ref: timelineRef,\n        className: `timeline-container ${isDragging ? 'dragging' : ''}`,\n        id: \"timeline-viewport\",\n        role: \"region\",\n        \"aria-label\": \"\\u041E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u043E\\u0439 \\u043B\\u0438\\u043D\\u0438\\u0438\",\n        children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-overlay\",\n          role: \"status\",\n          \"aria-live\": \"polite\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Timeline, {\n          isLoading: false,\n          timelineWidth: timelineWidth,\n          totalHeight: totalHeight,\n          centuryBoundaries: centuryBoundaries,\n          minYear: minYear,\n          pixelsPerYear: pixelsPerYear,\n          LEFT_PADDING_PX: LEFT_PADDING_PX,\n          rowPlacement: rowPlacement,\n          filters: filters,\n          groupingType: groupingType,\n          categoryDividers: categoryDividers,\n          getGroupColor: getGroupColor,\n          getGroupColorDark: getGroupColorDark,\n          getGroupColorMuted: getGroupColorMuted,\n          getPersonGroup: person => getPersonGroup(person, groupingType),\n          hoveredPerson: hoveredPerson,\n          setHoveredPerson: person => {\n            if (person) {\n              handlePersonHover(person, mousePosition.x, mousePosition.y);\n            } else {\n              handlePersonHover(null, 0, 0);\n            }\n          },\n          mousePosition: mousePosition,\n          setMousePosition: position => {\n            if (hoveredPerson) {\n              handlePersonHover(hoveredPerson, position.x, position.y);\n            }\n          },\n          showTooltip: showTooltip,\n          setShowTooltip: show => {\n            if (!show && hoveredPerson) {\n              handlePersonHover(null, 0, 0);\n            }\n          },\n          activeAchievementMarker: activeAchievementMarker,\n          setActiveAchievementMarker: setActiveAchievementMarker,\n          hoveredAchievement: hoveredAchievement,\n          setHoveredAchievement: achievement => {\n            if (achievement) {\n              handleAchievementHover(achievement, achievementTooltipPosition.x, achievementTooltipPosition.y);\n            } else {\n              handleAchievementHover(null, 0, 0);\n            }\n          },\n          achievementTooltipPosition: achievementTooltipPosition,\n          setAchievementTooltipPosition: position => {\n            if (hoveredAchievement) {\n              handleAchievementHover(hoveredAchievement, position.x, position.y);\n            }\n          },\n          showAchievementTooltip: showAchievementTooltip,\n          setShowAchievementTooltip: show => {\n            if (!show && hoveredAchievement) {\n              handleAchievementHover(null, 0, 0);\n            }\n          },\n          handlePersonHover: handlePersonHover,\n          hoverTimerRef: hoverTimerRef,\n          sortedData: sortedData,\n          selectedPerson: selectedPerson,\n          setSelectedPerson: setSelectedPerson,\n          timelineRef: timelineRef,\n          isDragging: isDragging,\n          isDraggingTimeline: isDraggingTimeline,\n          handleMouseDown: handleMouseDown,\n          handleMouseMove: handleMouseMove,\n          handleMouseUp: handleMouseUp,\n          handleTouchStart: handleTouchStart,\n          handleTouchMove: handleTouchMove,\n          handleTouchEnd: handleTouchEnd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"tooltips-container\",\n      id: \"tooltips-aside\",\n      \"aria-label\": \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u043E\\u043D\\u043D\\u044B\\u0435 \\u043F\\u043E\\u0434\\u0441\\u043A\\u0430\\u0437\\u043A\\u0438\",\n      children: /*#__PURE__*/_jsxDEV(Tooltips, {\n        hoveredPerson: hoveredPerson,\n        showTooltip: showTooltip,\n        mousePosition: mousePosition,\n        hoveredAchievement: hoveredAchievement,\n        showAchievementTooltip: showAchievementTooltip,\n        achievementTooltipPosition: achievementTooltipPosition,\n        getGroupColor: getGroupColor,\n        getPersonGroup: person => getPersonGroup(person, groupingType),\n        getCategoryColor: getGroupColor\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MobilePersonPanel, {\n      selectedPerson: selectedPerson,\n      onClose: () => setSelectedPerson(null),\n      getGroupColor: getGroupColor,\n      getPersonGroup: person => getPersonGroup(person, groupingType),\n      getCategoryColor: getGroupColor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 424,\n    columnNumber: 5\n  }, this);\n}\n_s(AppInner, \"j5eX/iQsDtsf18FlgDisVCtyGzE=\", false, function () {\n  return [useAuth, useNavigate, useLocation, useFilters, useTimelineData, useSlider, useTooltip, useTimelineDrag];\n});\n_c = AppInner;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/menu\",\n          replace: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/menu\",\n        element: /*#__PURE__*/_jsxDEV(AppInner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/timeline\",\n        element: /*#__PURE__*/_jsxDEV(AppInner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/profile\",\n        element: /*#__PURE__*/_jsxDEV(ProfilePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/menu\",\n          replace: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 567,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppInner\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","Routes","Route","Navigate","useNavigate","useLocation","ProfilePage","AppHeader","Timeline","Tooltips","MobilePersonPanel","MainMenu","AuthProvider","useAuth","LoginForm","RegisterForm","Profile","DevAdminLogin","BackendInfo","useTimelineData","useFilters","useSlider","useTooltip","useTimelineDrag","generateCenturyBoundaries","getFirstCountry","getGroupColor","getGroupColorDark","getGroupColorMuted","getPersonGroup","sortGroupedData","jsxDEV","_jsxDEV","AppInner","_s","isAuthenticated","navigate","location","isMenu","pathname","isTimeline","isScrolled","setIsScrolled","activeAchievementMarker","setActiveAchievementMarker","selectedPerson","setSelectedPerson","showControls","setShowControls","filters","setFilters","groupingType","setGroupingType","yearInputs","setYearInputs","applyYearFilter","handleYearKeyPress","resetAllFilters","persons","allCategories","allCountries","isLoading","isDraggingSlider","handleSliderMouseDown","handleSliderMouseMove","handleSliderMouseUp","hoveredPerson","mousePosition","showTooltip","hoveredAchievement","achievementTooltipPosition","showAchievementTooltip","hoverTimerRef","handlePersonHover","handleAchievementHover","handleMouseMove","e","handleMouseUp","document","addEventListener","removeEventListener","sortedData","hideEmptyCenturies","length","effectiveMinYear","Math","min","map","p","birthYear","effectiveMaxYear","max","deathYear","hasActiveFilters","categories","countries","newTimeRange","timeRange","start","end","prev","toString","handleScroll","scrollTop","window","pageYOffset","documentElement","handleCloseAchievementTooltip","handleClickOutside","event","target","tooltip","getElementById","isClickInsideTooltip","contains","isClickOnMarker","closest","type","setTimeout","minYear","totalYears","maxYear","pixelsPerYear","LEFT_PADDING_PX","timelineWidth","timelineRef","isDragging","isDraggingTimeline","handleMouseDown","handleTouchStart","handleTouchMove","handleTouchEnd","containerWidth","innerWidth","centuryBoundaries","calculateRowPlacement","people","rows","allRows","forEach","person","placed","rowIndex","row","canPlaceInRow","existingPerson","BUFFER","push","groupField","allGroups","groups","groupValue","country","groupPeople","groupRows","rowPlacement","totalHeight","reduce","height","ROW_HEIGHT","ROW_MARGIN","EMPTY_ROW_HEIGHT","rowTops","tops","acc","createCategoryDividers","dividers","currentGroup","firstPersonInRow","currentGroupValue","category","top","categoryDividers","handleOpenTimeline","handleBackToMenu","className","id","role","children","onOpenTimeline","fileName","_jsxFileName","lineNumber","columnNumber","style","position","left","display","gap","getCategoryColor","onBackToMenu","ref","setHoveredPerson","x","y","setMousePosition","setShowTooltip","show","setHoveredAchievement","achievement","setAchievementTooltipPosition","setShowAchievementTooltip","onClose","_c","App","path","element","to","replace","_c2","$RefreshReg$"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport { Routes, Route, Navigate, useNavigate, useLocation } from 'react-router-dom'\nimport ProfilePage from './pages/ProfilePage'\nimport { Person } from './types'\nimport { AppHeader } from './components/AppHeader'\nimport { Timeline } from './components/Timeline'\nimport { Tooltips } from './components/Tooltips'\nimport { MobilePersonPanel } from './components/MobilePersonPanel'\nimport { MainMenu } from './components/MainMenu'\nimport { AuthProvider, useAuth } from './context'\nimport { LoginForm } from './components/Auth/LoginForm'\nimport { RegisterForm } from './components/Auth/RegisterForm'\nimport { Profile } from './components/Profile'\nimport { DevAdminLogin } from './components/Auth/DevAdminLogin'\nimport { BackendInfo } from './components/BackendInfo'\nimport { useTimelineData } from './hooks/useTimelineData'\nimport { useFilters } from './hooks/useFilters'\nimport { useSlider } from './hooks/useSlider'\nimport { useTooltip } from './hooks/useTooltip'\nimport { useTimelineDrag } from './hooks/useTimelineDrag'\nimport { \n  generateCenturyBoundaries,\n  getFirstCountry\n} from './utils/timelineUtils'\nimport { \n  getGroupColor, \n  getGroupColorDark, \n  getGroupColorMuted, \n  getPersonGroup,\n  sortGroupedData\n} from './utils/groupingUtils'\nimport './App.css'\n\nfunction AppInner() {\n  const { isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const isMenu = location.pathname === '/' || location.pathname === '/menu';\n  const isTimeline = location.pathname === '/timeline';\n  const [isScrolled, setIsScrolled] = useState(false)\n  const [activeAchievementMarker, setActiveAchievementMarker] = useState<{ personId: string; index: number } | null>(null)\n  const [selectedPerson, setSelectedPerson] = useState<Person | null>(null)\n  const [showControls, setShowControls] = useState(true)\n\n  const { \n    filters, \n    setFilters, \n    groupingType, \n    setGroupingType, \n    yearInputs, \n    setYearInputs, \n    applyYearFilter, \n    handleYearKeyPress, \n    resetAllFilters \n  } = useFilters()\n  \n  const { persons, allCategories, allCountries, isLoading } = useTimelineData(filters, isTimeline)\n\n  const { \n    isDraggingSlider, \n    handleSliderMouseDown, \n    handleSliderMouseMove, \n    handleSliderMouseUp \n  } = useSlider()\n  \n  const { \n    hoveredPerson, \n    mousePosition, \n    showTooltip, \n    hoveredAchievement, \n    achievementTooltipPosition, \n    showAchievementTooltip, \n    hoverTimerRef, \n    handlePersonHover, \n    handleAchievementHover \n  } = useTooltip()\n\n\n\n\n\n\n\n  // Добавляем обработчики событий мыши и touch\n  useEffect(() => {\n    if (!isDraggingSlider) return\n\n    const handleMouseMove = (e: MouseEvent | TouchEvent) => \n      handleSliderMouseMove(e, yearInputs, applyYearFilter, setYearInputs)\n    \n    const handleMouseUp = () => handleSliderMouseUp()\n    \n    document.addEventListener('mousemove', handleMouseMove)\n    document.addEventListener('mouseup', handleMouseUp)\n    document.addEventListener('touchmove', handleMouseMove)\n    document.addEventListener('touchend', handleMouseUp)\n    \n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('mouseup', handleMouseUp)\n      document.removeEventListener('touchmove', handleMouseMove)\n      document.removeEventListener('touchend', handleMouseUp)\n    }\n  }, [isDraggingSlider, handleSliderMouseMove, handleSliderMouseUp, yearInputs, applyYearFilter, setYearInputs])\n\n\n\n  const sortedData = sortGroupedData(persons, groupingType)\n\n  useEffect(() => {\n    if (filters.hideEmptyCenturies && sortedData.length > 0) {\n      const effectiveMinYear = Math.min(...sortedData.map(p => p.birthYear));\n      const effectiveMaxYear = Math.max(...sortedData.map(p => p.deathYear));\n      \n      const hasActiveFilters = filters.categories.length > 0 || filters.countries.length > 0;\n      \n      let newTimeRange = { ...filters.timeRange };\n      \n      if (hasActiveFilters) {\n        newTimeRange = {\n          start: Math.max(filters.timeRange.start, effectiveMinYear),\n          end: Math.min(filters.timeRange.end, effectiveMaxYear)\n        };\n      } else {\n        newTimeRange = filters.timeRange;\n      }\n      \n      if (newTimeRange.start !== filters.timeRange.start || newTimeRange.end !== filters.timeRange.end) {\n        setFilters(prev => ({\n          ...prev,\n          timeRange: newTimeRange\n        }));\n        \n        setYearInputs({\n          start: newTimeRange.start.toString(),\n          end: newTimeRange.end.toString()\n        });\n      }\n    }\n  }, [filters.hideEmptyCenturies, sortedData, filters.categories, filters.countries, filters.timeRange, setFilters, setYearInputs]);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop\n      setIsScrolled(scrollTop > 50)\n    }\n\n    window.addEventListener('scroll', handleScroll)\n    return () => window.removeEventListener('scroll', handleScroll)\n  }, [])\n\n  useEffect(() => {\n    const handleCloseAchievementTooltip = () => {\n      handleAchievementHover(null, 0, 0);\n    };\n\n    const handleClickOutside = (event: Event) => {\n      const target = event.target as Element;\n      const tooltip = document.getElementById('achievement-tooltip');\n      const isClickInsideTooltip = tooltip?.contains(target);\n      const isClickOnMarker = target.closest('.achievement-marker');\n      \n      if (!isClickInsideTooltip && !isClickOnMarker && showAchievementTooltip) {\n        if (event.type === 'touchstart') {\n          setTimeout(() => {\n            handleAchievementHover(null, 0, 0);\n          }, 100);\n        } else {\n          handleAchievementHover(null, 0, 0);\n        }\n      }\n    };\n\n    window.addEventListener('closeAchievementTooltip', handleCloseAchievementTooltip);\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('touchstart', handleClickOutside);\n    \n    return () => {\n      window.removeEventListener('closeAchievementTooltip', handleCloseAchievementTooltip);\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [handleAchievementHover, showAchievementTooltip]);\n\n  const { minYear, totalYears, effectiveMinYear, effectiveMaxYear } = useMemo(() => {\n    const minYear = Math.min(...sortedData.map(p => p.birthYear), filters.timeRange.start)\n    const maxYear = Math.max(...sortedData.map(p => p.deathYear), filters.timeRange.end)\n    const totalYears = maxYear - minYear\n    \n    const effectiveMinYear = filters.hideEmptyCenturies \n      ? Math.min(...sortedData.map(p => p.birthYear))\n      : minYear\n    const effectiveMaxYear = filters.hideEmptyCenturies \n      ? Math.max(...sortedData.map(p => p.deathYear))\n      : maxYear\n    \n    return { minYear, totalYears, effectiveMinYear, effectiveMaxYear }\n  }, [sortedData, filters.timeRange.start, filters.timeRange.end, filters.hideEmptyCenturies])\n\n  const pixelsPerYear = 3\n  const LEFT_PADDING_PX = 30\n  const timelineWidth = totalYears * pixelsPerYear + LEFT_PADDING_PX\n\n  const {\n    timelineRef,\n    isDragging,\n    isDraggingTimeline,\n    handleMouseDown,\n    handleMouseMove,\n    handleMouseUp,\n    handleTouchStart,\n    handleTouchMove,\n    handleTouchEnd\n  } = useTimelineDrag({\n    timelineWidth,\n    containerWidth: window.innerWidth\n  })\n\n  const centuryBoundaries = useMemo(() => \n    generateCenturyBoundaries(effectiveMinYear, effectiveMaxYear),\n    [effectiveMinYear, effectiveMaxYear]\n  )\n\n  const calculateRowPlacement = useCallback((people: Person[]) => {\n    const rows: Person[][] = []\n    \n    if (groupingType === 'none') {\n      const allRows: Person[][] = []\n      \n      people.forEach(person => {\n        let placed = false\n        \n        for (let rowIndex = 0; rowIndex < allRows.length; rowIndex++) {\n          const row = allRows[rowIndex]\n          let canPlaceInRow = true\n          \n          for (const existingPerson of row) {\n            const BUFFER = 20;\n            if (\n              person.birthYear - BUFFER <= existingPerson.deathYear &&\n              person.deathYear + BUFFER >= existingPerson.birthYear\n            ) {\n              canPlaceInRow = false\n              break\n            }\n          }\n          \n          if (canPlaceInRow) {\n            allRows[rowIndex].push(person)\n            placed = true\n            break\n          }\n        }\n        \n        if (!placed) {\n          allRows.push([person])\n        }\n      })\n      \n      return allRows\n    }\n    \n    const groupField = groupingType === 'category' ? 'category' : 'country'\n    const allGroups = groupingType === 'category' ? allCategories : allCountries\n    const groups: { [key: string]: Person[] } = {}\n    \n    people.forEach(person => {\n      let groupValue: string\n      if (groupField === 'country') {\n        groupValue = getFirstCountry(person.country)\n      } else {\n        groupValue = person[groupField]\n      }\n      \n      if (!groups[groupValue]) {\n        groups[groupValue] = []\n      }\n      groups[groupValue].push(person)\n    })\n    \n    allGroups.forEach(groupValue => {\n      if (groups[groupValue]) {\n        const groupPeople = groups[groupValue]\n        const groupRows: Person[][] = []\n        \n        groupPeople.forEach(person => {\n          let placed = false\n          \n          for (let rowIndex = 0; rowIndex < groupRows.length; rowIndex++) {\n            const row = groupRows[rowIndex]\n            let canPlaceInRow = true\n            \n            for (const existingPerson of row) {\n              const BUFFER = 20;\n              if (\n                person.birthYear - BUFFER <= existingPerson.deathYear &&\n                person.deathYear + BUFFER >= existingPerson.birthYear\n              ) {\n                canPlaceInRow = false\n                break\n              }\n            }\n            \n            if (canPlaceInRow) {\n              groupRows[rowIndex].push(person)\n              placed = true\n              break\n            }\n          }\n          \n          if (!placed) {\n            groupRows.push([person])\n          }\n        })\n        \n        rows.push(...groupRows)\n        \n        if (groupValue !== allGroups[allGroups.length - 1]) {\n          rows.push([])\n        }\n      }\n    })\n    \n    return rows\n  }, [groupingType, allCategories, allCountries])\n\n  const rowPlacement = useMemo(() => \n    calculateRowPlacement(sortedData),\n    [calculateRowPlacement, sortedData]\n  )\n\n  const totalHeight = useMemo(() => \n    rowPlacement.reduce((height, row) => {\n      return height + (row.length === 0 ? 20 : 70)\n    }, 0),\n    [rowPlacement]\n  )\n\n  const ROW_HEIGHT = 60;\n  const ROW_MARGIN = 10;\n  const EMPTY_ROW_HEIGHT = 20;\n\n  const rowTops = useMemo(() => {\n    const tops: number[] = [];\n    let acc = 0;\n    rowPlacement.forEach(row => {\n      tops.push(acc);\n      if (row.length === 0) {\n        acc += EMPTY_ROW_HEIGHT;\n      } else {\n        acc += ROW_HEIGHT + ROW_MARGIN;\n      }\n    });\n    return tops;\n  }, [rowPlacement]);\n\n  const createCategoryDividers = useCallback(() => {\n    if (groupingType === 'none') {\n      return [];\n    }\n\n    const dividers: { category: string; top: number }[] = [];\n    let currentGroup = '';\n\n    rowPlacement.forEach((row, rowIndex) => {\n      if (row.length > 0) {\n        const firstPersonInRow = row[0];\n        let currentGroupValue: string;\n        \n        if (groupingType === 'category') {\n          currentGroupValue = firstPersonInRow.category;\n        } else if (groupingType === 'country') {\n          currentGroupValue = getFirstCountry(firstPersonInRow.country);\n        } else {\n          currentGroupValue = firstPersonInRow.category;\n        }\n        \n        if (currentGroupValue !== currentGroup) {\n          if (currentGroup !== '') {\n            dividers.push({ category: currentGroup, top: rowTops[rowIndex] - 5 });\n          }\n          currentGroup = currentGroupValue;\n        }\n      }\n    });\n\n    if (currentGroup !== '') {\n      dividers.push({ category: currentGroup, top: rowTops[rowPlacement.length - 1] - 5 });\n    }\n\n    return dividers;\n  }, [groupingType, rowPlacement, rowTops]);\n\n  const categoryDividers = useMemo(() => createCategoryDividers(), [createCategoryDividers]);\n\n  // Обработчик для открытия таймлайна\n  const handleOpenTimeline = () => navigate('/timeline')\n\n  // Обработчик для возврата в меню\n  const handleBackToMenu = () => navigate('/menu')\n\n  // Рендерим главное меню\n  if (isMenu) {\n    return (\n      <div className=\"app\" id=\"chrononinja-app\" role=\"main\" aria-label=\"Хроно ниндзя - Главное меню\">\n        <MainMenu onOpenTimeline={handleOpenTimeline} />\n        {isAuthenticated ? (\n          <div style={{ position: 'fixed', top: 20, left: 20 }}>\n            <Profile />\n          </div>\n        ) : (\n          <div style={{ position: 'fixed', top: 20, left: 20, display: 'flex', gap: 16 }}>\n            <LoginForm />\n            <RegisterForm />\n            <DevAdminLogin />\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  // Рендерим таймлайн\n  return (\n    <div className=\"app\" id=\"chrononinja-app\" role=\"main\" aria-label=\"Хроно ниндзя - Интерактивная временная линия исторических личностей\">\n      <BackendInfo />\n      <AppHeader\n        isScrolled={isScrolled}\n        showControls={showControls}\n        setShowControls={setShowControls}\n        filters={filters}\n        setFilters={setFilters}\n        groupingType={groupingType}\n        setGroupingType={setGroupingType}\n        allCategories={allCategories}\n        allCountries={allCountries}\n        yearInputs={yearInputs}\n        setYearInputs={setYearInputs}\n        applyYearFilter={applyYearFilter}\n        handleYearKeyPress={handleYearKeyPress}\n        resetAllFilters={resetAllFilters}\n        getCategoryColor={getGroupColor}\n        sortedData={sortedData}\n        handleSliderMouseDown={handleSliderMouseDown}\n        handleSliderMouseMove={handleSliderMouseMove}\n        handleSliderMouseUp={handleSliderMouseUp}\n        isDraggingSlider={isDraggingSlider}\n        onBackToMenu={handleBackToMenu}\n      />\n      \n      <div className=\"timeline-wrapper\">\n        <main \n          ref={timelineRef}\n          className={`timeline-container ${isDragging ? 'dragging' : ''}`}\n          id=\"timeline-viewport\" \n          role=\"region\" \n          aria-label=\"Область просмотра временной линии\"\n        >\n          {isLoading && (\n            <div className=\"loading-overlay\" role=\"status\" aria-live=\"polite\">\n              <div className=\"spinner\" aria-hidden=\"true\"></div>\n              <span>Загрузка данных...</span>\n            </div>\n          )}\n          <Timeline\n          isLoading={false}\n          timelineWidth={timelineWidth}\n          totalHeight={totalHeight}\n          centuryBoundaries={centuryBoundaries}\n          minYear={minYear}\n          pixelsPerYear={pixelsPerYear}\n          LEFT_PADDING_PX={LEFT_PADDING_PX}\n          rowPlacement={rowPlacement}\n          filters={filters}\n          groupingType={groupingType}\n          categoryDividers={categoryDividers}\n          getGroupColor={getGroupColor}\n          getGroupColorDark={getGroupColorDark}\n          getGroupColorMuted={getGroupColorMuted}\n          getPersonGroup={(person) => getPersonGroup(person, groupingType)}\n          hoveredPerson={hoveredPerson}\n          setHoveredPerson={(person) => {\n            if (person) {\n              handlePersonHover(person, mousePosition.x, mousePosition.y);\n            } else {\n              handlePersonHover(null, 0, 0);\n            }\n          }}\n          mousePosition={mousePosition}\n          setMousePosition={(position) => {\n            if (hoveredPerson) {\n              handlePersonHover(hoveredPerson, position.x, position.y);\n            }\n          }}\n          showTooltip={showTooltip}\n          setShowTooltip={(show) => {\n            if (!show && hoveredPerson) {\n              handlePersonHover(null, 0, 0);\n            }\n          }}\n          activeAchievementMarker={activeAchievementMarker}\n          setActiveAchievementMarker={setActiveAchievementMarker}\n          hoveredAchievement={hoveredAchievement}\n          setHoveredAchievement={(achievement) => {\n            if (achievement) {\n              handleAchievementHover(achievement, achievementTooltipPosition.x, achievementTooltipPosition.y);\n            } else {\n              handleAchievementHover(null, 0, 0);\n            }\n          }}\n          achievementTooltipPosition={achievementTooltipPosition}\n          setAchievementTooltipPosition={(position) => {\n            if (hoveredAchievement) {\n              handleAchievementHover(hoveredAchievement, position.x, position.y);\n            }\n          }}\n          showAchievementTooltip={showAchievementTooltip}\n          setShowAchievementTooltip={(show) => {\n            if (!show && hoveredAchievement) {\n              handleAchievementHover(null, 0, 0);\n            }\n          }}\n          handlePersonHover={handlePersonHover}\n          hoverTimerRef={hoverTimerRef}\n          sortedData={sortedData}\n          selectedPerson={selectedPerson}\n          setSelectedPerson={setSelectedPerson}\n          timelineRef={timelineRef}\n          isDragging={isDragging}\n          isDraggingTimeline={isDraggingTimeline}\n          handleMouseDown={handleMouseDown}\n          handleMouseMove={handleMouseMove}\n          handleMouseUp={handleMouseUp}\n          handleTouchStart={handleTouchStart}\n          handleTouchMove={handleTouchMove}\n          handleTouchEnd={handleTouchEnd}\n        />\n        </main>\n      </div>\n\n      <aside className=\"tooltips-container\" id=\"tooltips-aside\" aria-label=\"Информационные подсказки\">\n        <Tooltips\n          hoveredPerson={hoveredPerson}\n          showTooltip={showTooltip}\n          mousePosition={mousePosition}\n          hoveredAchievement={hoveredAchievement}\n          showAchievementTooltip={showAchievementTooltip}\n          achievementTooltipPosition={achievementTooltipPosition}\n          getGroupColor={getGroupColor}\n          getPersonGroup={(person) => getPersonGroup(person, groupingType)}\n          getCategoryColor={getGroupColor}\n        />\n      </aside>\n      \n      <MobilePersonPanel\n        selectedPerson={selectedPerson}\n        onClose={() => setSelectedPerson(null)}\n        getGroupColor={getGroupColor}\n        getPersonGroup={(person) => getPersonGroup(person, groupingType)}\n        getCategoryColor={getGroupColor}\n      />\n    </div>\n  )\n}\n\nexport default function App() {\n  return (\n    <AuthProvider>\n      <Routes>\n        <Route path=\"/\" element={<Navigate to=\"/menu\" replace />} />\n        <Route path=\"/menu\" element={<AppInner />} />\n        <Route path=\"/timeline\" element={<AppInner />} />\n        <Route path=\"/profile\" element={<ProfilePage />} />\n        <Route path=\"*\" element={<Navigate to=\"/menu\" replace />} />\n      </Routes>\n    </AuthProvider>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}