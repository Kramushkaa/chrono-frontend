{"ast":null,"code":"import{useState,useCallback}from'react';export const useSlider=()=>{const[isDraggingSlider,setIsDraggingSlider]=useState(false);const[draggedHandle,setDraggedHandle]=useState(null);const[sliderRect,setSliderRect]=useState(null);const handleSliderMouseDown=useCallback((e,handle)=>{var _e$currentTarget$pare;e.preventDefault();setIsDraggingSlider(true);setDraggedHandle(handle);const sliderElement=(_e$currentTarget$pare=e.currentTarget.parentElement)===null||_e$currentTarget$pare===void 0?void 0:_e$currentTarget$pare.parentElement;if(sliderElement){setSliderRect(sliderElement.getBoundingClientRect());}},[]);const handleSliderMouseMove=useCallback((e,yearInputs,applyYearFilter,setYearInputs)=>{if(!isDraggingSlider||!draggedHandle||!sliderRect)return;const rect=sliderRect;const clientX='touches'in e?e.touches[0].clientX:e.clientX;const x=clientX-rect.left;const percentage=Math.max(0,Math.min(100,x/rect.width*100));// Преобразуем процент в год (от -800 до 2000)\nconst totalRange=2800;// 2000 - (-800)\nconst year=Math.round(-800+percentage/100*totalRange);// Ограничиваем значения\nconst startYear=parseInt(yearInputs.start)||-800;const endYear=parseInt(yearInputs.end)||2000;let newYear=year;if(draggedHandle==='start'){newYear=Math.max(-800,Math.min(endYear-100,year));setYearInputs(prev=>({...prev,start:newYear.toString()}));applyYearFilter('start',newYear.toString());}else{newYear=Math.max(startYear+100,Math.min(2000,year));setYearInputs(prev=>({...prev,end:newYear.toString()}));applyYearFilter('end',newYear.toString());}},[isDraggingSlider,draggedHandle,sliderRect]);const handleSliderMouseUp=useCallback(()=>{setIsDraggingSlider(false);setDraggedHandle(null);setSliderRect(null);},[]);return{isDraggingSlider,draggedHandle,sliderRect,handleSliderMouseDown,handleSliderMouseMove,handleSliderMouseUp};};","map":{"version":3,"names":["useState","useCallback","useSlider","isDraggingSlider","setIsDraggingSlider","draggedHandle","setDraggedHandle","sliderRect","setSliderRect","handleSliderMouseDown","e","handle","_e$currentTarget$pare","preventDefault","sliderElement","currentTarget","parentElement","getBoundingClientRect","handleSliderMouseMove","yearInputs","applyYearFilter","setYearInputs","rect","clientX","touches","x","left","percentage","Math","max","min","width","totalRange","year","round","startYear","parseInt","start","endYear","end","newYear","prev","toString","handleSliderMouseUp"],"sources":["C:/Users/Selecty/Documents/PetProjects/chronoline-frontend/src/hooks/useSlider.ts"],"sourcesContent":["import { useState, useCallback } from 'react'\r\n\r\nexport const useSlider = () => {\r\n  const [isDraggingSlider, setIsDraggingSlider] = useState(false)\r\n  const [draggedHandle, setDraggedHandle] = useState<'start' | 'end' | null>(null)\r\n  const [sliderRect, setSliderRect] = useState<DOMRect | null>(null)\r\n\r\n  const handleSliderMouseDown = useCallback((e: React.MouseEvent | React.TouchEvent, handle: 'start' | 'end') => {\r\n    e.preventDefault()\r\n    setIsDraggingSlider(true)\r\n    setDraggedHandle(handle)\r\n    const sliderElement = e.currentTarget.parentElement?.parentElement\r\n    if (sliderElement) {\r\n      setSliderRect(sliderElement.getBoundingClientRect())\r\n    }\r\n  }, [])\r\n\r\n  const handleSliderMouseMove = useCallback((e: MouseEvent | TouchEvent, yearInputs: { start: string; end: string }, applyYearFilter: (field: 'start' | 'end', value: string) => void, setYearInputs: (inputs: { start: string; end: string } | ((prev: { start: string; end: string }) => { start: string; end: string })) => void) => {\r\n    if (!isDraggingSlider || !draggedHandle || !sliderRect) return\r\n\r\n    const rect = sliderRect\r\n    const clientX = 'touches' in e ? e.touches[0].clientX : e.clientX\r\n    const x = clientX - rect.left\r\n    const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100))\r\n    \r\n    // Преобразуем процент в год (от -800 до 2000)\r\n    const totalRange = 2800 // 2000 - (-800)\r\n    const year = Math.round(-800 + (percentage / 100) * totalRange)\r\n    \r\n    // Ограничиваем значения\r\n    const startYear = parseInt(yearInputs.start) || -800\r\n    const endYear = parseInt(yearInputs.end) || 2000\r\n    \r\n    let newYear = year\r\n    if (draggedHandle === 'start') {\r\n      newYear = Math.max(-800, Math.min(endYear - 100, year))\r\n      setYearInputs(prev => ({ ...prev, start: newYear.toString() }))\r\n      applyYearFilter('start', newYear.toString())\r\n    } else {\r\n      newYear = Math.max(startYear + 100, Math.min(2000, year))\r\n      setYearInputs(prev => ({ ...prev, end: newYear.toString() }))\r\n      applyYearFilter('end', newYear.toString())\r\n    }\r\n  }, [isDraggingSlider, draggedHandle, sliderRect])\r\n\r\n  const handleSliderMouseUp = useCallback(() => {\r\n    setIsDraggingSlider(false)\r\n    setDraggedHandle(null)\r\n    setSliderRect(null)\r\n  }, [])\r\n\r\n  return {\r\n    isDraggingSlider,\r\n    draggedHandle,\r\n    sliderRect,\r\n    handleSliderMouseDown,\r\n    handleSliderMouseMove,\r\n    handleSliderMouseUp\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}